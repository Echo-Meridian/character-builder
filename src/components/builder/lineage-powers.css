/* Art Deco Lineage Powers Panel */
.lineage-powers-panel {
  @apply mt-deco-lg p-deco-md rounded-lg;
  @apply border-2 border-sidonia-gold/30 bg-sidonia-dark/90;
  @apply backdrop-blur-md;
  display: grid;
  gap: 1.2rem;

  /* Art Deco corner decorations */
  position: relative;
}

.lineage-powers-panel::before {
  content: '';
  @apply absolute top-0 left-0;
  @apply w-deco-md h-deco-md;
  @apply border-t-2 border-l-2 border-sidonia-gold;
}

.lineage-powers-panel::after {
  content: '';
  @apply absolute bottom-0 right-0;
  @apply w-deco-md h-deco-md;
  @apply border-b-2 border-r-2 border-sidonia-gold;
}

.lineage-powers-panel header h3 {
  @apply m-0 font-display text-4xl tracking-wider uppercase text-sidonia-gold;
}

.lineage-powers-panel header p {
  @apply mt-2 mb-0;
  @apply text-sidonia-text/70 font-body text-sm;
}

/* Power Summary Stats Bar - Sticky on all screen sizes */
.lineage-power-summary {
  @apply flex flex-wrap items-center;
  @apply gap-3 p-deco-sm rounded-lg;
  @apply bg-sidonia-black/60 border-2 border-sidonia-gold/20;
  @apply backdrop-blur-sm;
  /* Sticky on all screens so you can see power budget while scrolling */
  @apply sticky top-0 z-10;
  @apply bg-sidonia-black/95 backdrop-blur-md;
  @apply shadow-lg shadow-black/40;
  margin-bottom: 1rem;
}

.lineage-power-summary > div {
  display: grid;
  gap: 0.15rem;
  min-width: 120px;
}

.lineage-power-summary span {
  @apply font-body text-xs uppercase tracking-widest text-sidonia-muted;
}

.lineage-power-summary strong {
  @apply text-sidonia-gold font-accent text-lg tracking-wide;
}

.lineage-power-summary__warning {
  @apply m-0 text-corruption-red font-body text-sm;
}

.lineage-power-summary__note {
  @apply m-0 text-sidonia-text/70 font-body text-sm italic;
}

/* Power Cards Grid - Responsive */
.lineage-powers-grid {
  display: grid;
  gap: 1.25rem;
  /* Mobile: Single column */
  grid-template-columns: 1fr;
}

@media (min-width: 768px) {
  .lineage-powers-grid {
    /* Tablet: 2 columns */
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
  }
}

@media (min-width: 1024px) {
  .lineage-powers-grid {
    /* Desktop: 3 columns */
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
  }
}

/* Individual Power Cards - Art Deco Style */
.lineage-power-card {
  @apply border-2 border-sidonia-gold/20 rounded-lg p-deco-sm;
  @apply bg-sidonia-black/80 backdrop-blur-sm;
  @apply transition-all duration-300;
  display: grid;
  gap: 0.75rem;
  position: relative;
}

.lineage-power-card:hover {
  @apply border-sidonia-gold/40 shadow-md;
}

.lineage-power-card--selected,
.lineage-power-card--has-selection {
  @apply border-sidonia-gold shadow-lg shadow-sidonia-gold/20;
}

/* Vertical Power Card Layout */
.lineage-power-card__summary,
.sphere-card__summary,
.focus-card__summary,
.branch-card__summary,
.automata-package-summary {
  @apply flex flex-col gap-2;
  cursor: pointer;
}

.lineage-power-card__summary h4,
.lineage-power-card__summary h5,
.sphere-card__summary h5,
.automata-package-summary h5 {
  @apply m-0 font-accent text-xl font-bold tracking-wide text-sidonia-gold;
}

/* NeoSapien augment system names use Limelight */
.lineage-power-card__summary h4 {
  font-family: 'Limelight', serif;
  font-size: 2rem;
  font-weight: 400;
}

.lineage-power-card__short-desc,
.sphere-card__description,
.automata-package-count {
  @apply text-sidonia-text/70 font-body text-sm;
  @apply mb-2;
}

/* Expand for Details Section */
.lineage-power-card__summary::after,
.sphere-card__summary::after,
.automata-package-card summary::after {
  content: 'Expand for Details ›';
  @apply font-body text-xs uppercase tracking-wider;
  @apply text-sidonia-gold/60;
  @apply mt-1 pt-2 border-t border-sidonia-gold/20;
  @apply transition-all duration-300;
  @apply self-start;
}

.lineage-power-card__summary:hover::after,
.sphere-card__summary:hover::after,
.automata-package-card summary:hover::after {
  @apply text-sidonia-gold;
}

details[open] .lineage-power-card__summary::after,
details[open] .sphere-card__summary::after,
details[open].automata-package-card summary::after {
  content: 'Collapse Details ‹';
  @apply text-sidonia-gold;
}

/* Move any buttons in summary to the end */
.lineage-power-card__summary button,
.sphere-card__summary button,
.automata-package-summary button {
  @apply order-last mt-2;
}

.lineage-power-card.framework {
  grid-column: 1 / -1;
}

.lineage-power-card header h4 {
  @apply m-0 font-display tracking-wide uppercase;
}

.lineage-power-card__body {
  display: grid;
  gap: 0.75rem;
}

/* Tier/Grade Sections */
.lineage-power-tier,
.lineage-power-grade {
  @apply rounded-lg p-deco-md;
  @apply bg-sidonia-dark border-2 border-sidonia-gold/60;
  @apply transition-all duration-300;
  display: grid;
  gap: 0.75rem;
}

.lineage-power-tier:hover,
.lineage-power-grade:hover {
  @apply border-sidonia-gold;
}

.lineage-power-tier--selected,
.lineage-power-grade--selected {
  @apply border-sidonia-gold shadow-md shadow-sidonia-gold/20 bg-sidonia-gold/5;
}

.lineage-power-tier__header {
  display: grid;
  gap: 0.5rem;
}

.lineage-power-grade__header {
  @apply flex flex-wrap items-center gap-2;
}

.lineage-power-tier__info {
  display: grid;
  gap: 0.25rem;
}

.lineage-power-tier__name {
  @apply font-accent text-xl font-bold text-sidonia-gold m-0;
}

.lineage-power-tier__meta {
  @apply flex items-center gap-2;
}

.lineage-power-tier__footer {
  display: grid;
  gap: 0.75rem;
  @apply mt-2 pt-3 border-t border-sidonia-gold/20;
}

.lineage-power-tier__cost {
  @apply text-sidonia-text font-body text-xs;
  display: grid;
  gap: 0.25rem;
}

.lineage-power-tier__cost span {
  @apply text-sidonia-muted font-body text-xs;
}

.lineage-power-grade__meta {
  @apply flex flex-wrap gap-2;
  @apply text-sidonia-brass font-body text-xs;
}

/* Art Deco Badges */
.badge {
  @apply inline-flex items-center gap-1;
  @apply px-2 py-0.5 rounded-full;
  @apply font-body text-xs uppercase tracking-wide;
  @apply bg-sidonia-gold/20 border border-sidonia-gold/50 text-sidonia-gold;
}

/* Icon badges - show icon only on mobile, icon + text on desktop */
.badge--icon {
  @apply gap-1.5;
}

.badge--icon img {
  width: 16px;
  height: 16px;
  object-fit: contain;
  filter: brightness(0) saturate(100%) invert(71%) sepia(47%) saturate(449%) hue-rotate(8deg) brightness(93%) contrast(87%);
  /* This filter converts to gold color #d4af37 */
}

/* Mobile: icon only, hide text */
@media (max-width: 767px) {
  .badge--icon .badge__text {
    display: none;
  }

  .badge--icon {
    padding: 0.35rem;
    min-width: 28px;
    min-height: 28px;
    justify-content: center;
  }

  .badge--icon img {
    width: 14px;
    height: 14px;
  }
}

.badge--tier {
  font-family: 'Newsreader', serif;
  text-transform: none;
  letter-spacing: normal;
  font-weight: 300;
  font-style: italic;
}

.badge--grade {
  @apply bg-blue-500/20 border-blue-500/50 text-blue-400;
}

.badge--type {
  @apply bg-purple-500/20 border-purple-500/50 text-purple-400;
}

.badge--cost {
  @apply bg-orange-500/20 border-orange-500/50 text-orange-400;
}

.badge--tier {
  @apply bg-green-500/20 border-green-500/50 text-green-400;
}

.badge--locked {
  @apply bg-corruption-red/20 border-corruption-red/50 text-corruption-red;
}

/* Power Descriptions */
.power-description {
  display: grid;
  gap: 0.45rem;
  @apply font-body text-sm text-sidonia-text/80;
}

.power-description__detail {
  @apply text-sidonia-text/80 font-body;
}

.power-description__short {
  @apply text-sidonia-text/70 text-xs;
}

.power-description__flaw,
.power-description__detail.power-description__flaw {
  @apply text-orange-400 font-body text-xs italic;
  @apply mt-2 pt-2 border-t border-sidonia-gold/20;
}

.power-description__outcomes,
.power-outcomes {
  @apply list-none m-0 p-0;
  display: grid;
  gap: 0.5rem;
  @apply font-body text-sm;
  @apply mt-3 pt-3 border-t border-sidonia-gold/30;
}

.power-description__outcomes li,
.power-outcomes > div {
  @apply p-2 rounded;
  @apply bg-sidonia-black/40 border-l-2 border-sidonia-brass/60;
  display: grid;
  gap: 0.25rem;
}

.power-outcomes strong {
  @apply text-sidonia-brass font-accent;
}

.power-cost {
  @apply text-orange-400 font-body text-sm;
}

.lineage-powers-columns {
  display: grid;
  gap: 1.25rem;
  /* Mobile: Single column */
  grid-template-columns: 1fr;
}

@media (min-width: 768px) {
  .lineage-powers-columns {
    /* Tablet and Desktop: 2 columns (Primary and Secondary spheres) */
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
  }
}

.sphere-column {
  display: grid;
  gap: 0.75rem;
}

.sphere-column__heading {
  margin: 0;
  font-size: 1.25rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  @apply font-accent font-bold text-sidonia-gold;
}

/* Sphere Cards (Sorcery) */
.sphere-card {
  @apply rounded-lg p-deco-md;
  @apply border-2 border-lineage-sorcerer/60 bg-sidonia-dark;
  @apply transition-all duration-300;
  display: grid;
  gap: 0.75rem;
}

.sphere-card:hover {
  @apply border-lineage-sorcerer;
}

.sphere-card--selected {
  @apply border-lineage-sorcerer shadow-lg shadow-lineage-sorcerer/30;
}

.sphere-card summary h5 {
  @apply font-display text-2xl text-sidonia-gold m-0;
}

.sphere-card__description {
  @apply text-sidonia-brass font-body text-sm italic;
  @apply mt-1;
}

.sphere-prerequisite-message {
  @apply text-sidonia-muted font-body text-sm italic text-center py-2;
}

/* Power Lists */
.power-list {
  @apply list-none m-0 p-0;
  display: grid;
  gap: 0.75rem;
}

.power-list li,
.power-list__item {
  @apply rounded-lg p-deco-md;
  @apply bg-sidonia-dark border-2 border-sidonia-gold/60;
  @apply transition-all duration-300;
  display: grid;
  gap: 0.75rem;
}

.power-list__item:hover {
  @apply border-sidonia-gold;
}

.power-list__item--selected {
  @apply border-sidonia-gold shadow-md shadow-sidonia-gold/20 bg-sidonia-gold/5;
}

.power-list__item--granted {
  @apply border-green-500/60 bg-green-500/5;
}

.power-list__item--disabled {
  @apply opacity-40;
}

.power-list__header {
  display: grid;
  gap: 0.5rem;
}

.power-list__title {
  @apply font-accent text-xl font-bold text-sidonia-gold m-0;
}

/* Archetype/branch label under power name */
.power-list__subtitle {
  @apply font-body text-sm text-sidonia-brass/80 italic mt-1;
  @apply tracking-wide;
}

.power-list__meta {
  @apply flex items-center gap-2 flex-wrap;
}

.focus-grid {
  display: grid;
  gap: 0.75rem;
  /* Mobile: Single column */
  grid-template-columns: 1fr;
}

@media (min-width: 640px) {
  .focus-grid {
    /* Small screens and up: 2 columns */
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1024px) {
  .focus-grid {
    /* Desktop: 3 columns */
    grid-template-columns: repeat(3, 1fr);
  }
}

.focus-card {
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(18, 18, 26, 0.6);
  padding: 0.7rem 0.9rem;
  display: grid;
  gap: 0.45rem;
}

.focus-card--selected {
  border-color: rgba(255, 200, 140, 0.6);
  box-shadow: 0 0 0 1px rgba(255, 200, 140, 0.2);
}

.lineage-power-subsection {
  display: grid;
  gap: 0.6rem;
}

.chassis-grid {
  display: grid;
  gap: 1.25rem;
  /* Mobile: Single column */
  grid-template-columns: 1fr;
}

@media (min-width: 768px) {
  .chassis-grid {
    /* Tablet: 2 columns */
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1024px) {
  .chassis-grid {
    /* Desktop: 3 columns */
    grid-template-columns: repeat(3, 1fr);
  }
}

.branch-grid {
  display: grid;
  gap: 1rem;
}

.branch-card {
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.06);
  background: rgba(12, 12, 18, 0.7);
  padding: 0.8rem 1rem;
  display: grid;
  gap: 0.6rem;
}

.branch-card summary {
  cursor: pointer;
}

.model-grid {
  display: grid;
  gap: 0.75rem;
  /* Mobile: Single column */
  grid-template-columns: 1fr;
}

@media (min-width: 640px) {
  .model-grid {
    /* Small screens: 2 columns */
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1024px) {
  .model-grid {
    /* Desktop: 3 columns */
    grid-template-columns: repeat(3, 1fr);
  }
}

.model-card {
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.06);
  background: rgba(255, 255, 255, 0.04);
  padding: 0.6rem 0.8rem;
  display: grid;
  gap: 0.4rem;
}

.model-card--selected {
  border-color: rgba(120, 200, 255, 0.6);
  box-shadow: 0 0 0 1px rgba(120, 200, 255, 0.2);
}

.model-card--locked {
  opacity: 0.55;
}

.model-card__header {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
  align-items: center;
}

/* Art Deco Power Toggle Buttons */
.power-toggle {
  @apply px-deco-md py-2 rounded-full;
  @apply font-accent text-sm tracking-wider;
  @apply border-2 border-sidonia-gold/60 bg-sidonia-black text-sidonia-text;
  @apply cursor-pointer transition-all duration-300;
}

.power-toggle:hover:not(:disabled) {
  @apply border-sidonia-gold bg-sidonia-gold/10 shadow-md shadow-sidonia-gold/10;
}

.power-toggle--active {
  @apply bg-sidonia-gold/20 border-sidonia-gold text-sidonia-gold;
  @apply shadow-lg shadow-sidonia-gold/30;
}

.power-toggle--primary {
  @apply bg-sidonia-gold/10 border-sidonia-gold text-sidonia-gold;
}

.power-toggle--primary:hover:not(:disabled) {
  @apply bg-sidonia-gold/20 shadow-lg shadow-sidonia-gold/30;
}

.power-toggle--radio {
  @apply w-auto px-deco-md py-1 text-sm;
  @apply justify-self-start;
}

.power-toggle--radio.power-toggle--active {
  @apply text-sidonia-gold bg-sidonia-gold/10;
}

.power-toggle--clear {
  @apply ml-auto;
  @apply bg-corruption-dark/20 border-corruption-red text-corruption-red;
}

.power-toggle--clear:hover:not(:disabled) {
  @apply bg-corruption-red/20 shadow-md shadow-corruption-red/20;
}

.power-toggle:disabled {
  @apply opacity-40 cursor-not-allowed;
}

details summary {
  cursor: pointer;
}

details summary::-webkit-details-marker {
  display: none;
}

.lineage-powers-grid--tall {
  align-items: start;
}

.focus-card__summary h6,
.sphere-card__summary h5,
.lineage-power-card__summary h4,
.branch-card__summary h5 {
  margin: 0;
}

/* Chimera Core Mutations */
.lineage-core-mutations {
  @apply mb-deco-md;
}

.lineage-core-mutations h4 {
  font-family: 'Limelight', serif;
  font-size: 1.75rem;
  font-weight: 400;
  @apply text-lineage-chimera mb-1;
}

.lineage-core-mutations__subtitle {
  @apply text-sidonia-text/70 font-body text-sm mb-deco-sm;
}

.lineage-core-mutations-list {
  @apply grid gap-3 grid-cols-1 md:grid-cols-2;
}

.core-mutation-card {
  @apply p-deco-sm rounded-lg;
  @apply bg-lineage-chimera/10 border-2 border-lineage-chimera/30;
}

.core-mutation-card summary {
  @apply cursor-pointer;
  list-style: none;
}

.core-mutation-card summary::-webkit-details-marker {
  display: none;
}

.core-mutation-card summary h5 {
  @apply m-0 font-accent text-base font-bold tracking-wide uppercase text-lineage-chimera;
  display: inline;
}

.core-mutation-card summary h5::after {
  content: ' ›';
  @apply text-lineage-chimera/60 ml-1;
  font-weight: 400;
}

.core-mutation-card[open] summary h5::after {
  content: ' ‹';
}

.core-mutation-card p {
  @apply mt-2 pt-2 border-t border-lineage-chimera/20;
  @apply text-sidonia-text/70 font-body text-xs;
}

/* Esper/Automata Specialized Sections */
.esper-evolution-section,
.mentalist-selection-section,
.automata-selection-grid {
  @apply space-y-deco-sm;
}

.section-description,
.archetype-description,
.foundation-description {
  @apply text-sidonia-text/70 font-body text-sm;
}

.automata-chassis-section h4 {
  @apply font-accent text-2xl font-bold tracking-wide uppercase text-lineage-automata mb-deco-sm;
}

.automata-package-card {
  @apply rounded-lg border-2 border-lineage-automata/20 bg-sidonia-black/80 p-deco-sm;
  @apply transition-all duration-300;
}

.automata-package-card:hover {
  @apply border-lineage-automata/40;
}

.automata-package-summary {
  @apply flex items-start justify-between gap-3;
}

.automata-package-summary h5 {
  @apply m-0 font-accent text-lg font-bold tracking-wide uppercase text-lineage-automata;
}

.automata-package-count {
  @apply text-sidonia-muted font-body text-xs mt-1;
}

.automata-package-details,
.automata-selected-powers {
  @apply space-y-deco-sm;
}

.automata-package-note {
  @apply text-sidonia-text/70 font-body text-sm italic;
}

.mentalist-foundation {
  @apply flex flex-wrap gap-2;
}

.evolution-options {
  @apply mt-deco-sm pt-deco-sm border-t border-sidonia-gold/20;
}

.evolution-options h6 {
  @apply font-accent text-base font-bold tracking-wide uppercase text-sidonia-brass mb-2;
}

.power-preview summary {
  @apply font-body text-sm text-sidonia-brass cursor-pointer;
}

/* Mobile optimizations - Fix nesting problem */
@media (max-width: 767px) {
  .lineage-powers-panel {
    /* Break out of parent padding for full width on mobile */
    margin-left: -1rem;
    margin-right: -1rem;
    padding: 0.5rem;
    border-radius: 0;
    border-left: none;
    border-right: none;
  }

  .lineage-powers-panel::before,
  .lineage-powers-panel::after {
    display: none;
  }

  /* Minimal padding on mobile cards */
  .lineage-power-card {
    padding: 0.5rem;
    margin-left: -0.25rem;
    margin-right: -0.25rem;
    border-left: none;
    border-right: none;
  }

  /* Compact tier/grade sections */
  .lineage-power-tier,
  .lineage-power-grade,
  .power-list__item {
    padding: 0.5rem;
    border-width: 1px;
  }

  /* Compress header text on mobile */
  .lineage-powers-panel header h3 {
    font-size: 1.5rem;
  }

  /* Minimal summary padding */
  .lineage-power-summary {
    gap: 0.5rem;
    padding: 0.5rem;
    margin-left: -0.5rem;
    margin-right: -0.5rem;
    border-radius: 0;
  }

  .lineage-power-summary > div {
    min-width: auto;
    flex: 1 1 45%;
  }

  /* Reduce grid gaps on mobile */
  .lineage-powers-grid {
    gap: 0.5rem;
  }

  /* Compact buttons */
  .power-toggle {
    padding: 0.4rem 0.75rem;
    font-size: 0.75rem;
  }
}
