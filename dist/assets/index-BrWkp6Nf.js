var ap=Object.defineProperty;var cp=(e,t,n)=>t in e?ap(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Si=(e,t,n)=>cp(e,typeof t!="symbol"?t+"":t,n);function up(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function jc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var kc={exports:{}},ri={},wc={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qr=Symbol.for("react.element"),dp=Symbol.for("react.portal"),pp=Symbol.for("react.fragment"),fp=Symbol.for("react.strict_mode"),hp=Symbol.for("react.profiler"),mp=Symbol.for("react.provider"),gp=Symbol.for("react.context"),vp=Symbol.for("react.forward_ref"),yp=Symbol.for("react.suspense"),xp=Symbol.for("react.memo"),jp=Symbol.for("react.lazy"),Ko=Symbol.iterator;function kp(e){return e===null||typeof e!="object"?null:(e=Ko&&e[Ko]||e["@@iterator"],typeof e=="function"?e:null)}var Sc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nc=Object.assign,Cc={};function er(e,t,n){this.props=e,this.context=t,this.refs=Cc,this.updater=n||Sc}er.prototype.isReactComponent={};er.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};er.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _c(){}_c.prototype=er.prototype;function Jl(e,t,n){this.props=e,this.context=t,this.refs=Cc,this.updater=n||Sc}var Xl=Jl.prototype=new _c;Xl.constructor=Jl;Nc(Xl,er.prototype);Xl.isPureReactComponent=!0;var Jo=Array.isArray,Ec=Object.prototype.hasOwnProperty,Zl={current:null},Pc={key:!0,ref:!0,__self:!0,__source:!0};function bc(e,t,n){var r,s={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Ec.call(t,r)&&!Pc.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:qr,type:e,key:l,ref:o,props:s,_owner:Zl.current}}function wp(e,t){return{$$typeof:qr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function eo(e){return typeof e=="object"&&e!==null&&e.$$typeof===qr}function Sp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Xo=/\/+/g;function Ni(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sp(""+e.key):t.toString(36)}function vs(e,t,n,r,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case qr:case dp:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Ni(o,0):r,Jo(s)?(n="",e!=null&&(n=e.replace(Xo,"$&/")+"/"),vs(s,t,n,"",function(d){return d})):s!=null&&(eo(s)&&(s=wp(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Xo,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Jo(e))for(var a=0;a<e.length;a++){l=e[a];var c=r+Ni(l,a);o+=vs(l,t,n,c,s)}else if(c=kp(e),typeof c=="function")for(e=c.call(e),a=0;!(l=e.next()).done;)l=l.value,c=r+Ni(l,a++),o+=vs(l,t,n,c,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function es(e,t,n){if(e==null)return e;var r=[],s=0;return vs(e,r,"","",function(l){return t.call(n,l,s++)}),r}function Np(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Oe={current:null},ys={transition:null},Cp={ReactCurrentDispatcher:Oe,ReactCurrentBatchConfig:ys,ReactCurrentOwner:Zl};function zc(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:es,forEach:function(e,t,n){es(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return es(e,function(){t++}),t},toArray:function(e){return es(e,function(t){return t})||[]},only:function(e){if(!eo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ne.Component=er;ne.Fragment=pp;ne.Profiler=hp;ne.PureComponent=Jl;ne.StrictMode=fp;ne.Suspense=yp;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cp;ne.act=zc;ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Nc({},e.props),s=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Zl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Ec.call(t,c)&&!Pc.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:qr,type:e.type,key:s,ref:l,props:r,_owner:o}};ne.createContext=function(e){return e={$$typeof:gp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mp,_context:e},e.Consumer=e};ne.createElement=bc;ne.createFactory=function(e){var t=bc.bind(null,e);return t.type=e,t};ne.createRef=function(){return{current:null}};ne.forwardRef=function(e){return{$$typeof:vp,render:e}};ne.isValidElement=eo;ne.lazy=function(e){return{$$typeof:jp,_payload:{_status:-1,_result:e},_init:Np}};ne.memo=function(e,t){return{$$typeof:xp,type:e,compare:t===void 0?null:t}};ne.startTransition=function(e){var t=ys.transition;ys.transition={};try{e()}finally{ys.transition=t}};ne.unstable_act=zc;ne.useCallback=function(e,t){return Oe.current.useCallback(e,t)};ne.useContext=function(e){return Oe.current.useContext(e)};ne.useDebugValue=function(){};ne.useDeferredValue=function(e){return Oe.current.useDeferredValue(e)};ne.useEffect=function(e,t){return Oe.current.useEffect(e,t)};ne.useId=function(){return Oe.current.useId()};ne.useImperativeHandle=function(e,t,n){return Oe.current.useImperativeHandle(e,t,n)};ne.useInsertionEffect=function(e,t){return Oe.current.useInsertionEffect(e,t)};ne.useLayoutEffect=function(e,t){return Oe.current.useLayoutEffect(e,t)};ne.useMemo=function(e,t){return Oe.current.useMemo(e,t)};ne.useReducer=function(e,t,n){return Oe.current.useReducer(e,t,n)};ne.useRef=function(e){return Oe.current.useRef(e)};ne.useState=function(e){return Oe.current.useState(e)};ne.useSyncExternalStore=function(e,t,n){return Oe.current.useSyncExternalStore(e,t,n)};ne.useTransition=function(){return Oe.current.useTransition()};ne.version="18.3.1";wc.exports=ne;var z=wc.exports;const to=jc(z),_p=up({__proto__:null,default:to},[z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep=z,Pp=Symbol.for("react.element"),bp=Symbol.for("react.fragment"),zp=Object.prototype.hasOwnProperty,Rp=Ep.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ap={key:!0,ref:!0,__self:!0,__source:!0};function Rc(e,t,n){var r,s={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)zp.call(t,r)&&!Ap.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Pp,type:e,key:l,ref:o,props:s,_owner:Rp.current}}ri.Fragment=bp;ri.jsx=Rc;ri.jsxs=Rc;kc.exports=ri;var i=kc.exports,el={},Ac={exports:{}},Je={},Tc={exports:{}},Lc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,D){var L=R.length;R.push(D);e:for(;0<L;){var B=L-1>>>1,U=R[B];if(0<s(U,D))R[B]=D,R[L]=U,L=B;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var D=R[0],L=R.pop();if(L!==D){R[0]=L;e:for(var B=0,U=R.length,te=U>>>1;B<te;){var J=2*(B+1)-1,ee=R[J],H=J+1,q=R[H];if(0>s(ee,L))H<U&&0>s(q,ee)?(R[B]=q,R[H]=L,B=H):(R[B]=ee,R[J]=L,B=J);else if(H<U&&0>s(q,L))R[B]=q,R[H]=L,B=H;else break e}}return D}function s(R,D){var L=R.sortIndex-D.sortIndex;return L!==0?L:R.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],d=[],p=1,g=null,m=3,y=!1,j=!1,k=!1,w=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(R){for(var D=n(d);D!==null;){if(D.callback===null)r(d);else if(D.startTime<=R)r(d),D.sortIndex=D.expirationTime,t(c,D);else break;D=n(d)}}function x(R){if(k=!1,f(R),!j)if(n(c)!==null)j=!0,O(v);else{var D=n(d);D!==null&&G(x,D.startTime-R)}}function v(R,D){j=!1,k&&(k=!1,h(_),_=-1),y=!0;var L=m;try{for(f(D),g=n(c);g!==null&&(!(g.expirationTime>D)||R&&!T());){var B=g.callback;if(typeof B=="function"){g.callback=null,m=g.priorityLevel;var U=B(g.expirationTime<=D);D=e.unstable_now(),typeof U=="function"?g.callback=U:g===n(c)&&r(c),f(D)}else r(c);g=n(c)}if(g!==null)var te=!0;else{var J=n(d);J!==null&&G(x,J.startTime-D),te=!1}return te}finally{g=null,m=L,y=!1}}var E=!1,C=null,_=-1,N=5,P=-1;function T(){return!(e.unstable_now()-P<N)}function K(){if(C!==null){var R=e.unstable_now();P=R;var D=!0;try{D=C(!0,R)}finally{D?M():(E=!1,C=null)}}else E=!1}var M;if(typeof u=="function")M=function(){u(K)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,I=A.port2;A.port1.onmessage=K,M=function(){I.postMessage(null)}}else M=function(){w(K,0)};function O(R){C=R,E||(E=!0,M())}function G(R,D){_=w(function(){R(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){j||y||(j=!0,O(v))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(m){case 1:case 2:case 3:var D=3;break;default:D=m}var L=m;m=D;try{return R()}finally{m=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,D){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var L=m;m=R;try{return D()}finally{m=L}},e.unstable_scheduleCallback=function(R,D,L){var B=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?B+L:B):L=B,R){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=L+U,R={id:p++,callback:D,priorityLevel:R,startTime:L,expirationTime:U,sortIndex:-1},L>B?(R.sortIndex=L,t(d,R),n(c)===null&&R===n(d)&&(k?(h(_),_=-1):k=!0,G(x,L-B))):(R.sortIndex=U,t(c,R),j||y||(j=!0,O(v))),R},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(R){var D=m;return function(){var L=m;m=D;try{return R.apply(this,arguments)}finally{m=L}}}})(Lc);Tc.exports=Lc;var Tp=Tc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp=z,Ke=Tp;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $c=new Set,Er={};function kn(e,t){Hn(e,t),Hn(e+"Capture",t)}function Hn(e,t){for(Er[e]=t,e=0;e<t.length;e++)$c.add(t[e])}var bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tl=Object.prototype.hasOwnProperty,$p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zo={},ea={};function Mp(e){return tl.call(ea,e)?!0:tl.call(Zo,e)?!1:$p.test(e)?ea[e]=!0:(Zo[e]=!0,!1)}function Ip(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Op(e,t,n,r){if(t===null||typeof t>"u"||Ip(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function De(e,t,n,r,s,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Re[e]=new De(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Re[t]=new De(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Re[e]=new De(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Re[e]=new De(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Re[e]=new De(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Re[e]=new De(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Re[e]=new De(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Re[e]=new De(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Re[e]=new De(e,5,!1,e.toLowerCase(),null,!1,!1)});var no=/[\-:]([a-z])/g;function ro(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(no,ro);Re[t]=new De(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(no,ro);Re[t]=new De(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(no,ro);Re[t]=new De(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Re[e]=new De(e,1,!1,e.toLowerCase(),null,!1,!1)});Re.xlinkHref=new De("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Re[e]=new De(e,1,!1,e.toLowerCase(),null,!0,!0)});function so(e,t,n,r){var s=Re.hasOwnProperty(t)?Re[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Op(t,n,s,r)&&(n=null),r||s===null?Mp(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Tt=Lp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ts=Symbol.for("react.element"),_n=Symbol.for("react.portal"),En=Symbol.for("react.fragment"),io=Symbol.for("react.strict_mode"),nl=Symbol.for("react.profiler"),Mc=Symbol.for("react.provider"),Ic=Symbol.for("react.context"),lo=Symbol.for("react.forward_ref"),rl=Symbol.for("react.suspense"),sl=Symbol.for("react.suspense_list"),oo=Symbol.for("react.memo"),Ot=Symbol.for("react.lazy"),Oc=Symbol.for("react.offscreen"),ta=Symbol.iterator;function lr(e){return e===null||typeof e!="object"?null:(e=ta&&e[ta]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,Ci;function hr(e){if(Ci===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ci=t&&t[1]||""}return`
`+Ci+e}var _i=!1;function Ei(e,t){if(!e||_i)return"";_i=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),l=r.stack.split(`
`),o=s.length-1,a=l.length-1;1<=o&&0<=a&&s[o]!==l[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==l[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==l[a]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{_i=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hr(e):""}function Dp(e){switch(e.tag){case 5:return hr(e.type);case 16:return hr("Lazy");case 13:return hr("Suspense");case 19:return hr("SuspenseList");case 0:case 2:case 15:return e=Ei(e.type,!1),e;case 11:return e=Ei(e.type.render,!1),e;case 1:return e=Ei(e.type,!0),e;default:return""}}function il(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case En:return"Fragment";case _n:return"Portal";case nl:return"Profiler";case io:return"StrictMode";case rl:return"Suspense";case sl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ic:return(e.displayName||"Context")+".Consumer";case Mc:return(e._context.displayName||"Context")+".Provider";case lo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oo:return t=e.displayName||null,t!==null?t:il(e.type)||"Memo";case Ot:t=e._payload,e=e._init;try{return il(e(t))}catch{}}return null}function Bp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return il(t);case 8:return t===io?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function tn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Up(e){var t=Dc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ns(e){e._valueTracker||(e._valueTracker=Up(e))}function Bc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Dc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Rs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ll(e,t){var n=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function na(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=tn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Uc(e,t){t=t.checked,t!=null&&so(e,"checked",t,!1)}function ol(e,t){Uc(e,t);var n=tn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?al(e,t.type,n):t.hasOwnProperty("defaultValue")&&al(e,t.type,tn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ra(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function al(e,t,n){(t!=="number"||Rs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mr=Array.isArray;function On(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+tn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function cl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sa(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(mr(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:tn(n)}}function Fc(e,t){var n=tn(t.value),r=tn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ia(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Wc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ul(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Wc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rs,Hc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(rs=rs||document.createElement("div"),rs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fp=["Webkit","ms","Moz","O"];Object.keys(yr).forEach(function(e){Fp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yr[t]=yr[e]})});function Vc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||yr.hasOwnProperty(e)&&yr[e]?(""+t).trim():t+"px"}function Gc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Vc(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Wp=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dl(e,t){if(t){if(Wp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function pl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fl=null;function ao(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hl=null,Dn=null,Bn=null;function la(e){if(e=Jr(e)){if(typeof hl!="function")throw Error($(280));var t=e.stateNode;t&&(t=ai(t),hl(e.stateNode,e.type,t))}}function Qc(e){Dn?Bn?Bn.push(e):Bn=[e]:Dn=e}function qc(){if(Dn){var e=Dn,t=Bn;if(Bn=Dn=null,la(e),t)for(e=0;e<t.length;e++)la(t[e])}}function Yc(e,t){return e(t)}function Kc(){}var Pi=!1;function Jc(e,t,n){if(Pi)return e(t,n);Pi=!0;try{return Yc(e,t,n)}finally{Pi=!1,(Dn!==null||Bn!==null)&&(Kc(),qc())}}function br(e,t){var n=e.stateNode;if(n===null)return null;var r=ai(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var ml=!1;if(bt)try{var or={};Object.defineProperty(or,"passive",{get:function(){ml=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{ml=!1}function Hp(e,t,n,r,s,l,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(p){this.onError(p)}}var xr=!1,As=null,Ts=!1,gl=null,Vp={onError:function(e){xr=!0,As=e}};function Gp(e,t,n,r,s,l,o,a,c){xr=!1,As=null,Hp.apply(Vp,arguments)}function Qp(e,t,n,r,s,l,o,a,c){if(Gp.apply(this,arguments),xr){if(xr){var d=As;xr=!1,As=null}else throw Error($(198));Ts||(Ts=!0,gl=d)}}function wn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Xc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oa(e){if(wn(e)!==e)throw Error($(188))}function qp(e){var t=e.alternate;if(!t){if(t=wn(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return oa(s),e;if(l===r)return oa(s),t;l=l.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=l;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=l;break}if(a===r){o=!0,r=s,n=l;break}a=a.sibling}if(!o){for(a=l.child;a;){if(a===n){o=!0,n=l,r=s;break}if(a===r){o=!0,r=l,n=s;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function Zc(e){return e=qp(e),e!==null?eu(e):null}function eu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=eu(e);if(t!==null)return t;e=e.sibling}return null}var tu=Ke.unstable_scheduleCallback,aa=Ke.unstable_cancelCallback,Yp=Ke.unstable_shouldYield,Kp=Ke.unstable_requestPaint,ke=Ke.unstable_now,Jp=Ke.unstable_getCurrentPriorityLevel,co=Ke.unstable_ImmediatePriority,nu=Ke.unstable_UserBlockingPriority,Ls=Ke.unstable_NormalPriority,Xp=Ke.unstable_LowPriority,ru=Ke.unstable_IdlePriority,si=null,xt=null;function Zp(e){if(xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(si,e,void 0,(e.current.flags&128)===128)}catch{}}var dt=Math.clz32?Math.clz32:nf,ef=Math.log,tf=Math.LN2;function nf(e){return e>>>=0,e===0?32:31-(ef(e)/tf|0)|0}var ss=64,is=4194304;function gr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $s(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=gr(a):(l&=o,l!==0&&(r=gr(l)))}else o=n&~s,o!==0?r=gr(o):l!==0&&(r=gr(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-dt(t),s=1<<n,r|=e[n],t&=~s;return r}function rf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sf(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-dt(l),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=rf(a,t)):c<=t&&(e.expiredLanes|=a),l&=~a}}function vl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function su(){var e=ss;return ss<<=1,!(ss&4194240)&&(ss=64),e}function bi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Yr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-dt(t),e[t]=n}function lf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-dt(n),l=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~l}}function uo(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-dt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ce=0;function iu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lu,po,ou,au,cu,yl=!1,ls=[],Gt=null,Qt=null,qt=null,zr=new Map,Rr=new Map,Bt=[],of="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ca(e,t){switch(e){case"focusin":case"focusout":Gt=null;break;case"dragenter":case"dragleave":Qt=null;break;case"mouseover":case"mouseout":qt=null;break;case"pointerover":case"pointerout":zr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rr.delete(t.pointerId)}}function ar(e,t,n,r,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Jr(t),t!==null&&po(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function af(e,t,n,r,s){switch(t){case"focusin":return Gt=ar(Gt,e,t,n,r,s),!0;case"dragenter":return Qt=ar(Qt,e,t,n,r,s),!0;case"mouseover":return qt=ar(qt,e,t,n,r,s),!0;case"pointerover":var l=s.pointerId;return zr.set(l,ar(zr.get(l)||null,e,t,n,r,s)),!0;case"gotpointercapture":return l=s.pointerId,Rr.set(l,ar(Rr.get(l)||null,e,t,n,r,s)),!0}return!1}function uu(e){var t=dn(e.target);if(t!==null){var n=wn(t);if(n!==null){if(t=n.tag,t===13){if(t=Xc(n),t!==null){e.blockedOn=t,cu(e.priority,function(){ou(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=xl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fl=r,n.target.dispatchEvent(r),fl=null}else return t=Jr(n),t!==null&&po(t),e.blockedOn=n,!1;t.shift()}return!0}function ua(e,t,n){xs(e)&&n.delete(t)}function cf(){yl=!1,Gt!==null&&xs(Gt)&&(Gt=null),Qt!==null&&xs(Qt)&&(Qt=null),qt!==null&&xs(qt)&&(qt=null),zr.forEach(ua),Rr.forEach(ua)}function cr(e,t){e.blockedOn===t&&(e.blockedOn=null,yl||(yl=!0,Ke.unstable_scheduleCallback(Ke.unstable_NormalPriority,cf)))}function Ar(e){function t(s){return cr(s,e)}if(0<ls.length){cr(ls[0],e);for(var n=1;n<ls.length;n++){var r=ls[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gt!==null&&cr(Gt,e),Qt!==null&&cr(Qt,e),qt!==null&&cr(qt,e),zr.forEach(t),Rr.forEach(t),n=0;n<Bt.length;n++)r=Bt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Bt.length&&(n=Bt[0],n.blockedOn===null);)uu(n),n.blockedOn===null&&Bt.shift()}var Un=Tt.ReactCurrentBatchConfig,Ms=!0;function uf(e,t,n,r){var s=ce,l=Un.transition;Un.transition=null;try{ce=1,fo(e,t,n,r)}finally{ce=s,Un.transition=l}}function df(e,t,n,r){var s=ce,l=Un.transition;Un.transition=null;try{ce=4,fo(e,t,n,r)}finally{ce=s,Un.transition=l}}function fo(e,t,n,r){if(Ms){var s=xl(e,t,n,r);if(s===null)Di(e,t,r,Is,n),ca(e,r);else if(af(s,e,t,n,r))r.stopPropagation();else if(ca(e,r),t&4&&-1<of.indexOf(e)){for(;s!==null;){var l=Jr(s);if(l!==null&&lu(l),l=xl(e,t,n,r),l===null&&Di(e,t,r,Is,n),l===s)break;s=l}s!==null&&r.stopPropagation()}else Di(e,t,r,null,n)}}var Is=null;function xl(e,t,n,r){if(Is=null,e=ao(r),e=dn(e),e!==null)if(t=wn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Xc(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Is=e,null}function du(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jp()){case co:return 1;case nu:return 4;case Ls:case Xp:return 16;case ru:return 536870912;default:return 16}default:return 16}}var Wt=null,ho=null,js=null;function pu(){if(js)return js;var e,t=ho,n=t.length,r,s="value"in Wt?Wt.value:Wt.textContent,l=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[l-r];r++);return js=s.slice(e,1<r?1-r:void 0)}function ks(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function os(){return!0}function da(){return!1}function Xe(e){function t(n,r,s,l,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(l):l[a]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?os:da,this.isPropagationStopped=da,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=os)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=os)},persist:function(){},isPersistent:os}),t}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mo=Xe(tr),Kr=ye({},tr,{view:0,detail:0}),pf=Xe(Kr),zi,Ri,ur,ii=ye({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:go,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ur&&(ur&&e.type==="mousemove"?(zi=e.screenX-ur.screenX,Ri=e.screenY-ur.screenY):Ri=zi=0,ur=e),zi)},movementY:function(e){return"movementY"in e?e.movementY:Ri}}),pa=Xe(ii),ff=ye({},ii,{dataTransfer:0}),hf=Xe(ff),mf=ye({},Kr,{relatedTarget:0}),Ai=Xe(mf),gf=ye({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),vf=Xe(gf),yf=ye({},tr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xf=Xe(yf),jf=ye({},tr,{data:0}),fa=Xe(jf),kf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sf[e])?!!t[e]:!1}function go(){return Nf}var Cf=ye({},Kr,{key:function(e){if(e.key){var t=kf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ks(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:go,charCode:function(e){return e.type==="keypress"?ks(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ks(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_f=Xe(Cf),Ef=ye({},ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ha=Xe(Ef),Pf=ye({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:go}),bf=Xe(Pf),zf=ye({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rf=Xe(zf),Af=ye({},ii,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tf=Xe(Af),Lf=[9,13,27,32],vo=bt&&"CompositionEvent"in window,jr=null;bt&&"documentMode"in document&&(jr=document.documentMode);var $f=bt&&"TextEvent"in window&&!jr,fu=bt&&(!vo||jr&&8<jr&&11>=jr),ma=" ",ga=!1;function hu(e,t){switch(e){case"keyup":return Lf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pn=!1;function Mf(e,t){switch(e){case"compositionend":return mu(t);case"keypress":return t.which!==32?null:(ga=!0,ma);case"textInput":return e=t.data,e===ma&&ga?null:e;default:return null}}function If(e,t){if(Pn)return e==="compositionend"||!vo&&hu(e,t)?(e=pu(),js=ho=Wt=null,Pn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fu&&t.locale!=="ko"?null:t.data;default:return null}}var Of={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function va(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Of[e.type]:t==="textarea"}function gu(e,t,n,r){Qc(r),t=Os(t,"onChange"),0<t.length&&(n=new mo("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var kr=null,Tr=null;function Df(e){Eu(e,0)}function li(e){var t=Rn(e);if(Bc(t))return e}function Bf(e,t){if(e==="change")return t}var vu=!1;if(bt){var Ti;if(bt){var Li="oninput"in document;if(!Li){var ya=document.createElement("div");ya.setAttribute("oninput","return;"),Li=typeof ya.oninput=="function"}Ti=Li}else Ti=!1;vu=Ti&&(!document.documentMode||9<document.documentMode)}function xa(){kr&&(kr.detachEvent("onpropertychange",yu),Tr=kr=null)}function yu(e){if(e.propertyName==="value"&&li(Tr)){var t=[];gu(t,Tr,e,ao(e)),Jc(Df,t)}}function Uf(e,t,n){e==="focusin"?(xa(),kr=t,Tr=n,kr.attachEvent("onpropertychange",yu)):e==="focusout"&&xa()}function Ff(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return li(Tr)}function Wf(e,t){if(e==="click")return li(t)}function Hf(e,t){if(e==="input"||e==="change")return li(t)}function Vf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ft=typeof Object.is=="function"?Object.is:Vf;function Lr(e,t){if(ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!tl.call(t,s)||!ft(e[s],t[s]))return!1}return!0}function ja(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ka(e,t){var n=ja(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ja(n)}}function xu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ju(){for(var e=window,t=Rs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Rs(e.document)}return t}function yo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Gf(e){var t=ju(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&xu(n.ownerDocument.documentElement,n)){if(r!==null&&yo(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,l=Math.min(r.start,s);r=r.end===void 0?l:Math.min(r.end,s),!e.extend&&l>r&&(s=r,r=l,l=s),s=ka(n,l);var o=ka(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qf=bt&&"documentMode"in document&&11>=document.documentMode,bn=null,jl=null,wr=null,kl=!1;function wa(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kl||bn==null||bn!==Rs(r)||(r=bn,"selectionStart"in r&&yo(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wr&&Lr(wr,r)||(wr=r,r=Os(jl,"onSelect"),0<r.length&&(t=new mo("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=bn)))}function as(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var zn={animationend:as("Animation","AnimationEnd"),animationiteration:as("Animation","AnimationIteration"),animationstart:as("Animation","AnimationStart"),transitionend:as("Transition","TransitionEnd")},$i={},ku={};bt&&(ku=document.createElement("div").style,"AnimationEvent"in window||(delete zn.animationend.animation,delete zn.animationiteration.animation,delete zn.animationstart.animation),"TransitionEvent"in window||delete zn.transitionend.transition);function oi(e){if($i[e])return $i[e];if(!zn[e])return e;var t=zn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ku)return $i[e]=t[n];return e}var wu=oi("animationend"),Su=oi("animationiteration"),Nu=oi("animationstart"),Cu=oi("transitionend"),_u=new Map,Sa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rn(e,t){_u.set(e,t),kn(t,[e])}for(var Mi=0;Mi<Sa.length;Mi++){var Ii=Sa[Mi],qf=Ii.toLowerCase(),Yf=Ii[0].toUpperCase()+Ii.slice(1);rn(qf,"on"+Yf)}rn(wu,"onAnimationEnd");rn(Su,"onAnimationIteration");rn(Nu,"onAnimationStart");rn("dblclick","onDoubleClick");rn("focusin","onFocus");rn("focusout","onBlur");rn(Cu,"onTransitionEnd");Hn("onMouseEnter",["mouseout","mouseover"]);Hn("onMouseLeave",["mouseout","mouseover"]);Hn("onPointerEnter",["pointerout","pointerover"]);Hn("onPointerLeave",["pointerout","pointerover"]);kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kn("onBeforeInput",["compositionend","keypress","textInput","paste"]);kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kf=new Set("cancel close invalid load scroll toggle".split(" ").concat(vr));function Na(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Qp(r,t,void 0,e),e.currentTarget=null}function Eu(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==l&&s.isPropagationStopped())break e;Na(s,a,d),l=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==l&&s.isPropagationStopped())break e;Na(s,a,d),l=c}}}if(Ts)throw e=gl,Ts=!1,gl=null,e}function pe(e,t){var n=t[_l];n===void 0&&(n=t[_l]=new Set);var r=e+"__bubble";n.has(r)||(Pu(t,e,2,!1),n.add(r))}function Oi(e,t,n){var r=0;t&&(r|=4),Pu(n,e,r,t)}var cs="_reactListening"+Math.random().toString(36).slice(2);function $r(e){if(!e[cs]){e[cs]=!0,$c.forEach(function(n){n!=="selectionchange"&&(Kf.has(n)||Oi(n,!1,e),Oi(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cs]||(t[cs]=!0,Oi("selectionchange",!1,t))}}function Pu(e,t,n,r){switch(du(t)){case 1:var s=uf;break;case 4:s=df;break;default:s=fo}n=s.bind(null,t,n,e),s=void 0,!ml||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Di(e,t,n,r,s){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=dn(a),o===null)return;if(c=o.tag,c===5||c===6){r=l=o;continue e}a=a.parentNode}}r=r.return}Jc(function(){var d=l,p=ao(n),g=[];e:{var m=_u.get(e);if(m!==void 0){var y=mo,j=e;switch(e){case"keypress":if(ks(n)===0)break e;case"keydown":case"keyup":y=_f;break;case"focusin":j="focus",y=Ai;break;case"focusout":j="blur",y=Ai;break;case"beforeblur":case"afterblur":y=Ai;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=pa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=hf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=bf;break;case wu:case Su:case Nu:y=vf;break;case Cu:y=Rf;break;case"scroll":y=pf;break;case"wheel":y=Tf;break;case"copy":case"cut":case"paste":y=xf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ha}var k=(t&4)!==0,w=!k&&e==="scroll",h=k?m!==null?m+"Capture":null:m;k=[];for(var u=d,f;u!==null;){f=u;var x=f.stateNode;if(f.tag===5&&x!==null&&(f=x,h!==null&&(x=br(u,h),x!=null&&k.push(Mr(u,x,f)))),w)break;u=u.return}0<k.length&&(m=new y(m,j,null,n,p),g.push({event:m,listeners:k}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&n!==fl&&(j=n.relatedTarget||n.fromElement)&&(dn(j)||j[zt]))break e;if((y||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,y?(j=n.relatedTarget||n.toElement,y=d,j=j?dn(j):null,j!==null&&(w=wn(j),j!==w||j.tag!==5&&j.tag!==6)&&(j=null)):(y=null,j=d),y!==j)){if(k=pa,x="onMouseLeave",h="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(k=ha,x="onPointerLeave",h="onPointerEnter",u="pointer"),w=y==null?m:Rn(y),f=j==null?m:Rn(j),m=new k(x,u+"leave",y,n,p),m.target=w,m.relatedTarget=f,x=null,dn(p)===d&&(k=new k(h,u+"enter",j,n,p),k.target=f,k.relatedTarget=w,x=k),w=x,y&&j)t:{for(k=y,h=j,u=0,f=k;f;f=Sn(f))u++;for(f=0,x=h;x;x=Sn(x))f++;for(;0<u-f;)k=Sn(k),u--;for(;0<f-u;)h=Sn(h),f--;for(;u--;){if(k===h||h!==null&&k===h.alternate)break t;k=Sn(k),h=Sn(h)}k=null}else k=null;y!==null&&Ca(g,m,y,k,!1),j!==null&&w!==null&&Ca(g,w,j,k,!0)}}e:{if(m=d?Rn(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var v=Bf;else if(va(m))if(vu)v=Hf;else{v=Ff;var E=Uf}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(v=Wf);if(v&&(v=v(e,d))){gu(g,v,n,p);break e}E&&E(e,m,d),e==="focusout"&&(E=m._wrapperState)&&E.controlled&&m.type==="number"&&al(m,"number",m.value)}switch(E=d?Rn(d):window,e){case"focusin":(va(E)||E.contentEditable==="true")&&(bn=E,jl=d,wr=null);break;case"focusout":wr=jl=bn=null;break;case"mousedown":kl=!0;break;case"contextmenu":case"mouseup":case"dragend":kl=!1,wa(g,n,p);break;case"selectionchange":if(Qf)break;case"keydown":case"keyup":wa(g,n,p)}var C;if(vo)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Pn?hu(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(fu&&n.locale!=="ko"&&(Pn||_!=="onCompositionStart"?_==="onCompositionEnd"&&Pn&&(C=pu()):(Wt=p,ho="value"in Wt?Wt.value:Wt.textContent,Pn=!0)),E=Os(d,_),0<E.length&&(_=new fa(_,e,null,n,p),g.push({event:_,listeners:E}),C?_.data=C:(C=mu(n),C!==null&&(_.data=C)))),(C=$f?Mf(e,n):If(e,n))&&(d=Os(d,"onBeforeInput"),0<d.length&&(p=new fa("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:d}),p.data=C))}Eu(g,t)})}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Os(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=br(e,n),l!=null&&r.unshift(Mr(e,l,s)),l=br(e,t),l!=null&&r.push(Mr(e,l,s))),e=e.return}return r}function Sn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ca(e,t,n,r,s){for(var l=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,s?(c=br(n,l),c!=null&&o.unshift(Mr(n,c,a))):s||(c=br(n,l),c!=null&&o.push(Mr(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Jf=/\r\n?/g,Xf=/\u0000|\uFFFD/g;function _a(e){return(typeof e=="string"?e:""+e).replace(Jf,`
`).replace(Xf,"")}function us(e,t,n){if(t=_a(t),_a(e)!==t&&n)throw Error($(425))}function Ds(){}var wl=null,Sl=null;function Nl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cl=typeof setTimeout=="function"?setTimeout:void 0,Zf=typeof clearTimeout=="function"?clearTimeout:void 0,Ea=typeof Promise=="function"?Promise:void 0,eh=typeof queueMicrotask=="function"?queueMicrotask:typeof Ea<"u"?function(e){return Ea.resolve(null).then(e).catch(th)}:Cl;function th(e){setTimeout(function(){throw e})}function Bi(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ar(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ar(t)}function Yt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pa(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var nr=Math.random().toString(36).slice(2),vt="__reactFiber$"+nr,Ir="__reactProps$"+nr,zt="__reactContainer$"+nr,_l="__reactEvents$"+nr,nh="__reactListeners$"+nr,rh="__reactHandles$"+nr;function dn(e){var t=e[vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zt]||n[vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Pa(e);e!==null;){if(n=e[vt])return n;e=Pa(e)}return t}e=n,n=e.parentNode}return null}function Jr(e){return e=e[vt]||e[zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function ai(e){return e[Ir]||null}var El=[],An=-1;function sn(e){return{current:e}}function fe(e){0>An||(e.current=El[An],El[An]=null,An--)}function de(e,t){An++,El[An]=e.current,e.current=t}var nn={},$e=sn(nn),He=sn(!1),gn=nn;function Vn(e,t){var n=e.type.contextTypes;if(!n)return nn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ve(e){return e=e.childContextTypes,e!=null}function Bs(){fe(He),fe($e)}function ba(e,t,n){if($e.current!==nn)throw Error($(168));de($e,t),de(He,n)}function bu(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error($(108,Bp(e)||"Unknown",s));return ye({},n,r)}function Us(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nn,gn=$e.current,de($e,e),de(He,He.current),!0}function za(e,t,n){var r=e.stateNode;if(!r)throw Error($(169));n?(e=bu(e,t,gn),r.__reactInternalMemoizedMergedChildContext=e,fe(He),fe($e),de($e,e)):fe(He),de(He,n)}var Nt=null,ci=!1,Ui=!1;function zu(e){Nt===null?Nt=[e]:Nt.push(e)}function sh(e){ci=!0,zu(e)}function ln(){if(!Ui&&Nt!==null){Ui=!0;var e=0,t=ce;try{var n=Nt;for(ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Nt=null,ci=!1}catch(s){throw Nt!==null&&(Nt=Nt.slice(e+1)),tu(co,ln),s}finally{ce=t,Ui=!1}}return null}var Tn=[],Ln=0,Fs=null,Ws=0,et=[],tt=0,vn=null,_t=1,Et="";function an(e,t){Tn[Ln++]=Ws,Tn[Ln++]=Fs,Fs=e,Ws=t}function Ru(e,t,n){et[tt++]=_t,et[tt++]=Et,et[tt++]=vn,vn=e;var r=_t;e=Et;var s=32-dt(r)-1;r&=~(1<<s),n+=1;var l=32-dt(t)+s;if(30<l){var o=s-s%5;l=(r&(1<<o)-1).toString(32),r>>=o,s-=o,_t=1<<32-dt(t)+s|n<<s|r,Et=l+e}else _t=1<<l|n<<s|r,Et=e}function xo(e){e.return!==null&&(an(e,1),Ru(e,1,0))}function jo(e){for(;e===Fs;)Fs=Tn[--Ln],Tn[Ln]=null,Ws=Tn[--Ln],Tn[Ln]=null;for(;e===vn;)vn=et[--tt],et[tt]=null,Et=et[--tt],et[tt]=null,_t=et[--tt],et[tt]=null}var Ye=null,qe=null,he=!1,ut=null;function Au(e,t){var n=nt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ra(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ye=e,qe=Yt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ye=e,qe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=vn!==null?{id:_t,overflow:Et}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=nt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ye=e,qe=null,!0):!1;default:return!1}}function Pl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bl(e){if(he){var t=qe;if(t){var n=t;if(!Ra(e,t)){if(Pl(e))throw Error($(418));t=Yt(n.nextSibling);var r=Ye;t&&Ra(e,t)?Au(r,n):(e.flags=e.flags&-4097|2,he=!1,Ye=e)}}else{if(Pl(e))throw Error($(418));e.flags=e.flags&-4097|2,he=!1,Ye=e}}}function Aa(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ye=e}function ds(e){if(e!==Ye)return!1;if(!he)return Aa(e),he=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Nl(e.type,e.memoizedProps)),t&&(t=qe)){if(Pl(e))throw Tu(),Error($(418));for(;t;)Au(e,t),t=Yt(t.nextSibling)}if(Aa(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){qe=Yt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}qe=null}}else qe=Ye?Yt(e.stateNode.nextSibling):null;return!0}function Tu(){for(var e=qe;e;)e=Yt(e.nextSibling)}function Gn(){qe=Ye=null,he=!1}function ko(e){ut===null?ut=[e]:ut.push(e)}var ih=Tt.ReactCurrentBatchConfig;function dr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,e));var s=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var a=s.refs;o===null?delete a[l]:a[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function ps(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ta(e){var t=e._init;return t(e._payload)}function Lu(e){function t(h,u){if(e){var f=h.deletions;f===null?(h.deletions=[u],h.flags|=16):f.push(u)}}function n(h,u){if(!e)return null;for(;u!==null;)t(h,u),u=u.sibling;return null}function r(h,u){for(h=new Map;u!==null;)u.key!==null?h.set(u.key,u):h.set(u.index,u),u=u.sibling;return h}function s(h,u){return h=Zt(h,u),h.index=0,h.sibling=null,h}function l(h,u,f){return h.index=f,e?(f=h.alternate,f!==null?(f=f.index,f<u?(h.flags|=2,u):f):(h.flags|=2,u)):(h.flags|=1048576,u)}function o(h){return e&&h.alternate===null&&(h.flags|=2),h}function a(h,u,f,x){return u===null||u.tag!==6?(u=qi(f,h.mode,x),u.return=h,u):(u=s(u,f),u.return=h,u)}function c(h,u,f,x){var v=f.type;return v===En?p(h,u,f.props.children,x,f.key):u!==null&&(u.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===Ot&&Ta(v)===u.type)?(x=s(u,f.props),x.ref=dr(h,u,f),x.return=h,x):(x=Ps(f.type,f.key,f.props,null,h.mode,x),x.ref=dr(h,u,f),x.return=h,x)}function d(h,u,f,x){return u===null||u.tag!==4||u.stateNode.containerInfo!==f.containerInfo||u.stateNode.implementation!==f.implementation?(u=Yi(f,h.mode,x),u.return=h,u):(u=s(u,f.children||[]),u.return=h,u)}function p(h,u,f,x,v){return u===null||u.tag!==7?(u=mn(f,h.mode,x,v),u.return=h,u):(u=s(u,f),u.return=h,u)}function g(h,u,f){if(typeof u=="string"&&u!==""||typeof u=="number")return u=qi(""+u,h.mode,f),u.return=h,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case ts:return f=Ps(u.type,u.key,u.props,null,h.mode,f),f.ref=dr(h,null,u),f.return=h,f;case _n:return u=Yi(u,h.mode,f),u.return=h,u;case Ot:var x=u._init;return g(h,x(u._payload),f)}if(mr(u)||lr(u))return u=mn(u,h.mode,f,null),u.return=h,u;ps(h,u)}return null}function m(h,u,f,x){var v=u!==null?u.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return v!==null?null:a(h,u,""+f,x);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ts:return f.key===v?c(h,u,f,x):null;case _n:return f.key===v?d(h,u,f,x):null;case Ot:return v=f._init,m(h,u,v(f._payload),x)}if(mr(f)||lr(f))return v!==null?null:p(h,u,f,x,null);ps(h,f)}return null}function y(h,u,f,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return h=h.get(f)||null,a(u,h,""+x,v);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ts:return h=h.get(x.key===null?f:x.key)||null,c(u,h,x,v);case _n:return h=h.get(x.key===null?f:x.key)||null,d(u,h,x,v);case Ot:var E=x._init;return y(h,u,f,E(x._payload),v)}if(mr(x)||lr(x))return h=h.get(f)||null,p(u,h,x,v,null);ps(u,x)}return null}function j(h,u,f,x){for(var v=null,E=null,C=u,_=u=0,N=null;C!==null&&_<f.length;_++){C.index>_?(N=C,C=null):N=C.sibling;var P=m(h,C,f[_],x);if(P===null){C===null&&(C=N);break}e&&C&&P.alternate===null&&t(h,C),u=l(P,u,_),E===null?v=P:E.sibling=P,E=P,C=N}if(_===f.length)return n(h,C),he&&an(h,_),v;if(C===null){for(;_<f.length;_++)C=g(h,f[_],x),C!==null&&(u=l(C,u,_),E===null?v=C:E.sibling=C,E=C);return he&&an(h,_),v}for(C=r(h,C);_<f.length;_++)N=y(C,h,_,f[_],x),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?_:N.key),u=l(N,u,_),E===null?v=N:E.sibling=N,E=N);return e&&C.forEach(function(T){return t(h,T)}),he&&an(h,_),v}function k(h,u,f,x){var v=lr(f);if(typeof v!="function")throw Error($(150));if(f=v.call(f),f==null)throw Error($(151));for(var E=v=null,C=u,_=u=0,N=null,P=f.next();C!==null&&!P.done;_++,P=f.next()){C.index>_?(N=C,C=null):N=C.sibling;var T=m(h,C,P.value,x);if(T===null){C===null&&(C=N);break}e&&C&&T.alternate===null&&t(h,C),u=l(T,u,_),E===null?v=T:E.sibling=T,E=T,C=N}if(P.done)return n(h,C),he&&an(h,_),v;if(C===null){for(;!P.done;_++,P=f.next())P=g(h,P.value,x),P!==null&&(u=l(P,u,_),E===null?v=P:E.sibling=P,E=P);return he&&an(h,_),v}for(C=r(h,C);!P.done;_++,P=f.next())P=y(C,h,_,P.value,x),P!==null&&(e&&P.alternate!==null&&C.delete(P.key===null?_:P.key),u=l(P,u,_),E===null?v=P:E.sibling=P,E=P);return e&&C.forEach(function(K){return t(h,K)}),he&&an(h,_),v}function w(h,u,f,x){if(typeof f=="object"&&f!==null&&f.type===En&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case ts:e:{for(var v=f.key,E=u;E!==null;){if(E.key===v){if(v=f.type,v===En){if(E.tag===7){n(h,E.sibling),u=s(E,f.props.children),u.return=h,h=u;break e}}else if(E.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===Ot&&Ta(v)===E.type){n(h,E.sibling),u=s(E,f.props),u.ref=dr(h,E,f),u.return=h,h=u;break e}n(h,E);break}else t(h,E);E=E.sibling}f.type===En?(u=mn(f.props.children,h.mode,x,f.key),u.return=h,h=u):(x=Ps(f.type,f.key,f.props,null,h.mode,x),x.ref=dr(h,u,f),x.return=h,h=x)}return o(h);case _n:e:{for(E=f.key;u!==null;){if(u.key===E)if(u.tag===4&&u.stateNode.containerInfo===f.containerInfo&&u.stateNode.implementation===f.implementation){n(h,u.sibling),u=s(u,f.children||[]),u.return=h,h=u;break e}else{n(h,u);break}else t(h,u);u=u.sibling}u=Yi(f,h.mode,x),u.return=h,h=u}return o(h);case Ot:return E=f._init,w(h,u,E(f._payload),x)}if(mr(f))return j(h,u,f,x);if(lr(f))return k(h,u,f,x);ps(h,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,u!==null&&u.tag===6?(n(h,u.sibling),u=s(u,f),u.return=h,h=u):(n(h,u),u=qi(f,h.mode,x),u.return=h,h=u),o(h)):n(h,u)}return w}var Qn=Lu(!0),$u=Lu(!1),Hs=sn(null),Vs=null,$n=null,wo=null;function So(){wo=$n=Vs=null}function No(e){var t=Hs.current;fe(Hs),e._currentValue=t}function zl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Fn(e,t){Vs=e,wo=$n=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(We=!0),e.firstContext=null)}function st(e){var t=e._currentValue;if(wo!==e)if(e={context:e,memoizedValue:t,next:null},$n===null){if(Vs===null)throw Error($(308));$n=e,Vs.dependencies={lanes:0,firstContext:e}}else $n=$n.next=e;return t}var pn=null;function Co(e){pn===null?pn=[e]:pn.push(e)}function Mu(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Co(t)):(n.next=s.next,s.next=n),t.interleaved=n,Rt(e,r)}function Rt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Dt=!1;function _o(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Iu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Rt(e,n)}return s=r.interleaved,s===null?(t.next=t,Co(r)):(t.next=s.next,s.next=t),r.interleaved=t,Rt(e,n)}function ws(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uo(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?s=l=t:l=l.next=t}else s=l=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Gs(e,t,n,r){var s=e.updateQueue;Dt=!1;var l=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?l=d:o.next=d,o=c;var p=e.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==o&&(a===null?p.firstBaseUpdate=d:a.next=d,p.lastBaseUpdate=c))}if(l!==null){var g=s.baseState;o=0,p=d=c=null,a=l;do{var m=a.lane,y=a.eventTime;if((r&m)===m){p!==null&&(p=p.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var j=e,k=a;switch(m=t,y=n,k.tag){case 1:if(j=k.payload,typeof j=="function"){g=j.call(y,g,m);break e}g=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=k.payload,m=typeof j=="function"?j.call(y,g,m):j,m==null)break e;g=ye({},g,m);break e;case 2:Dt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(d=p=y,c=g):p=p.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(p===null&&(c=g),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);xn|=o,e.lanes=o,e.memoizedState=g}}function $a(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Xr={},jt=sn(Xr),Or=sn(Xr),Dr=sn(Xr);function fn(e){if(e===Xr)throw Error($(174));return e}function Eo(e,t){switch(de(Dr,t),de(Or,e),de(jt,Xr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ul(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ul(t,e)}fe(jt),de(jt,t)}function qn(){fe(jt),fe(Or),fe(Dr)}function Ou(e){fn(Dr.current);var t=fn(jt.current),n=ul(t,e.type);t!==n&&(de(Or,e),de(jt,n))}function Po(e){Or.current===e&&(fe(jt),fe(Or))}var me=sn(0);function Qs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fi=[];function bo(){for(var e=0;e<Fi.length;e++)Fi[e]._workInProgressVersionPrimary=null;Fi.length=0}var Ss=Tt.ReactCurrentDispatcher,Wi=Tt.ReactCurrentBatchConfig,yn=0,ge=null,Ne=null,Ee=null,qs=!1,Sr=!1,Br=0,lh=0;function Ae(){throw Error($(321))}function zo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ft(e[n],t[n]))return!1;return!0}function Ro(e,t,n,r,s,l){if(yn=l,ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ss.current=e===null||e.memoizedState===null?uh:dh,e=n(r,s),Sr){l=0;do{if(Sr=!1,Br=0,25<=l)throw Error($(301));l+=1,Ee=Ne=null,t.updateQueue=null,Ss.current=ph,e=n(r,s)}while(Sr)}if(Ss.current=Ys,t=Ne!==null&&Ne.next!==null,yn=0,Ee=Ne=ge=null,qs=!1,t)throw Error($(300));return e}function Ao(){var e=Br!==0;return Br=0,e}function gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?ge.memoizedState=Ee=e:Ee=Ee.next=e,Ee}function it(){if(Ne===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=Ne.next;var t=Ee===null?ge.memoizedState:Ee.next;if(t!==null)Ee=t,Ne=e;else{if(e===null)throw Error($(310));Ne=e,e={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},Ee===null?ge.memoizedState=Ee=e:Ee=Ee.next=e}return Ee}function Ur(e,t){return typeof t=="function"?t(e):t}function Hi(e){var t=it(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=Ne,s=r.baseQueue,l=n.pending;if(l!==null){if(s!==null){var o=s.next;s.next=l.next,l.next=o}r.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,r=r.baseState;var a=o=null,c=null,d=l;do{var p=d.lane;if((yn&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var g={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=g,o=r):c=c.next=g,ge.lanes|=p,xn|=p}d=d.next}while(d!==null&&d!==l);c===null?o=r:c.next=a,ft(r,t.memoizedState)||(We=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do l=s.lane,ge.lanes|=l,xn|=l,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Vi(e){var t=it(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,l=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do l=e(l,o.action),o=o.next;while(o!==s);ft(l,t.memoizedState)||(We=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Du(){}function Bu(e,t){var n=ge,r=it(),s=t(),l=!ft(r.memoizedState,s);if(l&&(r.memoizedState=s,We=!0),r=r.queue,To(Wu.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||Ee!==null&&Ee.memoizedState.tag&1){if(n.flags|=2048,Fr(9,Fu.bind(null,n,r,s,t),void 0,null),Pe===null)throw Error($(349));yn&30||Uu(n,t,s)}return s}function Uu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Fu(e,t,n,r){t.value=n,t.getSnapshot=r,Hu(t)&&Vu(e)}function Wu(e,t,n){return n(function(){Hu(t)&&Vu(e)})}function Hu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ft(e,n)}catch{return!0}}function Vu(e){var t=Rt(e,1);t!==null&&pt(t,e,1,-1)}function Ma(e){var t=gt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:e},t.queue=e,e=e.dispatch=ch.bind(null,ge,e),[t.memoizedState,e]}function Fr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Gu(){return it().memoizedState}function Ns(e,t,n,r){var s=gt();ge.flags|=e,s.memoizedState=Fr(1|t,n,void 0,r===void 0?null:r)}function ui(e,t,n,r){var s=it();r=r===void 0?null:r;var l=void 0;if(Ne!==null){var o=Ne.memoizedState;if(l=o.destroy,r!==null&&zo(r,o.deps)){s.memoizedState=Fr(t,n,l,r);return}}ge.flags|=e,s.memoizedState=Fr(1|t,n,l,r)}function Ia(e,t){return Ns(8390656,8,e,t)}function To(e,t){return ui(2048,8,e,t)}function Qu(e,t){return ui(4,2,e,t)}function qu(e,t){return ui(4,4,e,t)}function Yu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ku(e,t,n){return n=n!=null?n.concat([e]):null,ui(4,4,Yu.bind(null,t,e),n)}function Lo(){}function Ju(e,t){var n=it();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xu(e,t){var n=it();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zu(e,t,n){return yn&21?(ft(n,t)||(n=su(),ge.lanes|=n,xn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,We=!0),e.memoizedState=n)}function oh(e,t){var n=ce;ce=n!==0&&4>n?n:4,e(!0);var r=Wi.transition;Wi.transition={};try{e(!1),t()}finally{ce=n,Wi.transition=r}}function ed(){return it().memoizedState}function ah(e,t,n){var r=Xt(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},td(e))nd(t,n);else if(n=Mu(e,t,n,r),n!==null){var s=Ie();pt(n,e,r,s),rd(n,t,r)}}function ch(e,t,n){var r=Xt(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(td(e))nd(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,a=l(o,n);if(s.hasEagerState=!0,s.eagerState=a,ft(a,o)){var c=t.interleaved;c===null?(s.next=s,Co(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Mu(e,t,s,r),n!==null&&(s=Ie(),pt(n,e,r,s),rd(n,t,r))}}function td(e){var t=e.alternate;return e===ge||t!==null&&t===ge}function nd(e,t){Sr=qs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function rd(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uo(e,n)}}var Ys={readContext:st,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useInsertionEffect:Ae,useLayoutEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useMutableSource:Ae,useSyncExternalStore:Ae,useId:Ae,unstable_isNewReconciler:!1},uh={readContext:st,useCallback:function(e,t){return gt().memoizedState=[e,t===void 0?null:t],e},useContext:st,useEffect:Ia,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ns(4194308,4,Yu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ns(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ns(4,2,e,t)},useMemo:function(e,t){var n=gt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ah.bind(null,ge,e),[r.memoizedState,e]},useRef:function(e){var t=gt();return e={current:e},t.memoizedState=e},useState:Ma,useDebugValue:Lo,useDeferredValue:function(e){return gt().memoizedState=e},useTransition:function(){var e=Ma(!1),t=e[0];return e=oh.bind(null,e[1]),gt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ge,s=gt();if(he){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),Pe===null)throw Error($(349));yn&30||Uu(r,t,n)}s.memoizedState=n;var l={value:n,getSnapshot:t};return s.queue=l,Ia(Wu.bind(null,r,l,e),[e]),r.flags|=2048,Fr(9,Fu.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=gt(),t=Pe.identifierPrefix;if(he){var n=Et,r=_t;n=(r&~(1<<32-dt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Br++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=lh++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dh={readContext:st,useCallback:Ju,useContext:st,useEffect:To,useImperativeHandle:Ku,useInsertionEffect:Qu,useLayoutEffect:qu,useMemo:Xu,useReducer:Hi,useRef:Gu,useState:function(){return Hi(Ur)},useDebugValue:Lo,useDeferredValue:function(e){var t=it();return Zu(t,Ne.memoizedState,e)},useTransition:function(){var e=Hi(Ur)[0],t=it().memoizedState;return[e,t]},useMutableSource:Du,useSyncExternalStore:Bu,useId:ed,unstable_isNewReconciler:!1},ph={readContext:st,useCallback:Ju,useContext:st,useEffect:To,useImperativeHandle:Ku,useInsertionEffect:Qu,useLayoutEffect:qu,useMemo:Xu,useReducer:Vi,useRef:Gu,useState:function(){return Vi(Ur)},useDebugValue:Lo,useDeferredValue:function(e){var t=it();return Ne===null?t.memoizedState=e:Zu(t,Ne.memoizedState,e)},useTransition:function(){var e=Vi(Ur)[0],t=it().memoizedState;return[e,t]},useMutableSource:Du,useSyncExternalStore:Bu,useId:ed,unstable_isNewReconciler:!1};function at(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Rl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ye({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var di={isMounted:function(e){return(e=e._reactInternals)?wn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ie(),s=Xt(e),l=Pt(r,s);l.payload=t,n!=null&&(l.callback=n),t=Kt(e,l,s),t!==null&&(pt(t,e,s,r),ws(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ie(),s=Xt(e),l=Pt(r,s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Kt(e,l,s),t!==null&&(pt(t,e,s,r),ws(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ie(),r=Xt(e),s=Pt(n,r);s.tag=2,t!=null&&(s.callback=t),t=Kt(e,s,r),t!==null&&(pt(t,e,r,n),ws(t,e,r))}};function Oa(e,t,n,r,s,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!Lr(n,r)||!Lr(s,l):!0}function sd(e,t,n){var r=!1,s=nn,l=t.contextType;return typeof l=="object"&&l!==null?l=st(l):(s=Ve(t)?gn:$e.current,r=t.contextTypes,l=(r=r!=null)?Vn(e,s):nn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=di,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function Da(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&di.enqueueReplaceState(t,t.state,null)}function Al(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},_o(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=st(l):(l=Ve(t)?gn:$e.current,s.context=Vn(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Rl(e,t,l,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&di.enqueueReplaceState(s,s.state,null),Gs(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Yn(e,t){try{var n="",r=t;do n+=Dp(r),r=r.return;while(r);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function Gi(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Tl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fh=typeof WeakMap=="function"?WeakMap:Map;function id(e,t,n){n=Pt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Js||(Js=!0,Wl=r),Tl(e,t)},n}function ld(e,t,n){n=Pt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Tl(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Tl(e,t),typeof r!="function"&&(Jt===null?Jt=new Set([this]):Jt.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Ba(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new fh;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Eh.bind(null,e,t,n),t.then(e,e))}function Ua(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fa(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Pt(-1,1),t.tag=2,Kt(n,t,1))),n.lanes|=1),e)}var hh=Tt.ReactCurrentOwner,We=!1;function Me(e,t,n,r){t.child=e===null?$u(t,null,n,r):Qn(t,e.child,n,r)}function Wa(e,t,n,r,s){n=n.render;var l=t.ref;return Fn(t,s),r=Ro(e,t,n,r,l,s),n=Ao(),e!==null&&!We?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,At(e,t,s)):(he&&n&&xo(t),t.flags|=1,Me(e,t,r,s),t.child)}function Ha(e,t,n,r,s){if(e===null){var l=n.type;return typeof l=="function"&&!Fo(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,od(e,t,l,r,s)):(e=Ps(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:Lr,n(o,r)&&e.ref===t.ref)return At(e,t,s)}return t.flags|=1,e=Zt(l,r),e.ref=t.ref,e.return=t,t.child=e}function od(e,t,n,r,s){if(e!==null){var l=e.memoizedProps;if(Lr(l,r)&&e.ref===t.ref)if(We=!1,t.pendingProps=r=l,(e.lanes&s)!==0)e.flags&131072&&(We=!0);else return t.lanes=e.lanes,At(e,t,s)}return Ll(e,t,n,r,s)}function ad(e,t,n){var r=t.pendingProps,s=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(In,Qe),Qe|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,de(In,Qe),Qe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,de(In,Qe),Qe|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,de(In,Qe),Qe|=r;return Me(e,t,s,n),t.child}function cd(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ll(e,t,n,r,s){var l=Ve(n)?gn:$e.current;return l=Vn(t,l),Fn(t,s),n=Ro(e,t,n,r,l,s),r=Ao(),e!==null&&!We?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,At(e,t,s)):(he&&r&&xo(t),t.flags|=1,Me(e,t,n,s),t.child)}function Va(e,t,n,r,s){if(Ve(n)){var l=!0;Us(t)}else l=!1;if(Fn(t,s),t.stateNode===null)Cs(e,t),sd(t,n,r),Al(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=st(d):(d=Ve(n)?gn:$e.current,d=Vn(t,d));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==d)&&Da(t,o,r,d),Dt=!1;var m=t.memoizedState;o.state=m,Gs(t,r,o,s),c=t.memoizedState,a!==r||m!==c||He.current||Dt?(typeof p=="function"&&(Rl(t,n,p,r),c=t.memoizedState),(a=Dt||Oa(t,n,a,r,m,c,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Iu(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:at(t.type,a),o.props=d,g=t.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=st(c):(c=Ve(n)?gn:$e.current,c=Vn(t,c));var y=n.getDerivedStateFromProps;(p=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==g||m!==c)&&Da(t,o,r,c),Dt=!1,m=t.memoizedState,o.state=m,Gs(t,r,o,s);var j=t.memoizedState;a!==g||m!==j||He.current||Dt?(typeof y=="function"&&(Rl(t,n,y,r),j=t.memoizedState),(d=Dt||Oa(t,n,d,r,m,j,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,j,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,j,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=j),o.props=r,o.state=j,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return $l(e,t,n,r,l,s)}function $l(e,t,n,r,s,l){cd(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&za(t,n,!1),At(e,t,l);r=t.stateNode,hh.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Qn(t,e.child,null,l),t.child=Qn(t,null,a,l)):Me(e,t,a,l),t.memoizedState=r.state,s&&za(t,n,!0),t.child}function ud(e){var t=e.stateNode;t.pendingContext?ba(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ba(e,t.context,!1),Eo(e,t.containerInfo)}function Ga(e,t,n,r,s){return Gn(),ko(s),t.flags|=256,Me(e,t,n,r),t.child}var Ml={dehydrated:null,treeContext:null,retryLane:0};function Il(e){return{baseLanes:e,cachePool:null,transitions:null}}function dd(e,t,n){var r=t.pendingProps,s=me.current,l=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),de(me,s&1),e===null)return bl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=hi(o,r,0,null),e=mn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Il(n),t.memoizedState=Ml,e):$o(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return mh(e,t,o,r,a,s,n);if(l){l=r.fallback,o=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Zt(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?l=Zt(a,l):(l=mn(l,o,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?Il(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=Ml,r}return l=e.child,e=l.sibling,r=Zt(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function $o(e,t){return t=hi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function fs(e,t,n,r){return r!==null&&ko(r),Qn(t,e.child,null,n),e=$o(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mh(e,t,n,r,s,l,o){if(n)return t.flags&256?(t.flags&=-257,r=Gi(Error($(422))),fs(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=hi({mode:"visible",children:r.children},s,0,null),l=mn(l,s,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Qn(t,e.child,null,o),t.child.memoizedState=Il(o),t.memoizedState=Ml,l);if(!(t.mode&1))return fs(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,l=Error($(419)),r=Gi(l,r,void 0),fs(e,t,o,r)}if(a=(o&e.childLanes)!==0,We||a){if(r=Pe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,Rt(e,s),pt(r,e,s,-1))}return Uo(),r=Gi(Error($(421))),fs(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Ph.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,qe=Yt(s.nextSibling),Ye=t,he=!0,ut=null,e!==null&&(et[tt++]=_t,et[tt++]=Et,et[tt++]=vn,_t=e.id,Et=e.overflow,vn=t),t=$o(t,r.children),t.flags|=4096,t)}function Qa(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),zl(e.return,t,n)}function Qi(e,t,n,r,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=s)}function pd(e,t,n){var r=t.pendingProps,s=r.revealOrder,l=r.tail;if(Me(e,t,r.children,n),r=me.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qa(e,n,t);else if(e.tag===19)Qa(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(de(me,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Qs(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Qi(t,!1,s,n,l);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Qs(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Qi(t,!0,n,null,l);break;case"together":Qi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function At(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),xn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=Zt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gh(e,t,n){switch(t.tag){case 3:ud(t),Gn();break;case 5:Ou(t);break;case 1:Ve(t.type)&&Us(t);break;case 4:Eo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;de(Hs,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(de(me,me.current&1),t.flags|=128,null):n&t.child.childLanes?dd(e,t,n):(de(me,me.current&1),e=At(e,t,n),e!==null?e.sibling:null);de(me,me.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return pd(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(me,me.current),r)break;return null;case 22:case 23:return t.lanes=0,ad(e,t,n)}return At(e,t,n)}var fd,Ol,hd,md;fd=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ol=function(){};hd=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,fn(jt.current);var l=null;switch(n){case"input":s=ll(e,s),r=ll(e,r),l=[];break;case"select":s=ye({},s,{value:void 0}),r=ye({},r,{value:void 0}),l=[];break;case"textarea":s=cl(e,s),r=cl(e,r),l=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ds)}dl(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Er.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var c=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(l||(l=[]),l.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Er.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&pe("scroll",e),l||a===c||(l=[])):(l=l||[]).push(d,c))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};md=function(e,t,n,r){n!==r&&(t.flags|=4)};function pr(e,t){if(!he)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Te(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vh(e,t,n){var r=t.pendingProps;switch(jo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(t),null;case 1:return Ve(t.type)&&Bs(),Te(t),null;case 3:return r=t.stateNode,qn(),fe(He),fe($e),bo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ds(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ut!==null&&(Gl(ut),ut=null))),Ol(e,t),Te(t),null;case 5:Po(t);var s=fn(Dr.current);if(n=t.type,e!==null&&t.stateNode!=null)hd(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error($(166));return Te(t),null}if(e=fn(jt.current),ds(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[vt]=t,r[Ir]=l,e=(t.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(s=0;s<vr.length;s++)pe(vr[s],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":na(r,l),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},pe("invalid",r);break;case"textarea":sa(r,l),pe("invalid",r)}dl(n,l),s=null;for(var o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="children"?typeof a=="string"?r.textContent!==a&&(l.suppressHydrationWarning!==!0&&us(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(l.suppressHydrationWarning!==!0&&us(r.textContent,a,e),s=["children",""+a]):Er.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&pe("scroll",r)}switch(n){case"input":ns(r),ra(r,l,!0);break;case"textarea":ns(r),ia(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Ds)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Wc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[vt]=t,e[Ir]=r,fd(e,t,!1,!1),t.stateNode=e;e:{switch(o=pl(n,r),n){case"dialog":pe("cancel",e),pe("close",e),s=r;break;case"iframe":case"object":case"embed":pe("load",e),s=r;break;case"video":case"audio":for(s=0;s<vr.length;s++)pe(vr[s],e);s=r;break;case"source":pe("error",e),s=r;break;case"img":case"image":case"link":pe("error",e),pe("load",e),s=r;break;case"details":pe("toggle",e),s=r;break;case"input":na(e,r),s=ll(e,r),pe("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ye({},r,{value:void 0}),pe("invalid",e);break;case"textarea":sa(e,r),s=cl(e,r),pe("invalid",e);break;default:s=r}dl(n,s),a=s;for(l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="style"?Gc(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Hc(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Pr(e,c):typeof c=="number"&&Pr(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Er.hasOwnProperty(l)?c!=null&&l==="onScroll"&&pe("scroll",e):c!=null&&so(e,l,c,o))}switch(n){case"input":ns(e),ra(e,r,!1);break;case"textarea":ns(e),ia(e);break;case"option":r.value!=null&&e.setAttribute("value",""+tn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?On(e,!!r.multiple,l,!1):r.defaultValue!=null&&On(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ds)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Te(t),null;case 6:if(e&&t.stateNode!=null)md(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error($(166));if(n=fn(Dr.current),fn(jt.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[vt]=t,(l=r.nodeValue!==n)&&(e=Ye,e!==null))switch(e.tag){case 3:us(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&us(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vt]=t,t.stateNode=r}return Te(t),null;case 13:if(fe(me),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(he&&qe!==null&&t.mode&1&&!(t.flags&128))Tu(),Gn(),t.flags|=98560,l=!1;else if(l=ds(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error($(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error($(317));l[vt]=t}else Gn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Te(t),l=!1}else ut!==null&&(Gl(ut),ut=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||me.current&1?Ce===0&&(Ce=3):Uo())),t.updateQueue!==null&&(t.flags|=4),Te(t),null);case 4:return qn(),Ol(e,t),e===null&&$r(t.stateNode.containerInfo),Te(t),null;case 10:return No(t.type._context),Te(t),null;case 17:return Ve(t.type)&&Bs(),Te(t),null;case 19:if(fe(me),l=t.memoizedState,l===null)return Te(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)pr(l,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Qs(e),o!==null){for(t.flags|=128,pr(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return de(me,me.current&1|2),t.child}e=e.sibling}l.tail!==null&&ke()>Kn&&(t.flags|=128,r=!0,pr(l,!1),t.lanes=4194304)}else{if(!r)if(e=Qs(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),pr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!he)return Te(t),null}else 2*ke()-l.renderingStartTime>Kn&&n!==1073741824&&(t.flags|=128,r=!0,pr(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=ke(),t.sibling=null,n=me.current,de(me,r?n&1|2:n&1),t):(Te(t),null);case 22:case 23:return Bo(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Qe&1073741824&&(Te(t),t.subtreeFlags&6&&(t.flags|=8192)):Te(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function yh(e,t){switch(jo(t),t.tag){case 1:return Ve(t.type)&&Bs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qn(),fe(He),fe($e),bo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Po(t),null;case 13:if(fe(me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));Gn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fe(me),null;case 4:return qn(),null;case 10:return No(t.type._context),null;case 22:case 23:return Bo(),null;case 24:return null;default:return null}}var hs=!1,Le=!1,xh=typeof WeakSet=="function"?WeakSet:Set,W=null;function Mn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xe(e,t,r)}else n.current=null}function Dl(e,t,n){try{n()}catch(r){xe(e,t,r)}}var qa=!1;function jh(e,t){if(wl=Ms,e=ju(),yo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,d=0,p=0,g=e,m=null;t:for(;;){for(var y;g!==n||s!==0&&g.nodeType!==3||(a=o+s),g!==l||r!==0&&g.nodeType!==3||(c=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(y=g.firstChild)!==null;)m=g,g=y;for(;;){if(g===e)break t;if(m===n&&++d===s&&(a=o),m===l&&++p===r&&(c=o),(y=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=y}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sl={focusedElem:e,selectionRange:n},Ms=!1,W=t;W!==null;)if(t=W,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,W=e;else for(;W!==null;){t=W;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var k=j.memoizedProps,w=j.memoizedState,h=t.stateNode,u=h.getSnapshotBeforeUpdate(t.elementType===t.type?k:at(t.type,k),w);h.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(x){xe(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,W=e;break}W=t.return}return j=qa,qa=!1,j}function Nr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&Dl(t,n,l)}s=s.next}while(s!==r)}}function pi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Bl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function gd(e){var t=e.alternate;t!==null&&(e.alternate=null,gd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vt],delete t[Ir],delete t[_l],delete t[nh],delete t[rh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function vd(e){return e.tag===5||e.tag===3||e.tag===4}function Ya(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ul(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ds));else if(r!==4&&(e=e.child,e!==null))for(Ul(e,t,n),e=e.sibling;e!==null;)Ul(e,t,n),e=e.sibling}function Fl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Fl(e,t,n),e=e.sibling;e!==null;)Fl(e,t,n),e=e.sibling}var be=null,ct=!1;function $t(e,t,n){for(n=n.child;n!==null;)yd(e,t,n),n=n.sibling}function yd(e,t,n){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(si,n)}catch{}switch(n.tag){case 5:Le||Mn(n,t);case 6:var r=be,s=ct;be=null,$t(e,t,n),be=r,ct=s,be!==null&&(ct?(e=be,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):be.removeChild(n.stateNode));break;case 18:be!==null&&(ct?(e=be,n=n.stateNode,e.nodeType===8?Bi(e.parentNode,n):e.nodeType===1&&Bi(e,n),Ar(e)):Bi(be,n.stateNode));break;case 4:r=be,s=ct,be=n.stateNode.containerInfo,ct=!0,$t(e,t,n),be=r,ct=s;break;case 0:case 11:case 14:case 15:if(!Le&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var l=s,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Dl(n,t,o),s=s.next}while(s!==r)}$t(e,t,n);break;case 1:if(!Le&&(Mn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xe(n,t,a)}$t(e,t,n);break;case 21:$t(e,t,n);break;case 22:n.mode&1?(Le=(r=Le)||n.memoizedState!==null,$t(e,t,n),Le=r):$t(e,t,n);break;default:$t(e,t,n)}}function Ka(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new xh),t.forEach(function(r){var s=bh.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ot(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var l=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:be=a.stateNode,ct=!1;break e;case 3:be=a.stateNode.containerInfo,ct=!0;break e;case 4:be=a.stateNode.containerInfo,ct=!0;break e}a=a.return}if(be===null)throw Error($(160));yd(l,o,s),be=null,ct=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){xe(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)xd(t,e),t=t.sibling}function xd(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ot(t,e),ht(e),r&4){try{Nr(3,e,e.return),pi(3,e)}catch(k){xe(e,e.return,k)}try{Nr(5,e,e.return)}catch(k){xe(e,e.return,k)}}break;case 1:ot(t,e),ht(e),r&512&&n!==null&&Mn(n,n.return);break;case 5:if(ot(t,e),ht(e),r&512&&n!==null&&Mn(n,n.return),e.flags&32){var s=e.stateNode;try{Pr(s,"")}catch(k){xe(e,e.return,k)}}if(r&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&l.type==="radio"&&l.name!=null&&Uc(s,l),pl(a,o);var d=pl(a,l);for(o=0;o<c.length;o+=2){var p=c[o],g=c[o+1];p==="style"?Gc(s,g):p==="dangerouslySetInnerHTML"?Hc(s,g):p==="children"?Pr(s,g):so(s,p,g,d)}switch(a){case"input":ol(s,l);break;case"textarea":Fc(s,l);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var y=l.value;y!=null?On(s,!!l.multiple,y,!1):m!==!!l.multiple&&(l.defaultValue!=null?On(s,!!l.multiple,l.defaultValue,!0):On(s,!!l.multiple,l.multiple?[]:"",!1))}s[Ir]=l}catch(k){xe(e,e.return,k)}}break;case 6:if(ot(t,e),ht(e),r&4){if(e.stateNode===null)throw Error($(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(k){xe(e,e.return,k)}}break;case 3:if(ot(t,e),ht(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ar(t.containerInfo)}catch(k){xe(e,e.return,k)}break;case 4:ot(t,e),ht(e);break;case 13:ot(t,e),ht(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Oo=ke())),r&4&&Ka(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(Le=(d=Le)||p,ot(t,e),Le=d):ot(t,e),ht(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(W=e,p=e.child;p!==null;){for(g=W=p;W!==null;){switch(m=W,y=m.child,m.tag){case 0:case 11:case 14:case 15:Nr(4,m,m.return);break;case 1:Mn(m,m.return);var j=m.stateNode;if(typeof j.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(k){xe(r,n,k)}}break;case 5:Mn(m,m.return);break;case 22:if(m.memoizedState!==null){Xa(g);continue}}y!==null?(y.return=m,W=y):Xa(g)}p=p.sibling}e:for(p=null,g=e;;){if(g.tag===5){if(p===null){p=g;try{s=g.stateNode,d?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(a=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Vc("display",o))}catch(k){xe(e,e.return,k)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(k){xe(e,e.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:ot(t,e),ht(e),r&4&&Ka(e);break;case 21:break;default:ot(t,e),ht(e)}}function ht(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(vd(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Pr(s,""),r.flags&=-33);var l=Ya(e);Fl(e,l,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ya(e);Ul(e,a,o);break;default:throw Error($(161))}}catch(c){xe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kh(e,t,n){W=e,jd(e)}function jd(e,t,n){for(var r=(e.mode&1)!==0;W!==null;){var s=W,l=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||hs;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Le;a=hs;var d=Le;if(hs=o,(Le=c)&&!d)for(W=s;W!==null;)o=W,c=o.child,o.tag===22&&o.memoizedState!==null?Za(s):c!==null?(c.return=o,W=c):Za(s);for(;l!==null;)W=l,jd(l),l=l.sibling;W=s,hs=a,Le=d}Ja(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,W=l):Ja(e)}}function Ja(e){for(;W!==null;){var t=W;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Le||pi(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Le)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:at(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&$a(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$a(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&Ar(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Le||t.flags&512&&Bl(t)}catch(m){xe(t,t.return,m)}}if(t===e){W=null;break}if(n=t.sibling,n!==null){n.return=t.return,W=n;break}W=t.return}}function Xa(e){for(;W!==null;){var t=W;if(t===e){W=null;break}var n=t.sibling;if(n!==null){n.return=t.return,W=n;break}W=t.return}}function Za(e){for(;W!==null;){var t=W;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{pi(4,t)}catch(c){xe(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){xe(t,s,c)}}var l=t.return;try{Bl(t)}catch(c){xe(t,l,c)}break;case 5:var o=t.return;try{Bl(t)}catch(c){xe(t,o,c)}}}catch(c){xe(t,t.return,c)}if(t===e){W=null;break}var a=t.sibling;if(a!==null){a.return=t.return,W=a;break}W=t.return}}var wh=Math.ceil,Ks=Tt.ReactCurrentDispatcher,Mo=Tt.ReactCurrentOwner,rt=Tt.ReactCurrentBatchConfig,se=0,Pe=null,we=null,ze=0,Qe=0,In=sn(0),Ce=0,Wr=null,xn=0,fi=0,Io=0,Cr=null,Ue=null,Oo=0,Kn=1/0,wt=null,Js=!1,Wl=null,Jt=null,ms=!1,Ht=null,Xs=0,_r=0,Hl=null,_s=-1,Es=0;function Ie(){return se&6?ke():_s!==-1?_s:_s=ke()}function Xt(e){return e.mode&1?se&2&&ze!==0?ze&-ze:ih.transition!==null?(Es===0&&(Es=su()),Es):(e=ce,e!==0||(e=window.event,e=e===void 0?16:du(e.type)),e):1}function pt(e,t,n,r){if(50<_r)throw _r=0,Hl=null,Error($(185));Yr(e,n,r),(!(se&2)||e!==Pe)&&(e===Pe&&(!(se&2)&&(fi|=n),Ce===4&&Ut(e,ze)),Ge(e,r),n===1&&se===0&&!(t.mode&1)&&(Kn=ke()+500,ci&&ln()))}function Ge(e,t){var n=e.callbackNode;sf(e,t);var r=$s(e,e===Pe?ze:0);if(r===0)n!==null&&aa(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&aa(n),t===1)e.tag===0?sh(ec.bind(null,e)):zu(ec.bind(null,e)),eh(function(){!(se&6)&&ln()}),n=null;else{switch(iu(r)){case 1:n=co;break;case 4:n=nu;break;case 16:n=Ls;break;case 536870912:n=ru;break;default:n=Ls}n=Pd(n,kd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function kd(e,t){if(_s=-1,Es=0,se&6)throw Error($(327));var n=e.callbackNode;if(Wn()&&e.callbackNode!==n)return null;var r=$s(e,e===Pe?ze:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Zs(e,r);else{t=r;var s=se;se|=2;var l=Sd();(Pe!==e||ze!==t)&&(wt=null,Kn=ke()+500,hn(e,t));do try{Ch();break}catch(a){wd(e,a)}while(!0);So(),Ks.current=l,se=s,we!==null?t=0:(Pe=null,ze=0,t=Ce)}if(t!==0){if(t===2&&(s=vl(e),s!==0&&(r=s,t=Vl(e,s))),t===1)throw n=Wr,hn(e,0),Ut(e,r),Ge(e,ke()),n;if(t===6)Ut(e,r);else{if(s=e.current.alternate,!(r&30)&&!Sh(s)&&(t=Zs(e,r),t===2&&(l=vl(e),l!==0&&(r=l,t=Vl(e,l))),t===1))throw n=Wr,hn(e,0),Ut(e,r),Ge(e,ke()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error($(345));case 2:cn(e,Ue,wt);break;case 3:if(Ut(e,r),(r&130023424)===r&&(t=Oo+500-ke(),10<t)){if($s(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ie(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Cl(cn.bind(null,e,Ue,wt),t);break}cn(e,Ue,wt);break;case 4:if(Ut(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-dt(r);l=1<<o,o=t[o],o>s&&(s=o),r&=~l}if(r=s,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wh(r/1960))-r,10<r){e.timeoutHandle=Cl(cn.bind(null,e,Ue,wt),r);break}cn(e,Ue,wt);break;case 5:cn(e,Ue,wt);break;default:throw Error($(329))}}}return Ge(e,ke()),e.callbackNode===n?kd.bind(null,e):null}function Vl(e,t){var n=Cr;return e.current.memoizedState.isDehydrated&&(hn(e,t).flags|=256),e=Zs(e,t),e!==2&&(t=Ue,Ue=n,t!==null&&Gl(t)),e}function Gl(e){Ue===null?Ue=e:Ue.push.apply(Ue,e)}function Sh(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],l=s.getSnapshot;s=s.value;try{if(!ft(l(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ut(e,t){for(t&=~Io,t&=~fi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-dt(t),r=1<<n;e[n]=-1,t&=~r}}function ec(e){if(se&6)throw Error($(327));Wn();var t=$s(e,0);if(!(t&1))return Ge(e,ke()),null;var n=Zs(e,t);if(e.tag!==0&&n===2){var r=vl(e);r!==0&&(t=r,n=Vl(e,r))}if(n===1)throw n=Wr,hn(e,0),Ut(e,t),Ge(e,ke()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cn(e,Ue,wt),Ge(e,ke()),null}function Do(e,t){var n=se;se|=1;try{return e(t)}finally{se=n,se===0&&(Kn=ke()+500,ci&&ln())}}function jn(e){Ht!==null&&Ht.tag===0&&!(se&6)&&Wn();var t=se;se|=1;var n=rt.transition,r=ce;try{if(rt.transition=null,ce=1,e)return e()}finally{ce=r,rt.transition=n,se=t,!(se&6)&&ln()}}function Bo(){Qe=In.current,fe(In)}function hn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Zf(n)),we!==null)for(n=we.return;n!==null;){var r=n;switch(jo(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bs();break;case 3:qn(),fe(He),fe($e),bo();break;case 5:Po(r);break;case 4:qn();break;case 13:fe(me);break;case 19:fe(me);break;case 10:No(r.type._context);break;case 22:case 23:Bo()}n=n.return}if(Pe=e,we=e=Zt(e.current,null),ze=Qe=t,Ce=0,Wr=null,Io=fi=xn=0,Ue=Cr=null,pn!==null){for(t=0;t<pn.length;t++)if(n=pn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=s,r.next=o}n.pending=r}pn=null}return e}function wd(e,t){do{var n=we;try{if(So(),Ss.current=Ys,qs){for(var r=ge.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}qs=!1}if(yn=0,Ee=Ne=ge=null,Sr=!1,Br=0,Mo.current=null,n===null||n.return===null){Ce=1,Wr=t,we=null;break}e:{var l=e,o=n.return,a=n,c=t;if(t=ze,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=a,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var y=Ua(o);if(y!==null){y.flags&=-257,Fa(y,o,a,l,t),y.mode&1&&Ba(l,d,t),t=y,c=d;var j=t.updateQueue;if(j===null){var k=new Set;k.add(c),t.updateQueue=k}else j.add(c);break e}else{if(!(t&1)){Ba(l,d,t),Uo();break e}c=Error($(426))}}else if(he&&a.mode&1){var w=Ua(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Fa(w,o,a,l,t),ko(Yn(c,a));break e}}l=c=Yn(c,a),Ce!==4&&(Ce=2),Cr===null?Cr=[l]:Cr.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var h=id(l,c,t);La(l,h);break e;case 1:a=c;var u=l.type,f=l.stateNode;if(!(l.flags&128)&&(typeof u.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Jt===null||!Jt.has(f)))){l.flags|=65536,t&=-t,l.lanes|=t;var x=ld(l,a,t);La(l,x);break e}}l=l.return}while(l!==null)}Cd(n)}catch(v){t=v,we===n&&n!==null&&(we=n=n.return);continue}break}while(!0)}function Sd(){var e=Ks.current;return Ks.current=Ys,e===null?Ys:e}function Uo(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),Pe===null||!(xn&268435455)&&!(fi&268435455)||Ut(Pe,ze)}function Zs(e,t){var n=se;se|=2;var r=Sd();(Pe!==e||ze!==t)&&(wt=null,hn(e,t));do try{Nh();break}catch(s){wd(e,s)}while(!0);if(So(),se=n,Ks.current=r,we!==null)throw Error($(261));return Pe=null,ze=0,Ce}function Nh(){for(;we!==null;)Nd(we)}function Ch(){for(;we!==null&&!Yp();)Nd(we)}function Nd(e){var t=Ed(e.alternate,e,Qe);e.memoizedProps=e.pendingProps,t===null?Cd(e):we=t,Mo.current=null}function Cd(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=yh(n,t),n!==null){n.flags&=32767,we=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,we=null;return}}else if(n=vh(n,t,Qe),n!==null){we=n;return}if(t=t.sibling,t!==null){we=t;return}we=t=e}while(t!==null);Ce===0&&(Ce=5)}function cn(e,t,n){var r=ce,s=rt.transition;try{rt.transition=null,ce=1,_h(e,t,n,r)}finally{rt.transition=s,ce=r}return null}function _h(e,t,n,r){do Wn();while(Ht!==null);if(se&6)throw Error($(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(lf(e,l),e===Pe&&(we=Pe=null,ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ms||(ms=!0,Pd(Ls,function(){return Wn(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=rt.transition,rt.transition=null;var o=ce;ce=1;var a=se;se|=4,Mo.current=null,jh(e,n),xd(n,e),Gf(Sl),Ms=!!wl,Sl=wl=null,e.current=n,kh(n),Kp(),se=a,ce=o,rt.transition=l}else e.current=n;if(ms&&(ms=!1,Ht=e,Xs=s),l=e.pendingLanes,l===0&&(Jt=null),Zp(n.stateNode),Ge(e,ke()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Js)throw Js=!1,e=Wl,Wl=null,e;return Xs&1&&e.tag!==0&&Wn(),l=e.pendingLanes,l&1?e===Hl?_r++:(_r=0,Hl=e):_r=0,ln(),null}function Wn(){if(Ht!==null){var e=iu(Xs),t=rt.transition,n=ce;try{if(rt.transition=null,ce=16>e?16:e,Ht===null)var r=!1;else{if(e=Ht,Ht=null,Xs=0,se&6)throw Error($(331));var s=se;for(se|=4,W=e.current;W!==null;){var l=W,o=l.child;if(W.flags&16){var a=l.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(W=d;W!==null;){var p=W;switch(p.tag){case 0:case 11:case 15:Nr(8,p,l)}var g=p.child;if(g!==null)g.return=p,W=g;else for(;W!==null;){p=W;var m=p.sibling,y=p.return;if(gd(p),p===d){W=null;break}if(m!==null){m.return=y,W=m;break}W=y}}}var j=l.alternate;if(j!==null){var k=j.child;if(k!==null){j.child=null;do{var w=k.sibling;k.sibling=null,k=w}while(k!==null)}}W=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,W=o;else e:for(;W!==null;){if(l=W,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Nr(9,l,l.return)}var h=l.sibling;if(h!==null){h.return=l.return,W=h;break e}W=l.return}}var u=e.current;for(W=u;W!==null;){o=W;var f=o.child;if(o.subtreeFlags&2064&&f!==null)f.return=o,W=f;else e:for(o=u;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:pi(9,a)}}catch(v){xe(a,a.return,v)}if(a===o){W=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,W=x;break e}W=a.return}}if(se=s,ln(),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(si,e)}catch{}r=!0}return r}finally{ce=n,rt.transition=t}}return!1}function tc(e,t,n){t=Yn(n,t),t=id(e,t,1),e=Kt(e,t,1),t=Ie(),e!==null&&(Yr(e,1,t),Ge(e,t))}function xe(e,t,n){if(e.tag===3)tc(e,e,n);else for(;t!==null;){if(t.tag===3){tc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jt===null||!Jt.has(r))){e=Yn(n,e),e=ld(t,e,1),t=Kt(t,e,1),e=Ie(),t!==null&&(Yr(t,1,e),Ge(t,e));break}}t=t.return}}function Eh(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ie(),e.pingedLanes|=e.suspendedLanes&n,Pe===e&&(ze&n)===n&&(Ce===4||Ce===3&&(ze&130023424)===ze&&500>ke()-Oo?hn(e,0):Io|=n),Ge(e,t)}function _d(e,t){t===0&&(e.mode&1?(t=is,is<<=1,!(is&130023424)&&(is=4194304)):t=1);var n=Ie();e=Rt(e,t),e!==null&&(Yr(e,t,n),Ge(e,n))}function Ph(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_d(e,n)}function bh(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(t),_d(e,n)}var Ed;Ed=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||He.current)We=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return We=!1,gh(e,t,n);We=!!(e.flags&131072)}else We=!1,he&&t.flags&1048576&&Ru(t,Ws,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Cs(e,t),e=t.pendingProps;var s=Vn(t,$e.current);Fn(t,n),s=Ro(null,t,r,e,s,n);var l=Ao();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ve(r)?(l=!0,Us(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_o(t),s.updater=di,t.stateNode=s,s._reactInternals=t,Al(t,r,e,n),t=$l(null,t,r,!0,l,n)):(t.tag=0,he&&l&&xo(t),Me(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Cs(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Rh(r),e=at(r,e),s){case 0:t=Ll(null,t,r,e,n);break e;case 1:t=Va(null,t,r,e,n);break e;case 11:t=Wa(null,t,r,e,n);break e;case 14:t=Ha(null,t,r,at(r.type,e),n);break e}throw Error($(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:at(r,s),Ll(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:at(r,s),Va(e,t,r,s,n);case 3:e:{if(ud(t),e===null)throw Error($(387));r=t.pendingProps,l=t.memoizedState,s=l.element,Iu(e,t),Gs(t,r,null,n);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Yn(Error($(423)),t),t=Ga(e,t,r,n,s);break e}else if(r!==s){s=Yn(Error($(424)),t),t=Ga(e,t,r,n,s);break e}else for(qe=Yt(t.stateNode.containerInfo.firstChild),Ye=t,he=!0,ut=null,n=$u(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gn(),r===s){t=At(e,t,n);break e}Me(e,t,r,n)}t=t.child}return t;case 5:return Ou(t),e===null&&bl(t),r=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,o=s.children,Nl(r,s)?o=null:l!==null&&Nl(r,l)&&(t.flags|=32),cd(e,t),Me(e,t,o,n),t.child;case 6:return e===null&&bl(t),null;case 13:return dd(e,t,n);case 4:return Eo(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Qn(t,null,r,n):Me(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:at(r,s),Wa(e,t,r,s,n);case 7:return Me(e,t,t.pendingProps,n),t.child;case 8:return Me(e,t,t.pendingProps.children,n),t.child;case 12:return Me(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,o=s.value,de(Hs,r._currentValue),r._currentValue=o,l!==null)if(ft(l.value,o)){if(l.children===s.children&&!He.current){t=At(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var a=l.dependencies;if(a!==null){o=l.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=Pt(-1,n&-n),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),zl(l.return,n,t),a.lanes|=n;break}c=c.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zl(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}Me(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Fn(t,n),s=st(s),r=r(s),t.flags|=1,Me(e,t,r,n),t.child;case 14:return r=t.type,s=at(r,t.pendingProps),s=at(r.type,s),Ha(e,t,r,s,n);case 15:return od(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:at(r,s),Cs(e,t),t.tag=1,Ve(r)?(e=!0,Us(t)):e=!1,Fn(t,n),sd(t,r,s),Al(t,r,s,n),$l(null,t,r,!0,e,n);case 19:return pd(e,t,n);case 22:return ad(e,t,n)}throw Error($(156,t.tag))};function Pd(e,t){return tu(e,t)}function zh(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nt(e,t,n,r){return new zh(e,t,n,r)}function Fo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Rh(e){if(typeof e=="function")return Fo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===lo)return 11;if(e===oo)return 14}return 2}function Zt(e,t){var n=e.alternate;return n===null?(n=nt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ps(e,t,n,r,s,l){var o=2;if(r=e,typeof e=="function")Fo(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case En:return mn(n.children,s,l,t);case io:o=8,s|=8;break;case nl:return e=nt(12,n,t,s|2),e.elementType=nl,e.lanes=l,e;case rl:return e=nt(13,n,t,s),e.elementType=rl,e.lanes=l,e;case sl:return e=nt(19,n,t,s),e.elementType=sl,e.lanes=l,e;case Oc:return hi(n,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Mc:o=10;break e;case Ic:o=9;break e;case lo:o=11;break e;case oo:o=14;break e;case Ot:o=16,r=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=nt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=l,t}function mn(e,t,n,r){return e=nt(7,e,r,t),e.lanes=n,e}function hi(e,t,n,r){return e=nt(22,e,r,t),e.elementType=Oc,e.lanes=n,e.stateNode={isHidden:!1},e}function qi(e,t,n){return e=nt(6,e,null,t),e.lanes=n,e}function Yi(e,t,n){return t=nt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ah(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bi(0),this.expirationTimes=bi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bi(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wo(e,t,n,r,s,l,o,a,c){return e=new Ah(e,t,n,a,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=nt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_o(l),e}function Th(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_n,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function bd(e){if(!e)return nn;e=e._reactInternals;e:{if(wn(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ve(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(Ve(n))return bu(e,n,t)}return t}function zd(e,t,n,r,s,l,o,a,c){return e=Wo(n,r,!0,e,s,l,o,a,c),e.context=bd(null),n=e.current,r=Ie(),s=Xt(n),l=Pt(r,s),l.callback=t??null,Kt(n,l,s),e.current.lanes=s,Yr(e,s,r),Ge(e,r),e}function mi(e,t,n,r){var s=t.current,l=Ie(),o=Xt(s);return n=bd(n),t.context===null?t.context=n:t.pendingContext=n,t=Pt(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Kt(s,t,o),e!==null&&(pt(e,s,o,l),ws(e,s,o)),o}function ei(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ho(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function Lh(){return null}var Rd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vo(e){this._internalRoot=e}gi.prototype.render=Vo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));mi(e,t,null,null)};gi.prototype.unmount=Vo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jn(function(){mi(null,e,null,null)}),t[zt]=null}};function gi(e){this._internalRoot=e}gi.prototype.unstable_scheduleHydration=function(e){if(e){var t=au();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bt.length&&t!==0&&t<Bt[n].priority;n++);Bt.splice(n,0,e),n===0&&uu(e)}};function Go(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rc(){}function $h(e,t,n,r,s){if(s){if(typeof r=="function"){var l=r;r=function(){var d=ei(o);l.call(d)}}var o=zd(t,r,e,0,null,!1,!1,"",rc);return e._reactRootContainer=o,e[zt]=o.current,$r(e.nodeType===8?e.parentNode:e),jn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=ei(c);a.call(d)}}var c=Wo(e,0,!1,null,null,!1,!1,"",rc);return e._reactRootContainer=c,e[zt]=c.current,$r(e.nodeType===8?e.parentNode:e),jn(function(){mi(t,c,n,r)}),c}function yi(e,t,n,r,s){var l=n._reactRootContainer;if(l){var o=l;if(typeof s=="function"){var a=s;s=function(){var c=ei(o);a.call(c)}}mi(t,o,e,s)}else o=$h(n,t,e,s,r);return ei(o)}lu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gr(t.pendingLanes);n!==0&&(uo(t,n|1),Ge(t,ke()),!(se&6)&&(Kn=ke()+500,ln()))}break;case 13:jn(function(){var r=Rt(e,1);if(r!==null){var s=Ie();pt(r,e,1,s)}}),Ho(e,1)}};po=function(e){if(e.tag===13){var t=Rt(e,134217728);if(t!==null){var n=Ie();pt(t,e,134217728,n)}Ho(e,134217728)}};ou=function(e){if(e.tag===13){var t=Xt(e),n=Rt(e,t);if(n!==null){var r=Ie();pt(n,e,t,r)}Ho(e,t)}};au=function(){return ce};cu=function(e,t){var n=ce;try{return ce=e,t()}finally{ce=n}};hl=function(e,t,n){switch(t){case"input":if(ol(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ai(r);if(!s)throw Error($(90));Bc(r),ol(r,s)}}}break;case"textarea":Fc(e,n);break;case"select":t=n.value,t!=null&&On(e,!!n.multiple,t,!1)}};Yc=Do;Kc=jn;var Mh={usingClientEntryPoint:!1,Events:[Jr,Rn,ai,Qc,qc,Do]},fr={findFiberByHostInstance:dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ih={bundleType:fr.bundleType,version:fr.version,rendererPackageName:fr.rendererPackageName,rendererConfig:fr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zc(e),e===null?null:e.stateNode},findFiberByHostInstance:fr.findFiberByHostInstance||Lh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gs.isDisabled&&gs.supportsFiber)try{si=gs.inject(Ih),xt=gs}catch{}}Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mh;Je.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Go(t))throw Error($(200));return Th(e,t,null,n)};Je.createRoot=function(e,t){if(!Go(e))throw Error($(299));var n=!1,r="",s=Rd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Wo(e,1,!1,null,null,n,!1,r,s),e[zt]=t.current,$r(e.nodeType===8?e.parentNode:e),new Vo(t)};Je.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=Zc(t),e=e===null?null:e.stateNode,e};Je.flushSync=function(e){return jn(e)};Je.hydrate=function(e,t,n){if(!vi(t))throw Error($(200));return yi(null,e,t,!0,n)};Je.hydrateRoot=function(e,t,n){if(!Go(e))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,l="",o=Rd;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=zd(t,null,e,1,n??null,s,!1,l,o),e[zt]=t.current,$r(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new gi(t)};Je.render=function(e,t,n){if(!vi(t))throw Error($(200));return yi(null,e,t,!1,n)};Je.unmountComponentAtNode=function(e){if(!vi(e))throw Error($(40));return e._reactRootContainer?(jn(function(){yi(null,null,e,!1,function(){e._reactRootContainer=null,e[zt]=null})}),!0):!1};Je.unstable_batchedUpdates=Do;Je.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!vi(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return yi(e,t,n,!1,r)};Je.version="18.3.1-next-f1338f8080-20240426";function Ad(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ad)}catch(e){console.error(e)}}Ad(),Ac.exports=Je;var Oh=Ac.exports,sc=Oh;el.createRoot=sc.createRoot,el.hydrateRoot=sc.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hr(){return Hr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hr.apply(this,arguments)}var Vt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Vt||(Vt={}));const ic="popstate";function Dh(e){e===void 0&&(e={});function t(r,s){let{pathname:l,search:o,hash:a}=r.location;return Ql("",{pathname:l,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ti(s)}return Uh(t,n,null,e)}function ve(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Td(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Bh(){return Math.random().toString(36).substr(2,8)}function lc(e,t){return{usr:e.state,key:e.key,idx:t}}function Ql(e,t,n,r){return n===void 0&&(n=null),Hr({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?rr(t):t,{state:n,key:t&&t.key||r||Bh()})}function ti(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function rr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Uh(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,o=s.history,a=Vt.Pop,c=null,d=p();d==null&&(d=0,o.replaceState(Hr({},o.state,{idx:d}),""));function p(){return(o.state||{idx:null}).idx}function g(){a=Vt.Pop;let w=p(),h=w==null?null:w-d;d=w,c&&c({action:a,location:k.location,delta:h})}function m(w,h){a=Vt.Push;let u=Ql(k.location,w,h);d=p()+1;let f=lc(u,d),x=k.createHref(u);try{o.pushState(f,"",x)}catch(v){if(v instanceof DOMException&&v.name==="DataCloneError")throw v;s.location.assign(x)}l&&c&&c({action:a,location:k.location,delta:1})}function y(w,h){a=Vt.Replace;let u=Ql(k.location,w,h);d=p();let f=lc(u,d),x=k.createHref(u);o.replaceState(f,"",x),l&&c&&c({action:a,location:k.location,delta:0})}function j(w){let h=s.location.origin!=="null"?s.location.origin:s.location.href,u=typeof w=="string"?w:ti(w);return u=u.replace(/ $/,"%20"),ve(h,"No window.location.(origin|href) available to create URL for href: "+u),new URL(u,h)}let k={get action(){return a},get location(){return e(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(ic,g),c=w,()=>{s.removeEventListener(ic,g),c=null}},createHref(w){return t(s,w)},createURL:j,encodeLocation(w){let h=j(w);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:m,replace:y,go(w){return o.go(w)}};return k}var oc;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(oc||(oc={}));function Fh(e,t,n){return n===void 0&&(n="/"),Wh(e,t,n)}function Wh(e,t,n,r){let s=typeof t=="string"?rr(t):t,l=Jn(s.pathname||"/",n);if(l==null)return null;let o=Ld(e);Hh(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let d=tm(l);a=Zh(o[c],d)}return a}function Ld(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(l,o,a)=>{let c={relativePath:a===void 0?l.path||"":a,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};c.relativePath.startsWith("/")&&(ve(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=en([r,c.relativePath]),p=n.concat(c);l.children&&l.children.length>0&&(ve(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Ld(l.children,t,p,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:Jh(d,l.index),routesMeta:p})};return e.forEach((l,o)=>{var a;if(l.path===""||!((a=l.path)!=null&&a.includes("?")))s(l,o);else for(let c of $d(l.path))s(l,o,c)}),t}function $d(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let o=$d(r.join("/")),a=[];return a.push(...o.map(c=>c===""?l:[l,c].join("/"))),s&&a.push(...o),a.map(c=>e.startsWith("/")&&c===""?"/":c)}function Hh(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Xh(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Vh=/^:[\w-]+$/,Gh=3,Qh=2,qh=1,Yh=10,Kh=-2,ac=e=>e==="*";function Jh(e,t){let n=e.split("/"),r=n.length;return n.some(ac)&&(r+=Kh),t&&(r+=Qh),n.filter(s=>!ac(s)).reduce((s,l)=>s+(Vh.test(l)?Gh:l===""?qh:Yh),r)}function Xh(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Zh(e,t,n){let{routesMeta:r}=e,s={},l="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],d=a===r.length-1,p=l==="/"?t:t.slice(l.length)||"/",g=ql({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),m=c.route;if(!g)return null;Object.assign(s,g.params),o.push({params:s,pathname:en([l,g.pathname]),pathnameBase:im(en([l,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(l=en([l,g.pathnameBase]))}return o}function ql(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=em(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let l=s[0],o=l.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((d,p,g)=>{let{paramName:m,isOptional:y}=p;if(m==="*"){let k=a[g]||"";o=l.slice(0,l.length-k.length).replace(/(.)\/+$/,"$1")}const j=a[g];return y&&!j?d[m]=void 0:d[m]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:o,pattern:e}}function em(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Td(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function tm(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Td(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Jn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function nm(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?rr(e):e;return{pathname:n?n.startsWith("/")?n:rm(n,t):t,search:lm(r),hash:om(s)}}function rm(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ki(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sm(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Qo(e,t){let n=sm(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function qo(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=rr(e):(s=Hr({},e),ve(!s.pathname||!s.pathname.includes("?"),Ki("?","pathname","search",s)),ve(!s.pathname||!s.pathname.includes("#"),Ki("#","pathname","hash",s)),ve(!s.search||!s.search.includes("#"),Ki("#","search","hash",s)));let l=e===""||s.pathname==="",o=l?"/":s.pathname,a;if(o==null)a=n;else{let g=t.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;s.pathname=m.join("/")}a=g>=0?t[g]:"/"}let c=nm(s,a),d=o&&o!=="/"&&o.endsWith("/"),p=(l||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const en=e=>e.join("/").replace(/\/\/+/g,"/"),im=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lm=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,om=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function am(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Md=["post","put","patch","delete"];new Set(Md);const cm=["get",...Md];new Set(cm);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vr(){return Vr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vr.apply(this,arguments)}const xi=z.createContext(null),Id=z.createContext(null),Lt=z.createContext(null),ji=z.createContext(null),on=z.createContext({outlet:null,matches:[],isDataRoute:!1}),Od=z.createContext(null);function um(e,t){let{relative:n}=t===void 0?{}:t;sr()||ve(!1);let{basename:r,navigator:s}=z.useContext(Lt),{hash:l,pathname:o,search:a}=ki(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:en([r,o])),s.createHref({pathname:c,search:a,hash:l})}function sr(){return z.useContext(ji)!=null}function ir(){return sr()||ve(!1),z.useContext(ji).location}function Dd(e){z.useContext(Lt).static||z.useLayoutEffect(e)}function Bd(){let{isDataRoute:e}=z.useContext(on);return e?Sm():dm()}function dm(){sr()||ve(!1);let e=z.useContext(xi),{basename:t,future:n,navigator:r}=z.useContext(Lt),{matches:s}=z.useContext(on),{pathname:l}=ir(),o=JSON.stringify(Qo(s,n.v7_relativeSplatPath)),a=z.useRef(!1);return Dd(()=>{a.current=!0}),z.useCallback(function(d,p){if(p===void 0&&(p={}),!a.current)return;if(typeof d=="number"){r.go(d);return}let g=qo(d,JSON.parse(o),l,p.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:en([t,g.pathname])),(p.replace?r.replace:r.push)(g,p.state,p)},[t,r,o,l,e])}function ki(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=z.useContext(Lt),{matches:s}=z.useContext(on),{pathname:l}=ir(),o=JSON.stringify(Qo(s,r.v7_relativeSplatPath));return z.useMemo(()=>qo(e,JSON.parse(o),l,n==="path"),[e,o,l,n])}function pm(e,t){return fm(e,t)}function fm(e,t,n,r){sr()||ve(!1);let{navigator:s}=z.useContext(Lt),{matches:l}=z.useContext(on),o=l[l.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=ir(),p;if(t){var g;let w=typeof t=="string"?rr(t):t;c==="/"||(g=w.pathname)!=null&&g.startsWith(c)||ve(!1),p=w}else p=d;let m=p.pathname||"/",y=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let j=Fh(e,{pathname:y}),k=ym(j&&j.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:en([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:en([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),l,n,r);return t&&k?z.createElement(ji.Provider,{value:{location:Vr({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Vt.Pop}},k):k}function hm(){let e=wm(),t=am(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},t),n?z.createElement("pre",{style:s},n):null,null)}const mm=z.createElement(hm,null);class gm extends z.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?z.createElement(on.Provider,{value:this.props.routeContext},z.createElement(Od.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vm(e){let{routeContext:t,match:n,children:r}=e,s=z.useContext(xi);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),z.createElement(on.Provider,{value:t},r)}function ym(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let p=o.findIndex(g=>g.route.id&&(a==null?void 0:a[g.route.id])!==void 0);p>=0||ve(!1),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:m,errors:y}=n,j=g.route.loader&&m[g.route.id]===void 0&&(!y||y[g.route.id]===void 0);if(g.route.lazy||j){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,g,m)=>{let y,j=!1,k=null,w=null;n&&(y=a&&g.route.id?a[g.route.id]:void 0,k=g.route.errorElement||mm,c&&(d<0&&m===0?(Nm("route-fallback"),j=!0,w=null):d===m&&(j=!0,w=g.route.hydrateFallbackElement||null)));let h=t.concat(o.slice(0,m+1)),u=()=>{let f;return y?f=k:j?f=w:g.route.Component?f=z.createElement(g.route.Component,null):g.route.element?f=g.route.element:f=p,z.createElement(vm,{match:g,routeContext:{outlet:p,matches:h,isDataRoute:n!=null},children:f})};return n&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?z.createElement(gm,{location:n.location,revalidation:n.revalidation,component:k,error:y,children:u(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):u()},null)}var Ud=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ud||{}),Fd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Fd||{});function xm(e){let t=z.useContext(xi);return t||ve(!1),t}function jm(e){let t=z.useContext(Id);return t||ve(!1),t}function km(e){let t=z.useContext(on);return t||ve(!1),t}function Wd(e){let t=km(),n=t.matches[t.matches.length-1];return n.route.id||ve(!1),n.route.id}function wm(){var e;let t=z.useContext(Od),n=jm(),r=Wd();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Sm(){let{router:e}=xm(Ud.UseNavigateStable),t=Wd(Fd.UseNavigateStable),n=z.useRef(!1);return Dd(()=>{n.current=!0}),z.useCallback(function(s,l){l===void 0&&(l={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Vr({fromRouteId:t},l)))},[e,t])}const cc={};function Nm(e,t,n){cc[e]||(cc[e]=!0)}function Cm(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function _m(e){let{to:t,replace:n,state:r,relative:s}=e;sr()||ve(!1);let{future:l,static:o}=z.useContext(Lt),{matches:a}=z.useContext(on),{pathname:c}=ir(),d=Bd(),p=qo(t,Qo(a,l.v7_relativeSplatPath),c,s==="path"),g=JSON.stringify(p);return z.useEffect(()=>d(JSON.parse(g),{replace:n,state:r,relative:s}),[d,g,s,n,r]),null}function Cn(e){ve(!1)}function Em(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Vt.Pop,navigator:l,static:o=!1,future:a}=e;sr()&&ve(!1);let c=t.replace(/^\/*/,"/"),d=z.useMemo(()=>({basename:c,navigator:l,static:o,future:Vr({v7_relativeSplatPath:!1},a)}),[c,a,l,o]);typeof r=="string"&&(r=rr(r));let{pathname:p="/",search:g="",hash:m="",state:y=null,key:j="default"}=r,k=z.useMemo(()=>{let w=Jn(p,c);return w==null?null:{location:{pathname:w,search:g,hash:m,state:y,key:j},navigationType:s}},[c,p,g,m,y,j,s]);return k==null?null:z.createElement(Lt.Provider,{value:d},z.createElement(ji.Provider,{children:n,value:k}))}function Pm(e){let{children:t,location:n}=e;return pm(Yl(t),n)}new Promise(()=>{});function Yl(e,t){t===void 0&&(t=[]);let n=[];return z.Children.forEach(e,(r,s)=>{if(!z.isValidElement(r))return;let l=[...t,s];if(r.type===z.Fragment){n.push.apply(n,Yl(r.props.children,l));return}r.type!==Cn&&ve(!1),!r.props.index||!r.props.children||ve(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Yl(r.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ni(){return ni=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ni.apply(this,arguments)}function Hd(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,l;for(l=0;l<r.length;l++)s=r[l],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function bm(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function zm(e,t){return e.button===0&&(!t||t==="_self")&&!bm(e)}const Rm=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Am=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Tm="6";try{window.__reactRouterVersion=Tm}catch{}const Lm=z.createContext({isTransitioning:!1}),$m="startTransition",uc=_p[$m];function Mm(e){let{basename:t,children:n,future:r,window:s}=e,l=z.useRef();l.current==null&&(l.current=Dh({window:s,v5Compat:!0}));let o=l.current,[a,c]=z.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},p=z.useCallback(g=>{d&&uc?uc(()=>c(g)):c(g)},[c,d]);return z.useLayoutEffect(()=>o.listen(p),[o,p]),z.useEffect(()=>Cm(r),[r]),z.createElement(Em,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Im=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Om=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bs=z.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:l,replace:o,state:a,target:c,to:d,preventScrollReset:p,viewTransition:g}=t,m=Hd(t,Rm),{basename:y}=z.useContext(Lt),j,k=!1;if(typeof d=="string"&&Om.test(d)&&(j=d,Im))try{let f=new URL(window.location.href),x=d.startsWith("//")?new URL(f.protocol+d):new URL(d),v=Jn(x.pathname,y);x.origin===f.origin&&v!=null?d=v+x.search+x.hash:k=!0}catch{}let w=um(d,{relative:s}),h=Um(d,{replace:o,state:a,target:c,preventScrollReset:p,relative:s,viewTransition:g});function u(f){r&&r(f),f.defaultPrevented||h(f)}return z.createElement("a",ni({},m,{href:j||w,onClick:k||l?r:u,ref:n,target:c}))}),Dm=z.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:l="",end:o=!1,style:a,to:c,viewTransition:d,children:p}=t,g=Hd(t,Am),m=ki(c,{relative:g.relative}),y=ir(),j=z.useContext(Id),{navigator:k,basename:w}=z.useContext(Lt),h=j!=null&&Fm(m)&&d===!0,u=k.encodeLocation?k.encodeLocation(m).pathname:m.pathname,f=y.pathname,x=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;s||(f=f.toLowerCase(),x=x?x.toLowerCase():null,u=u.toLowerCase()),x&&w&&(x=Jn(x,w)||x);const v=u!=="/"&&u.endsWith("/")?u.length-1:u.length;let E=f===u||!o&&f.startsWith(u)&&f.charAt(v)==="/",C=x!=null&&(x===u||!o&&x.startsWith(u)&&x.charAt(u.length)==="/"),_={isActive:E,isPending:C,isTransitioning:h},N=E?r:void 0,P;typeof l=="function"?P=l(_):P=[l,E?"active":null,C?"pending":null,h?"transitioning":null].filter(Boolean).join(" ");let T=typeof a=="function"?a(_):a;return z.createElement(bs,ni({},g,{"aria-current":N,className:P,ref:n,style:T,to:c,viewTransition:d}),typeof p=="function"?p(_):p)});var Kl;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Kl||(Kl={}));var dc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(dc||(dc={}));function Bm(e){let t=z.useContext(xi);return t||ve(!1),t}function Um(e,t){let{target:n,replace:r,state:s,preventScrollReset:l,relative:o,viewTransition:a}=t===void 0?{}:t,c=Bd(),d=ir(),p=ki(e,{relative:o});return z.useCallback(g=>{if(zm(g,n)){g.preventDefault();let m=r!==void 0?r:ti(d)===ti(p);c(e,{replace:m,state:s,preventScrollReset:l,relative:o,viewTransition:a})}},[d,c,p,r,s,n,e,l,o,a])}function Fm(e,t){t===void 0&&(t={});let n=z.useContext(Lm);n==null&&ve(!1);let{basename:r}=Bm(Kl.useViewTransitionState),s=ki(e,{relative:t.relative});if(!n.isTransitioning)return!1;let l=Jn(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Jn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ql(s.pathname,o)!=null||ql(s.pathname,l)!=null}const Wm={},pc=e=>{let t;const n=new Set,r=(p,g)=>{const m=typeof p=="function"?p(t):p;if(!Object.is(m,t)){const y=t;t=g??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(j=>j(t,y))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>d,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(Wm?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,s,c);return c},Hm=e=>e?pc(e):pc;var Vd={exports:{}},Gd={},Qd={exports:{}},qd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xn=z;function Vm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gm=typeof Object.is=="function"?Object.is:Vm,Qm=Xn.useState,qm=Xn.useEffect,Ym=Xn.useLayoutEffect,Km=Xn.useDebugValue;function Jm(e,t){var n=t(),r=Qm({inst:{value:n,getSnapshot:t}}),s=r[0].inst,l=r[1];return Ym(function(){s.value=n,s.getSnapshot=t,Ji(s)&&l({inst:s})},[e,n,t]),qm(function(){return Ji(s)&&l({inst:s}),e(function(){Ji(s)&&l({inst:s})})},[e]),Km(n),n}function Ji(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gm(e,n)}catch{return!0}}function Xm(e,t){return t()}var Zm=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Xm:Jm;qd.useSyncExternalStore=Xn.useSyncExternalStore!==void 0?Xn.useSyncExternalStore:Zm;Qd.exports=qd;var eg=Qd.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wi=z,tg=eg;function ng(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rg=typeof Object.is=="function"?Object.is:ng,sg=tg.useSyncExternalStore,ig=wi.useRef,lg=wi.useEffect,og=wi.useMemo,ag=wi.useDebugValue;Gd.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var l=ig(null);if(l.current===null){var o={hasValue:!1,value:null};l.current=o}else o=l.current;l=og(function(){function c(y){if(!d){if(d=!0,p=y,y=r(y),s!==void 0&&o.hasValue){var j=o.value;if(s(j,y))return g=j}return g=y}if(j=g,rg(p,y))return j;var k=r(y);return s!==void 0&&s(j,k)?(p=y,j):(p=y,g=k)}var d=!1,p,g,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,r,s]);var a=sg(e,l[0],l[1]);return lg(function(){o.hasValue=!0,o.value=a},[a]),ag(a),a};Vd.exports=Gd;var cg=Vd.exports;const ug=jc(cg),Yd={},{useDebugValue:dg}=to,{useSyncExternalStoreWithSelector:pg}=ug;let fc=!1;const fg=e=>e;function hg(e,t=fg,n){(Yd?"production":void 0)!=="production"&&n&&!fc&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),fc=!0);const r=pg(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return dg(r),r}const mg=e=>{(Yd?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Hm(e):e,n=(r,s)=>hg(t,r,s);return Object.assign(n,t),n},Kd=e=>mg,gg={};function vg(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var l;const o=c=>c===null?null:JSON.parse(c,void 0),a=(l=n.getItem(s))!=null?l:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,l)=>n.setItem(s,JSON.stringify(l,void 0)),removeItem:s=>n.removeItem(s)}}const Gr=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Gr(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Gr(r)(n)}}}},yg=(e,t)=>(n,r,s)=>{let l={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,h)=>({...h,...w}),...t},o=!1;const a=new Set,c=new Set;let d;try{d=l.getStorage()}catch{}if(!d)return e((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...w)},r,s);const p=Gr(l.serialize),g=()=>{const w=l.partialize({...r()});let h;const u=p({state:w,version:l.version}).then(f=>d.setItem(l.name,f)).catch(f=>{h=f});if(h)throw h;return u},m=s.setState;s.setState=(w,h)=>{m(w,h),g()};const y=e((...w)=>{n(...w),g()},r,s);let j;const k=()=>{var w;if(!d)return;o=!1,a.forEach(u=>u(r()));const h=((w=l.onRehydrateStorage)==null?void 0:w.call(l,r()))||void 0;return Gr(d.getItem.bind(d))(l.name).then(u=>{if(u)return l.deserialize(u)}).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==l.version){if(l.migrate)return l.migrate(u.state,u.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return u.state}).then(u=>{var f;return j=l.merge(u,(f=r())!=null?f:y),n(j,!0),g()}).then(()=>{h==null||h(j,void 0),o=!0,c.forEach(u=>u(j))}).catch(u=>{h==null||h(void 0,u)})};return s.persist={setOptions:w=>{l={...l,...w},w.getStorage&&(d=w.getStorage())},clearStorage:()=>{d==null||d.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>k(),hasHydrated:()=>o,onHydrate:w=>(a.add(w),()=>{a.delete(w)}),onFinishHydration:w=>(c.add(w),()=>{c.delete(w)})},k(),j||y},xg=(e,t)=>(n,r,s)=>{let l={storage:vg(()=>localStorage),partialize:k=>k,version:0,merge:(k,w)=>({...w,...k}),...t},o=!1;const a=new Set,c=new Set;let d=l.storage;if(!d)return e((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...k)},r,s);const p=()=>{const k=l.partialize({...r()});return d.setItem(l.name,{state:k,version:l.version})},g=s.setState;s.setState=(k,w)=>{g(k,w),p()};const m=e((...k)=>{n(...k),p()},r,s);s.getInitialState=()=>m;let y;const j=()=>{var k,w;if(!d)return;o=!1,a.forEach(u=>{var f;return u((f=r())!=null?f:m)});const h=((w=l.onRehydrateStorage)==null?void 0:w.call(l,(k=r())!=null?k:m))||void 0;return Gr(d.getItem.bind(d))(l.name).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==l.version){if(l.migrate)return[!0,l.migrate(u.state,u.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,u.state];return[!1,void 0]}).then(u=>{var f;const[x,v]=u;if(y=l.merge(v,(f=r())!=null?f:m),n(y,!0),x)return p()}).then(()=>{h==null||h(y,void 0),y=r(),o=!0,c.forEach(u=>u(y))}).catch(u=>{h==null||h(void 0,u)})};return s.persist={setOptions:k=>{l={...l,...k},k.storage&&(d=k.storage)},clearStorage:()=>{d==null||d.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>j(),hasHydrated:()=>o,onHydrate:k=>(a.add(k),()=>{a.delete(k)}),onFinishHydration:k=>(c.add(k),()=>{c.delete(k)})},l.skipHydration||j(),y||m},jg=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((gg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),yg(e,t)):xg(e,t),Jd=jg;class kg{constructor(){Si(this,"enabled",!1);Si(this,"storageKey","sidonia-analytics-buffer")}setEnabled(t){this.enabled=t,!(typeof window>"u")&&(t||this.clear())}track(t,n){if(typeof window>"u"||!this.enabled)return;const r={event:t,timestamp:new Date().toISOString(),data:n};try{const s=this.load();s.push(r),localStorage.setItem(this.storageKey,JSON.stringify(s)),console.info("[analytics]",r)}catch(s){console.warn("Analytics storage failed",s)}}getAll(){return typeof window>"u"?[]:this.load()}clear(){typeof window>"u"||localStorage.removeItem(this.storageKey)}load(){try{const t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):[]}catch(t){return console.warn("Failed to read analytics buffer",t),[]}}}const re=new kg,wg="CodexRules!!!!!",yt=Kd()(Jd((e,t)=>({gmUnlocked:!1,gmUnlockedAt:null,analyticsConsent:"unknown",analyticsNotified:!1,authenticateGm:n=>n.trim().toUpperCase()===wg?(e({gmUnlocked:!0,gmUnlockedAt:new Date().toISOString()}),re.track("gm.unlocked",{}),!0):(re.track("gm.failed_auth",{attempt:n.trim().length}),!1),lockGm:()=>e({gmUnlocked:!1,gmUnlockedAt:null}),setAnalyticsConsent:n=>{e({analyticsConsent:n?"accepted":"declined"}),re.setEnabled(n),re.track("analytics.consent",{granted:n})},markAnalyticsNotified:()=>e({analyticsNotified:!0})}),{name:"sidonia-session-state",version:1,migrate:e=>({gmUnlocked:!1,gmUnlockedAt:null,analyticsConsent:(e==null?void 0:e.analyticsConsent)??"unknown",analyticsNotified:!1})}));function Sg(){const e=yt(s=>s.analyticsConsent),t=yt(s=>s.analyticsNotified),n=yt(s=>s.setAnalyticsConsent),r=yt(s=>s.markAnalyticsNotified);return e!=="unknown"||t?null:i.jsxs("aside",{className:"analytics-banner",role:"dialog","aria-live":"polite",children:[i.jsxs("div",{children:[i.jsx("h3",{children:"Help Improve Sidonia"}),i.jsx("p",{children:"We collect anonymous usage patterns (no personal data) to refine the priority flow and uncover confusing choices. You can opt out and still use the builderno pressure."})]}),i.jsxs("div",{className:"analytics-banner__actions",children:[i.jsx("button",{type:"button",onClick:()=>n(!0),children:"Share Anonymous Data"}),i.jsx("button",{type:"button",className:"secondary",onClick:()=>n(!1),children:"No Thanks"}),i.jsx("button",{type:"button",className:"dismiss",onClick:r,children:"Remind Me Later"})]})]})}async function St(e){const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch ${e}: ${t.status} ${t.statusText}`);const n=await t.text();try{return JSON.parse(n)}catch(r){throw new Error(`Failed to parse JSON from ${e}: ${r.message}`)}}async function Ng(e){const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch ${e}: ${t.status} ${t.statusText}`);return await t.text()}const Cg={automata:"/data/Sidonia-Powers-Schema-Automata.Json",chimera:"/data/Sidonia-Powers-Schema-Chimera.Json",espers:"/data/Sidonia-Powers-Schema-Espers.json",neosapiens:"/data/Sidonia-Powers-Schema-NeoSapiens.Json",sorcery:"/data/Sidonia-Powers-Schema-Sorcery.Json"},_g={automata:"/data/powers-automata.json",chimera:"/data/powers-chimera.json",esper:"/data/powers-esper.json",neosapien:"/data/powers-neosapien.json",sorcery:"/data/powers-sorcery.json"},Eg=[{id:"lineage-architecture",title:"Lineage Architecture",path:"/content/lineage-architecture.md"},{id:"design-philosophy",title:"Sidonia Design Philosophy",path:"/content/sidonia-design-philosophy.md"},{id:"resources-system",title:"Resources System Overview",path:"/content/sidonia-resources-system.md"}];async function Pg(){const[e,t,n,r,s,l,o,a,c,d]=await Promise.all([St("/data/backgrounds.json"),St("/data/Sidonia-Skills.Json"),St("/data/resources-system.json"),St("/data/resource-costs.json"),St("/data/legal.json"),bg(),zg(),St("/data/attributes.json"),St("/data/character-sheet-structure.json"),Lg()]),p=Ag(a),g=Tg(c);return{backgrounds:e,skills:t,resources:n,resourceCosts:r,legal:s,powerSchemas:l,powerSets:o,attributes:p,characterSheet:g,designDocs:d}}async function bg(){const e=await Promise.all(Object.entries(Cg).map(async([t,n])=>{const r=await St(n);return[t,r]}));return Object.fromEntries(e)}async function zg(){const e=Object.entries(_g).map(async([r,s])=>{const l=r,o=await St(s);return[l,Rg(l,o)]}),t=await Promise.allSettled(e),n=[];return t.forEach(r=>{r.status==="fulfilled"?n.push(r.value):console.warn("[sidonia] Failed to load lineage power data:",r.reason)}),Object.fromEntries(n)}function Rg(e,t){const n={...t};return"lineage"in n||(n.lineage=e),n.lineageId=e,n}function Ag(e){return e&&typeof e=="object"&&"attributes"in e?e.attributes:e}function Tg(e){return e&&typeof e=="object"&&"characterSheet"in e?e.characterSheet:e}async function Lg(){return await Promise.all(Eg.map(async t=>{const n=await Ng(t.path);return{...t,content:n}}))}const Xd=z.createContext(void 0);function $g({children:e}){const[t,n]=z.useState(null),[r,s]=z.useState("idle"),[l,o]=z.useState(null),a=z.useCallback(async()=>{s("loading"),o(null);try{const d=await Pg();n(d),s("ready")}catch(d){s("error"),o(d instanceof Error?d.message:"Unknown data loading error")}},[]);z.useEffect(()=>{a()},[a]);const c=z.useMemo(()=>({data:t,status:r,error:l,refresh:a}),[t,r,l,a]);return i.jsx(Xd.Provider,{value:c,children:e})}function Zr(){const e=z.useContext(Xd);if(!e)throw new Error("useCharacterData must be used within a DataProvider");return e}function Mg(){var n,r;const{data:e}=Zr(),t=(n=e==null?void 0:e.legal)==null?void 0:n.copyright;return!t||((r=t.display)==null?void 0:r.footer)===!1?null:i.jsxs("footer",{className:"legal-footer","aria-label":"Legal notice",role:"contentinfo",children:[i.jsx("span",{className:"legal-footer__text",children:t.text}),t.licenseUrl?i.jsx("a",{href:t.licenseUrl,target:"_blank",rel:"noreferrer",className:"legal-footer__link",children:t.license}):i.jsx("span",{className:"legal-footer__link",children:t.license})]})}function Ig(){const[e,t]=z.useState(!1);z.useEffect(()=>{const r=()=>{window.scrollY>300?t(!0):t(!1)};return window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}},[]);const n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return i.jsx("button",{className:`back-to-top ${e?"back-to-top--visible":""}`,onClick:n,"aria-label":"Back to top",type:"button",children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:i.jsx("path",{d:"M10 4L10 16M10 4L4 10M10 4L16 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}const Og=[{to:"/",label:"Experience"},{to:"/builder",label:"Character Builder"},{to:"/management",label:"Character Management"},{to:"/gm",label:"GM Veil"}];function Dg({children:e}){return i.jsxs("div",{className:"app-shell",children:[i.jsx("header",{className:"app-shell__header",children:i.jsxs("nav",{className:"app-shell__nav",children:[i.jsx("span",{className:"brand",children:"Sidonia: The Long Night"}),i.jsx("div",{className:"nav-links",children:Og.map(t=>i.jsx(Dm,{to:t.to,className:({isActive:n})=>n?"nav-link active":"nav-link",end:!0,children:t.label},t.to))}),i.jsx("span",{className:"nav-meta",children:"Every choice demands a sacrifice"})]})}),i.jsx("main",{className:"app-shell__main",children:e}),i.jsx(Mg,{}),i.jsx(Sg,{}),i.jsx(Ig,{})]})}function Zd(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Zd(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ae(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Zd(e))&&(r&&(r+=" "),r+=t);return r}const Fe=({variant:e="primary",size:t="md",lineage:n,corrupted:r=!1,className:s,children:l,...o})=>{const a=ae("relative font-display tracking-wider uppercase","transition-all duration-300","border-2","hover:shadow-lg active:scale-95","disabled:opacity-50 disabled:cursor-not-allowed","before:absolute before:inset-0","before:bg-gradient-to-r before:from-transparent before:to-transparent","before:opacity-0 hover:before:opacity-10 before:pointer-events-none"),c={primary:ae("bg-sidonia-black text-sidonia-gold",n?`border-lineage-${n}`:"border-sidonia-gold",n?`hover:bg-lineage-${n}/10`:"hover:bg-sidonia-gold/10",n?`hover:shadow-lineage-${n}/20`:"hover:shadow-sidonia-gold/20"),secondary:ae("bg-sidonia-dark border-sidonia-brass text-sidonia-brass","hover:bg-sidonia-brass/10"),danger:ae("bg-sidonia-black border-corruption-red text-corruption-red","hover:bg-corruption-red/10"),ghost:ae("bg-transparent border-transparent text-sidonia-text","hover:border-sidonia-gold/50")},d={sm:"px-deco-sm py-1 text-sm",md:"px-deco-md py-2 text-base",lg:"px-deco-lg py-3 text-lg"},p=r?"animate-corruption-glow":"";return i.jsx("button",{className:ae(a,c[e],d[t],p,s),...o,children:l})},Ft=({children:e,className:t,title:n,lineage:r,corrupted:s=!1})=>{const l=r?`border-lineage-${r}/60`:"border-sidonia-gold/60",o=r?`hover:border-lineage-${r}`:"hover:border-sidonia-gold",a=r?`border-lineage-${r}`:"border-sidonia-gold";return i.jsxs("div",{className:ae("relative bg-sidonia-dark border-2 p-deco-md overflow-hidden","transition-all duration-300",l,o,"before:absolute before:top-0 before:left-0","before:w-deco-md before:h-deco-md","before:border-t-2 before:border-l-2",`before:${a}`,"after:absolute after:bottom-0 after:right-0","after:w-deco-md after:h-deco-md","after:border-b-2 after:border-r-2",`after:${a}`,s&&"corruption-medium",t),children:[n&&i.jsx("h2",{className:ae("font-display text-2xl tracking-[0.2em] uppercase text-center mb-deco-sm relative",r?`text-lineage-${r}`:"text-sidonia-gold",'after:content-[""] after:absolute after:bottom-0 after:left-1/2',"after:transform after:-translate-x-1/2","after:w-16 after:h-px",r?`after:bg-lineage-${r}`:"after:bg-sidonia-gold"),children:n}),e]})};function Bg(){return i.jsx("div",{className:"min-h-screen flex items-center justify-center px-deco-md py-deco-xl",children:i.jsxs("div",{className:"max-w-4xl w-full space-y-deco-lg",children:[i.jsxs("header",{className:"text-center space-y-deco-md mb-deco-xl",children:[i.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-display-lg text-shadow-gold px-4",children:"Character Creation as Descent"}),i.jsx("div",{className:"h-px w-32 mx-auto bg-gradient-to-r from-transparent via-sidonia-gold to-transparent"}),i.jsx("p",{className:"text-body-lg text-sidonia-text max-w-2xl mx-auto leading-relaxed",children:"Step through Sidonia's dark wards with a guide that teaches while it tempts. Assign priorities, face the consequences, and build a persona that balances humanity, power, and the whispers of corruption."})]}),i.jsxs(Ft,{className:"space-y-deco-md",children:[i.jsxs("div",{className:"space-y-deco-sm",children:[i.jsx("p",{className:"text-body text-sidonia-text/90 leading-relaxed",children:"Begin with the priority grid, explore lineage aesthetics, and unlock deeper mechanical truths only when you are ready to commit. Every page layers narrative first and detail second, ensuring newcomers learn through meaningful choice."}),i.jsx("p",{className:"text-body text-sidonia-text/90 leading-relaxed",children:"Continue to the Character Builder to start a new dossier or revisit existing souls you are shepherding through the night."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-deco-sm pt-deco-md border-t border-sidonia-gold/60",children:[i.jsx(bs,{to:"/builder",className:"block",children:i.jsx(Fe,{variant:"primary",size:"lg",className:"w-full",children:"New Character"})}),i.jsx(bs,{to:"/management",className:"block",children:i.jsx(Fe,{variant:"secondary",size:"lg",className:"w-full",children:"Manage Characters"})}),i.jsx(bs,{to:"/gm",className:"block",children:i.jsx(Fe,{variant:"ghost",size:"lg",className:"w-full",children:"GM Portal"})})]})]}),i.jsxs("blockquote",{className:"text-center",children:[i.jsx("p",{className:"font-display text-xl tracking-wider text-sidonia-muted italic",children:'"Every power has a price. Every choice leaves its mark."'}),i.jsx("footer",{className:"mt-2 text-label",children:" The Republic Archives"})]})]})})}const ep=[{key:"neosapien",name:"NeoSapien",tagline:"The Pinnacle of Human Potential",summary:"Humanity unbound by natural limitations. Through masterful bio-artistry and flesh-grafting, the Red Sentinels' Forge Program creates living weapons and paragons of human potential. To receive Forge augments is to transcend the fleshan opportunity for those with the right connections or deep pockets to become more.",priorityImpacts:{A:"Nine augmentation slots; enough to rebuild your body and soul with top-tier Forge miracles.",B:"Seven slots; you are an elite prototype with room to grow.",C:"Six slots; respectable upgrades with compromises lingering beneath the chrome.",D:"Four slots; hand-me-down mods and a favor owed to the Syndicate.",E:"Two slots; scrap work that barely keeps you alive."},narrativeHook:"More than human, huh? That's the sales pitch. The Forge Program sells transcendence, but what they're really building are better soldiers. Priority A or B gets you that top-tier military hardware. Below that? You're getting street-level junk or corporate knock-offs. Every product has a warranty that's shorter than you think.",gmWhisper:"Every augmentation has a corruption drip. Track how many slots are filled to calibrate the player-facing warning meter.",aesthetic:{accent:"#87f5ff",glow:"linear-gradient(135deg, rgba(120, 220, 255, 0.35), rgba(80, 140, 255, 0.2))",texture:"radial-gradient(circle at 50% 10%, rgba(120, 220, 255, 0.2), transparent 60%)"}},{key:"sorcery",name:"Sorcerer",tagline:"The Architect of Reality",summary:"Supreme intellectual discipline. Through grueling study and flawless memorization, Sorcerers petition the Aether to reshape the world. Not a gift, but an achievement earned through tireless dedication. They see the elegant, immutable mathematics of existence, and possess the will to solve its most challenging equations.",priorityImpacts:{A:"Primary + 2 Secondary spheres, five total moves etched into your soul.",B:"Primary + Secondary pairing with four rote moves; the classic cabal initiate.",C:"Choose one Primary or two Secondary spheres, three moves scrawled in desperate ink.",D:"One secondary sphere and two moves; a dabbler who still owes their mentor.",E:"One secondary sphere, one move, hope you can bluff the rest."},narrativeHook:"Architects of Reality... right. They're librarians, kid. The most dangerous kind. They spend their whole lives learning a language that can set the air on fire. One wrong thought, one slip of the tongue, and that 'elegant equation' goes catastrophically sideways. Never trust a person whose main occupational hazard is accidentally turning their breakfast into a pile of spiders.",gmWhisper:"Each move should have a listed cost; use the assigned priority to determine how harsh to set complications.",aesthetic:{accent:"#ffb347",glow:"linear-gradient(160deg, rgba(255, 190, 92, 0.35), rgba(255, 80, 60, 0.25))",texture:"radial-gradient(circle at 70% 30%, rgba(255, 180, 90, 0.18), transparent 60%)"}},{key:"esper",name:"Esper",tagline:"The Natural Talent",summary:"The Esper's connection to the Aether is an innate biological fact. Their abilities emerge from a unique, mutated organ within their brain that resonates with the psycho-reactive field around us. Their power is intuitive, emotional, and deeply personal. They do not calculate; they feel. A natural channel for the world's hidden energies.",priorityImpacts:{A:"Esper Mentalist hybrid  access to both archetype trees from session one.",B:"Esper Prodigy template. Two evolutionary steps unlocked before play.",C:"Mentalist-only channel with powerful focus but brittle sanity.",D:"Gifted Esper who can evolve once with training.",E:"Base Esper template; raw talent that still sputters."},narrativeHook:"A 'living conduit' is a nice way of saying 'a walking fuse box.' Their power is tied to their gut, which means a bad mood can sour the milk and a really bad day can buckle the walls. They're powerful, no doubt, but they're also unpredictable. Trusting an Esper is trusting a lightning storm to miss your house.",gmWhisper:"Corruption spikes when Espers overclock. Use template level to gauge safe usage before fractures appear.",aesthetic:{accent:"#f78bff",glow:"linear-gradient(120deg, rgba(255, 120, 220, 0.35), rgba(110, 90, 255, 0.25))",texture:"radial-gradient(circle at 20% 80%, rgba(255, 120, 220, 0.2), transparent 55%)"}},{key:"chimera",name:"Chimera",tagline:"The Unstable Genome",summary:`The most potent expression of humanity's unstable genome. Possessing non-human traits, they represent life's chaotic and tenacious will to survive. From those who can pass as human with minor mutations (the "Kimmie"), to those whose altered forms are part of their daily identity, to the overtly alien (the "Under-Kin"), the Chimera embodies a vast spectrum of biological diversity.`,priorityImpacts:{A:"Seven mutation points. Become the chimera the wards whisper about.",B:"Five points. The change is obvious, but you can still pass after midnight.",C:"Four points. Enough to gain an edge while keeping a human silhouette.",D:"Three points. Side-effects and stigma follow closely.",E:"Two points. Tattoos of corruption hidden beneath borrowed coats."},narrativeHook:"Here's the only thing you need to know about being a Chimera: this city will judge you by how well you can hide what you are. If you can pass for human, you're a Kimmie, living a lie. If you can't, you're just another freak trying to get by. Their 'resilience' is just a pretty word for being too damn stubborn to die in a world that wishes they'd just go away.",gmWhisper:"Mutation tiers should map to resource availability; track total points for corruption bleed-through.",aesthetic:{accent:"#7cff91",glow:"linear-gradient(200deg, rgba(120, 255, 160, 0.35), rgba(40, 180, 120, 0.25))",texture:"radial-gradient(circle at 15% 20%, rgba(120, 255, 160, 0.18), transparent 60%)"}},{key:"automata",name:"Automata",tagline:"The Ghosts of Yesterday",summary:"Marvels of a bygone Imperial age, their crystalline consciousnesses representing a unique form of sentient life. After centuries of dormancy, they are being reactivated to once again serve Sidonia in an era of rebuilding. Each Automata is a living repository of history, their mindsshaped by a millennium of silent, dream-like evolution or ceaseless laboroffering a perspective wholly alien to our own.",priorityImpacts:{A:"Imperial chassis with Overseer/Soldier branches unlocked and sovereign protocols.",B:"Advanced military shell; twin branches with limited imperial overrides.",C:"Baseline chassis with soldier safeguards still intact.",D:"Advanced worker frame engineered for hazardous labor.",E:"Basic worker frame, easily replaced and easily overlooked."},narrativeHook:"A 'new dawn' of partnership? We're digging up old tools because we're too lazy to make new ones. These things went to sleep a thousand years ago. Nobody knows what a millennium of dreaming does to a mind, machine or otherwise. Are they the same loyal servants that got shelved? Or are they something new? Something broken? Everyone's trying to figure out if they're people or property, and my gut tells me that answer's gonna come the hard way.",gmWhisper:"Track how many branches the player exposes. GM mode should reveal firmware locks hidden from the player view.",aesthetic:{accent:"#5ad1ff",glow:"linear-gradient(150deg, rgba(90, 210, 255, 0.35), rgba(40, 80, 200, 0.25))",texture:"radial-gradient(circle at 80% 20%, rgba(90, 210, 255, 0.2), transparent 60%)"}}];function tp(e){return e?ep.find(t=>t.key===e)??null:null}const un=({label:e,error:t,className:n,id:r,...s})=>{const l=r||(e==null?void 0:e.toLowerCase().replace(/\s+/g,"-"));return i.jsxs("div",{className:"flex flex-col gap-1",children:[e&&i.jsx("label",{htmlFor:l,className:"text-label",children:e}),i.jsx("input",{id:l,className:ae("bg-sidonia-black border-2 text-sidonia-text px-deco-sm py-2 rounded","font-body placeholder:text-sidonia-muted","transition-all duration-300","focus:outline-none focus:ring-1",t?"border-corruption-red focus:border-corruption-red focus:ring-corruption-red/20":"border-sidonia-gold/60 focus:border-sidonia-gold focus:ring-sidonia-gold/20",n),...s}),t&&i.jsx("span",{className:"text-corruption-red text-sm font-body",children:t})]})};function Ug({build:e,onUpdate:t}){if(!e)return null;const{profile:n,updatedAt:r}=e;return i.jsxs(Ft,{children:[i.jsxs("header",{className:"flex justify-between items-baseline mb-deco-md pb-deco-sm border-b border-sidonia-gold/60",children:[i.jsx("h2",{className:"font-display text-2xl tracking-wider uppercase text-sidonia-gold",children:"Character Dossier"}),i.jsxs("span",{className:"text-label text-sidonia-muted",children:["Auto-saved ",new Date(r).toLocaleString()]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_280px] gap-deco-md items-start",children:[i.jsxs("div",{className:"space-y-deco-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-deco-sm",children:[i.jsx(un,{label:"Name",value:n.name,onChange:s=>t({name:s.target.value})}),i.jsx(un,{label:"Alias",value:n.alias,onChange:s=>t({alias:s.target.value})}),i.jsx(un,{label:"Current Profession",value:n.currentProfession,onChange:s=>t({currentProfession:s.target.value})}),i.jsx(un,{label:"Ward of Residence",value:n.wardOfResidence,placeholder:"Which ward do they call home?",onChange:s=>t({wardOfResidence:s.target.value})})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-label",children:"Backstory"}),i.jsx("textarea",{value:n.backstory,placeholder:"High-level summary you can hand to a new player or GM.",onChange:s=>t({backstory:s.target.value}),className:`min-h-[100px] bg-sidonia-black border-2 border-sidonia-gold/60 text-sidonia-text
                       px-deco-sm py-2 font-body placeholder:text-sidonia-muted rounded
                       focus:outline-none focus:ring-1 focus:border-sidonia-gold focus:ring-sidonia-gold/20
                       transition-all duration-300 resize-y`})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-label",children:"Physical Description"}),i.jsx("textarea",{value:n.physicalDescription,placeholder:"How do they carry themselves? Distinguishing features?",onChange:s=>t({physicalDescription:s.target.value}),className:`min-h-[100px] bg-sidonia-black border-2 border-sidonia-gold/60 text-sidonia-text
                       px-deco-sm py-2 font-body placeholder:text-sidonia-muted rounded
                       focus:outline-none focus:ring-1 focus:border-sidonia-gold focus:ring-sidonia-gold/20
                       transition-all duration-300 resize-y`})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-label",children:"Code"}),i.jsx("textarea",{value:n.code,placeholder:"What guiding principle can they not compromise?",onChange:s=>t({code:s.target.value}),className:`min-h-[100px] bg-sidonia-black border-2 border-sidonia-gold/60 text-sidonia-text
                       px-deco-sm py-2 font-body placeholder:text-sidonia-muted rounded
                       focus:outline-none focus:ring-1 focus:border-sidonia-gold focus:ring-sidonia-gold/20
                       transition-all duration-300 resize-y`})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-deco-sm",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-label",children:"Line They Will Not Cross"}),i.jsx("textarea",{value:n.lineNotCrossed,placeholder:"The red line that defines them.",onChange:s=>t({lineNotCrossed:s.target.value}),className:`min-h-[100px] bg-sidonia-black border border-sidonia-gold/50 text-sidonia-text
                         px-deco-sm py-2 font-body placeholder:text-sidonia-muted
                         focus:outline-none focus:ring-1 focus:border-sidonia-gold focus:ring-sidonia-gold/20
                         transition-all duration-300 resize-y`})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-label",children:"Temptation"}),i.jsx("textarea",{value:n.temptation,placeholder:"The lure that could make them fall.",onChange:s=>t({temptation:s.target.value}),className:`min-h-[100px] bg-sidonia-black border border-sidonia-gold/50 text-sidonia-text
                         px-deco-sm py-2 font-body placeholder:text-sidonia-muted
                         focus:outline-none focus:ring-1 focus:border-sidonia-gold focus:ring-sidonia-gold/20
                         transition-all duration-300 resize-y`})]})]})]}),i.jsxs("aside",{className:"flex flex-col gap-deco-sm",children:[i.jsx("div",{className:`relative w-full pt-[120%] rounded-lg border-2 border-dashed border-sidonia-gold/40
                        bg-sidonia-black/45 overflow-hidden`,children:n.portraitUrl?i.jsx("img",{src:n.portraitUrl,alt:`${n.name||"Character"} portrait`,className:"absolute top-0 left-0 w-full h-full object-cover"}):i.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-sidonia-muted text-sm font-body",children:"Portrait Pending"})}),i.jsx(un,{label:"Portrait URL (optional)",value:n.portraitUrl,placeholder:"Link to artwork or leave blank",onChange:s=>t({portraitUrl:s.target.value})})]})]})]})}const Fg=["lineage","background","resources","skills","attributes"],Ct=["priorities","lineage","background","resources","skills","attributes","narrative"],zs=5,Xi=e=>Array.isArray(e)?e.filter(t=>{if(!t||typeof t!="object")return!1;const n=t;return typeof n.id=="string"&&typeof n.lineage=="string"}):[],hc={head:"Head",torso:"Torso",leftArm:"Left Arm",rightArm:"Right Arm",leftLeg:"Left Leg",rightLeg:"Right Leg"},Wg=()=>({lineage:null,resources:null,background:null,skills:null,attributes:null}),Hg=()=>({physique:0,intellect:0,presence:0}),np=()=>({physique:[],intellect:[],presence:[]}),Vg=()=>({head:{current:3,max:3,scar:""},torso:{current:5,max:5,scar:""},leftArm:{current:4,max:4,scar:""},rightArm:{current:4,max:4,scar:""},leftLeg:{current:4,max:4,scar:""},rightLeg:{current:4,max:4,scar:""}}),Gg={A:3,B:2,C:2,D:1,E:0},Qg=e=>e?Gg[e]:0,qg=()=>({name:"",alias:"",currentProfession:"",wardOfResidence:"",backstory:"",physicalDescription:"",code:"",lineNotCrossed:"",temptation:"",portraitUrl:""}),Qr=()=>new Date().toISOString(),Mt=e=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${e}-${Math.random().toString(36).slice(2,9)}`,mc=e=>{const t=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`sidonia-${Math.random().toString(36).slice(2,9)}`,n=Qr();return{id:t,label:e||"Unbound Persona",createdAt:n,updatedAt:n,stage:"priorities",profile:qg(),priorities:Wg(),lineage:{key:null,notes:"",revealMechanics:!1,powers:[]},resources:{contacts:[],retainers:[],properties:[],goods:[],liquid:0,notes:""},background:{title:"",tierNotes:"",contacts:""},skills:{ratings:{},specializations:[],backgroundSpecializations:[],backgroundCustomSpecializations:[],notes:""},attributes:{scores:Hg(),notes:"",specializations:np()},corruption:{current:0,warning:6,notes:""},advancement:{experience:0,track:"",milestones:""},health:Vg(),narrative:{relationships:[],anchors:"",notes:""},gmNotes:""}},Yg=e=>{const t=Kg(e),n=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`sidonia-${Math.random().toString(36).slice(2,9)}`,r=Qr();return{...t,id:n,label:`${e.label} (Copy)`,createdAt:r,updatedAt:r}},Kg=e=>typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e)),Z=(e,t)=>{e(n=>{const r=n.activeBuildId;if(!r)return n;const s=n.builds[r];if(!s)return n;const l=t(s);return l.updatedAt=Qr(),{...n,builds:{...n.builds,[r]:l}}})},Y=Kd()(Jd((e,t)=>({builds:{},activeBuildId:null,createBuild:n=>{const r=mc(n);return e(s=>({builds:{...s.builds,[r.id]:r},activeBuildId:r.id})),r.id},ensureActiveBuild:()=>{const{activeBuildId:n}=t();return n&&t().builds[n]?n:t().createBuild()},setActiveBuild:n=>{t().builds[n]&&e({activeBuildId:n})},archiveBuild:n=>{e(r=>{const{[n]:s,...l}=r.builds;return{builds:l,activeBuildId:r.activeBuildId===n?null:r.activeBuildId}})},renameBuild:(n,r)=>{e(s=>{const l=s.builds[n];return l?{...s,builds:{...s.builds,[n]:{...l,label:r,updatedAt:Qr()}}}:s})},duplicateBuild:n=>{const{builds:r}=t(),s=r[n];if(!s)return null;const l=Yg(s);return e(o=>({builds:{...o.builds,[l.id]:l},activeBuildId:l.id})),re.track("build.duplicated",{}),l.id},resetActiveBuild:()=>{e(n=>{const r=n.activeBuildId;if(!r)return n;const s=n.builds[r];if(!s)return n;const o={...mc(s.label),id:r,createdAt:s.createdAt,updatedAt:Qr()};return re.track("build.reset",{}),{...n,builds:{...n.builds,[r]:o}}})},updateProfile:n=>{Z(e,r=>({...r,profile:{...r.profile,...n}}))},assignPriority:(n,r)=>{Z(e,s=>{const l={...s.priorities};return r&&Object.keys(l).forEach(o=>{o!==n&&l[o]===r&&(l[o]=null)}),l[n]=r,{...s,priorities:l}}),re.track(r?"priority.assigned":"priority.cleared",{category:n,rank:r})},setStage:n=>{Z(e,r=>({...r,stage:n})),re.track("stage.changed",{stage:n})},nextStage:()=>{const{activeBuildId:n,builds:r}=t();if(!n)return;const s=r[n];if(!s)return;const l=Ct.indexOf(s.stage),o=Ct[Math.min(l+1,Ct.length-1)];t().setStage(o)},previousStage:()=>{const{activeBuildId:n,builds:r}=t();if(!n)return;const s=r[n];if(!s)return;const l=Ct.indexOf(s.stage),o=Ct[Math.max(l-1,0)];t().setStage(o)},selectLineage:n=>{Z(e,r=>{const s=r.lineage.key===n&&n!==null,l=Xi(r.lineage.powers);return{...r,lineage:{...r.lineage,key:n,revealMechanics:n?r.lineage.revealMechanics:!1,powers:s?l:[]}}}),re.track("lineage.selected",{lineage:n})},toggleLineageReveal:()=>{Z(e,n=>({...n,lineage:{...n.lineage,revealMechanics:!n.lineage.revealMechanics}})),re.track("lineage.reveal_toggled",{})},updateLineageNotes:n=>{Z(e,r=>({...r,lineage:{...r.lineage,notes:n}}))},toggleLineagePower:n=>{Z(e,r=>{var d,p,g,m;if(!r.lineage.key||r.lineage.key!==n.lineage)return r;const s=Xi(r.lineage.powers),l=n.lineage==="esper",o=s.some(y=>y.id===n.id),a=r.priorities.lineage??null;let c=s;if(o){if(c=c.filter(y=>y.id!==n.id),l&&((d=n.meta)!=null&&d.root)){if(n.kind==="esper-archetype")c=c.filter(y=>{var j,k;return((j=y.meta)==null?void 0:j.root)!==((k=n.meta)==null?void 0:k.root)});else if((p=n.meta)!=null&&p.path){const y=n.meta.path.join("/");c=c.filter(j=>{var w,h,u,f;const k=((h=(w=j.meta)==null?void 0:w.path)==null?void 0:h.join("/"))??"";return((u=j.meta)==null?void 0:u.root)!==((f=n.meta)==null?void 0:f.root)||!k.startsWith(`${y}/`)})}}return{...r,lineage:{...r.lineage,powers:c}}}if(l){const y=n.meta??{},j=y.category;if(n.kind!=="esper-framework-choice")if(n.kind==="esper-archetype"){if(j==="esper-base"&&a==="C"||j==="esper-mentalist"&&!(a==="A"||a==="C"))return r;const k=["sentinel","median","weaver","summoner","linker"],w=["empath","mesmer","siren","dreamer","meta-mind"],h=y.archetype,u=k.includes(h||""),f=w.includes(h||"");a==="A"?u?c=c.filter(x=>{var v;return!k.includes(((v=x.meta)==null?void 0:v.archetype)||"")&&x.kind!=="esper-focus"&&x.kind!=="esper-framework-path"}):f&&(c=c.filter(x=>{var v;return!w.includes(((v=x.meta)==null?void 0:v.archetype)||"")&&x.kind!=="esper-framework-choice"})):c=c.filter(x=>x.lineage!=="esper")}else{const k=["empath","mesmer","siren","dreamer","meta-mind"];if(!(n.kind==="esper-focus"&&k.includes(y.archetype||""))){const h=y.root;if(!h)return r;const u=Qg(a);if((y.depth??0)>u||!c.some(v=>{var E;return v.kind==="esper-archetype"&&((E=v.meta)==null?void 0:E.root)===h}))return r}}}if(n.lineage==="neosapien"){const j=a?{A:9,B:7,C:6,D:4,E:2}[a]:0,k=c.reduce((h,u)=>{var f;return h+(((f=u.meta)==null?void 0:f.slots)??0)},0),w=((g=n.meta)==null?void 0:g.slots)??0;if(j>0&&k+w>j)return r}if(n.lineage==="chimera"){const j=a?{A:7,B:5,C:4,D:3,E:2}[a]:0,k=c.reduce((h,u)=>{var f;return h+(((f=u.meta)==null?void 0:f.mutationPoints)??0)},0),w=((m=n.meta)==null?void 0:m.mutationPoints)??0;if(j>0&&k+w>j)return r}if(n.lineage==="sorcery"){const j=a?{A:{primary:1,secondary:2,moves:5},B:{primary:1,secondary:1,moves:4},C:{primary:1,secondary:2,moves:3},D:{primary:0,secondary:1,moves:2},E:{primary:0,secondary:1,moves:1}}[a]:{primary:0,secondary:0,moves:0},k=c.filter(u=>u.kind==="sorcery-sphere-primary").length,w=c.filter(u=>u.kind==="sorcery-sphere-secondary").length,h=c.filter(u=>u.kind==="sorcery-move").length;if(n.kind==="sorcery-sphere-primary"&&k>=j.primary||n.kind==="sorcery-sphere-secondary"&&w>=j.secondary||n.kind==="sorcery-move"&&h>=j.moves)return r}return c=[...c,n],{...r,lineage:{...r.lineage,powers:c}}}),re.track("lineage.power_toggled",{id:n.id,lineage:n.lineage})},clearLineagePowers:()=>{Z(e,n=>({...n,lineage:{...n.lineage,powers:[]}})),re.track("lineage.powers_cleared",{})},addContactResource:(n={})=>{const r={id:Mt("contact"),name:n.name??"",description:n.description??"",gmApproved:n.gmApproved??!1,backgroundSynergy:n.backgroundSynergy??!1,specialization:n.specialization??null,reach:Math.min(Math.max(n.reach??0,0),10),influence:Math.min(Math.max(n.influence??0,0),10)};Z(e,s=>({...s,resources:{...s.resources,contacts:[...s.resources.contacts,r]}})),re.track("resources.contact_added",{})},updateContactResource:(n,r)=>{Z(e,s=>({...s,resources:{...s.resources,contacts:s.resources.contacts.map(l=>l.id===n?{...l,...r,reach:r.reach!==void 0?Math.min(Math.max(r.reach,0),10):l.reach,influence:r.influence!==void 0?Math.min(Math.max(r.influence,0),10):l.influence}:l)}}))},removeContactResource:n=>{Z(e,r=>({...r,resources:{...r.resources,contacts:r.resources.contacts.filter(s=>s.id!==n)}}))},addRetainerResource:(n={})=>{const r={id:Mt("retainer"),name:n.name??"",description:n.description??"",gmApproved:n.gmApproved??!1,backgroundSynergy:n.backgroundSynergy??!1,specialization:n.specialization??null,loyalty:Math.min(Math.max(n.loyalty??0,0),10),competence:Math.min(Math.max(n.competence??0,0),10)};Z(e,s=>({...s,resources:{...s.resources,retainers:[...s.resources.retainers,r]}})),re.track("resources.retainer_added",{})},updateRetainerResource:(n,r)=>{Z(e,s=>({...s,resources:{...s.resources,retainers:s.resources.retainers.map(l=>l.id===n?{...l,...r,loyalty:r.loyalty!==void 0?Math.min(Math.max(r.loyalty,0),10):l.loyalty,competence:r.competence!==void 0?Math.min(Math.max(r.competence,0),10):l.competence}:l)}}))},removeRetainerResource:n=>{Z(e,r=>({...r,resources:{...r.resources,retainers:r.resources.retainers.filter(s=>s.id!==n)}}))},addPropertyResource:(n={})=>{const r={id:Mt("property"),name:n.name??"",description:n.description??"",gmApproved:n.gmApproved??!1,backgroundSynergy:n.backgroundSynergy??!1,tenure:n.tenure??"",zoning:n.zoning??"",ward:n.ward??"",specialization:n.specialization??null};Z(e,s=>({...s,resources:{...s.resources,properties:[...s.resources.properties,r]}})),re.track("resources.property_added",{})},updatePropertyResource:(n,r)=>{Z(e,s=>({...s,resources:{...s.resources,properties:s.resources.properties.map(l=>l.id===n?{...l,...r}:l)}}))},removePropertyResource:n=>{Z(e,r=>({...r,resources:{...r.resources,properties:r.resources.properties.filter(s=>s.id!==n)}}))},addGoodsResource:(n={})=>{const r={id:Mt("goods"),name:n.name??"",description:n.description??"",gmApproved:n.gmApproved??!1,backgroundSynergy:n.backgroundSynergy??!1,specialization:n.specialization??null,quality:Math.min(Math.max(n.quality??0,0),10)};Z(e,s=>({...s,resources:{...s.resources,goods:[...s.resources.goods,r]}})),re.track("resources.goods_added",{})},updateGoodsResource:(n,r)=>{Z(e,s=>({...s,resources:{...s.resources,goods:s.resources.goods.map(l=>l.id===n?{...l,...r,quality:r.quality!==void 0?Math.min(Math.max(r.quality,0),10):l.quality}:l)}}))},removeGoodsResource:n=>{Z(e,r=>({...r,resources:{...r.resources,goods:r.resources.goods.filter(s=>s.id!==n)}}))},setResourceLiquid:n=>{Z(e,r=>({...r,resources:{...r.resources,liquid:Math.max(0,n)}})),re.track("resources.liquid_set",{value:n})},updateResourceNotes:n=>{Z(e,r=>({...r,resources:{...r.resources,notes:n}}))},updateBackground:n=>{Z(e,r=>{const s={...r.background,...n},l=typeof n.title=="string"&&n.title!==r.background.title;return{...r,background:s,skills:l?{...r.skills,backgroundSpecializations:[],backgroundCustomSpecializations:[]}:r.skills}})},setSkillRating:(n,r)=>{Z(e,s=>({...s,skills:{...s.skills,ratings:{...s.skills.ratings,[n]:Math.max(0,r)}}})),re.track("skills.rating_set",{skillId:n,value:r})},toggleSkillSpecialization:n=>{Z(e,r=>{const l=r.skills.specializations.some(o=>o.id===n.id)?r.skills.specializations.filter(o=>o.id!==n.id):[...r.skills.specializations,n];return{...r,skills:{...r.skills,specializations:l}}}),re.track("skills.specialization_toggled",{id:n.id,type:n.type})},removeSkillSpecialization:n=>{Z(e,r=>({...r,skills:{...r.skills,specializations:r.skills.specializations.filter(s=>s.id!==n)}}))},addCustomSkillSpecialization:n=>{const r=n.trim();if(!r)return;const s={id:`custom-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,label:r,type:"custom",gmApproved:!1};Z(e,l=>({...l,skills:{...l.skills,specializations:[...l.skills.specializations,s]}})),re.track("skills.custom_added",{})},markSkillSpecializationApproved:(n,r)=>{Z(e,s=>({...s,skills:{...s.skills,specializations:s.skills.specializations.map(l=>l.id===n?{...l,gmApproved:r}:l)}}))},setBackgroundSkillSpecializations:n=>{Z(e,r=>({...r,skills:{...r.skills,backgroundSpecializations:n}})),re.track("skills.background_specializations",{count:n.length})},setBackgroundCustomSpecializations:n=>{Z(e,r=>({...r,skills:{...r.skills,backgroundCustomSpecializations:n}})),re.track("skills.background_custom_specializations",{count:n.length})},updateSkillNotes:n=>{Z(e,r=>({...r,skills:{...r.skills,notes:n}}))},setAttributeScore:(n,r)=>{Z(e,s=>({...s,attributes:{...s.attributes,scores:{...s.attributes.scores,[n]:Math.min(zs,Math.max(0,r))}}})),re.track("attributes.updated",{attribute:n,value:r})},updateAttributeNotes:n=>{Z(e,r=>({...r,attributes:{...r.attributes,notes:n}}))},toggleAttributeSpecialization:(n,r)=>{Z(e,s=>{const l=s.attributes.specializations??np(),o=l[n]??[],c=o.includes(r)?o.filter(d=>d!==r):[...o,r];return{...s,attributes:{...s.attributes,specializations:{...l,[n]:c}}}}),re.track("attributes.specialization_toggled",{attribute:n,specialization:r})},adjustExperience:n=>{Z(e,r=>({...r,advancement:{...r.advancement,experience:Math.max(0,r.advancement.experience+n)}})),re.track("advancement.adjusted",{delta:n})},setExperience:n=>{Z(e,r=>({...r,advancement:{...r.advancement,experience:Math.max(0,n)}})),re.track("advancement.set",{value:n})},updateAdvancement:n=>{Z(e,r=>({...r,advancement:{...r.advancement,...n}}))},adjustCorruption:n=>{Z(e,r=>({...r,corruption:{...r.corruption,current:Math.max(0,r.corruption.current+n)}})),re.track("corruption.adjusted",{delta:n})},setCorruption:n=>{Z(e,r=>({...r,corruption:{...r.corruption,current:Math.max(0,n)}})),re.track("corruption.set",{value:n})},updateCorruptionNotes:n=>{Z(e,r=>({...r,corruption:{...r.corruption,notes:n}}))},adjustHealth:(n,r)=>{Z(e,s=>{const l=s.health[n],o=Math.max(0,Math.min(l.max,l.current+r));return{...s,health:{...s.health,[n]:{...l,current:o}}}}),re.track("health.adjusted",{location:n,delta:r})},setHealth:(n,r)=>{Z(e,s=>{const l=s.health[n];return{...s,health:{...s.health,[n]:{...l,current:Math.max(0,Math.min(l.max,r))}}}}),re.track("health.set",{location:n,value:r})},updateHealthScar:(n,r)=>{Z(e,s=>({...s,health:{...s.health,[n]:{...s.health[n],scar:r}}}))},addRelationship:n=>{n.trim()&&(Z(e,r=>({...r,narrative:{...r.narrative,relationships:Array.from(new Set([...r.narrative.relationships,n.trim()]))}})),re.track("relationship.added",{}))},removeRelationship:n=>{Z(e,r=>({...r,narrative:{...r.narrative,relationships:r.narrative.relationships.filter(s=>s!==n)}})),re.track("relationship.removed",{})},updateAnchors:n=>{Z(e,r=>({...r,narrative:{...r.narrative,anchors:n}}))},updateNarrativeNotes:n=>{Z(e,r=>({...r,narrative:{...r.narrative,notes:n}}))},updateGmNotes:n=>{Z(e,r=>({...r,gmNotes:n}))}}),{name:"sidonia-character-builder",version:7,migrate:(e,t)=>{if(!e||typeof e!="object")return e;const n=d=>{const p=d??{};return{physique:typeof p.physique=="number"?p.physique:typeof p.grit=="number"?p.grit:0,intellect:typeof p.intellect=="number"?p.intellect:typeof p.guile=="number"?p.guile:0,presence:typeof p.presence=="number"?p.presence:typeof p.gravitas=="number"?p.gravitas:0}},r=d=>{const p=d??{};return{physique:Array.isArray(p.physique)?p.physique:[],intellect:Array.isArray(p.intellect)?p.intellect:[],presence:Array.isArray(p.presence)?p.presence:[]}},s=d=>{const p=d??{};return{name:typeof p.name=="string"?p.name:"",alias:typeof p.alias=="string"?p.alias:"",currentProfession:typeof p.currentProfession=="string"?p.currentProfession:typeof p.pronouns=="string"?p.pronouns:"",wardOfResidence:typeof p.wardOfResidence=="string"?p.wardOfResidence:typeof p.concept=="string"?p.concept:"",backstory:typeof p.backstory=="string"?p.backstory:typeof p.summary=="string"?p.summary:"",physicalDescription:typeof p.physicalDescription=="string"?p.physicalDescription:"",code:typeof p.code=="string"?p.code:"",lineNotCrossed:typeof p.lineNotCrossed=="string"?p.lineNotCrossed:"",temptation:typeof p.temptation=="string"?p.temptation:"",portraitUrl:typeof p.portraitUrl=="string"?p.portraitUrl:""}},l=d=>{const p=d??{};if(p.ratings&&p.specializations){const y=p.backgroundSpecialization&&typeof p.backgroundSpecialization=="string"?[p.backgroundSpecialization]:p.backgroundSpecializations??[],j=[];return p.backgroundCustomSpecialization&&typeof p.backgroundCustomSpecialization=="string"?j.push(p.backgroundCustomSpecialization):Array.isArray(p.backgroundCustomSpecializations)&&j.push(...p.backgroundCustomSpecializations),{ratings:p.ratings,specializations:Array.isArray(p.specializations)?p.specializations:[],backgroundSpecializations:Array.isArray(y)?y:[],backgroundCustomSpecializations:j,notes:typeof p.notes=="string"?p.notes:""}}return{ratings:(Array.isArray(p.focus)?p.focus:[]).reduce((y,j)=>(y[j]=1,y),{}),specializations:[],backgroundSpecializations:[],backgroundCustomSpecializations:[],notes:typeof p.notes=="string"?p.notes:""}},o=d=>{const p=d??{},g=Xi(p.powers);return{key:p.key??null,notes:typeof p.notes=="string"?p.notes:"",revealMechanics:!!p.revealMechanics,powers:g}},a=d=>{var x;const p=d??{},g=(v,E)=>({id:v.id??Mt(`contact-${E}`),name:v.name??"",description:v.description??v.notes??"",gmApproved:v.gmApproved??!1,backgroundSynergy:v.backgroundSynergy??!1,specialization:v.specialization??null,reach:typeof v.reach=="number"?v.reach:0,influence:typeof v.influence=="number"?v.influence:0}),m=(v,E)=>({id:v.id??Mt(`retainer-${E}`),name:v.name??"",description:v.description??v.notes??"",gmApproved:v.gmApproved??!1,backgroundSynergy:v.backgroundSynergy??!1,specialization:v.specialization??null,loyalty:typeof v.loyalty=="number"?v.loyalty:0,competence:typeof v.competence=="number"?v.competence:0}),y=(v,E)=>({id:v.id??Mt(`property-${E}`),name:v.name??"",description:v.description??v.notes??"",gmApproved:v.gmApproved??!1,backgroundSynergy:v.backgroundSynergy??!1,tenure:v.tenure??"",zoning:v.zoning??"",ward:v.ward??"",specialization:v.specialization??null}),j=(v,E)=>({id:v.id??Mt(`goods-${E}`),name:v.name??"",description:v.description??v.notes??"",gmApproved:v.gmApproved??!1,backgroundSynergy:v.backgroundSynergy??!1,specialization:v.specialization??null,quality:typeof v.quality=="number"?v.quality:0}),k=Array.isArray(p.contacts)?p.contacts.map((v,E)=>g(v,E)):[],w=Array.isArray(p.retainers)?p.retainers.map((v,E)=>m(v,E)):[],h=Array.isArray(p.properties)?p.properties.map((v,E)=>y(v,E)):[],u=Array.isArray(p.goods)?p.goods.map((v,E)=>j(v,E)):[],f=typeof p.liquid=="number"?p.liquid:typeof((x=p.allocations)==null?void 0:x.liquid)=="number"?p.allocations.liquid:0;return{contacts:k,retainers:w,properties:h,goods:u,liquid:f,notes:typeof p.notes=="string"?p.notes:""}},c=Object.fromEntries(Object.entries(e.builds??{}).map(([d,p])=>{var h,u,f;const g=p,m={scores:n((h=g.attributes)==null?void 0:h.scores),notes:typeof((u=g.attributes)==null?void 0:u.notes)=="string"?g.attributes.notes:"",specializations:r((f=g.attributes)==null?void 0:f.specializations)},y=l(g.skills),j=o(g.lineage),k=a(g.resources),w={...g,profile:s(g.profile),lineage:j,resources:k,skills:y,attributes:m};return[d,w]}));return{...e,builds:c}}})),Jg={priorities:{label:"Priorities",description:"Assign each letter to a pillar to set your fate."},lineage:{label:"Lineage",description:"Choose what you are and reveal the aesthetic."},resources:{label:"Resources",description:"Distribute wealth, favors, and territory."},background:{label:"Background",description:"Capture the story that forged you."},skills:{label:"Skills",description:"Highlight expertise and specializations."},attributes:{label:"Attributes",description:"Split your innate edge across three pillars."},narrative:{label:"Narrative",description:"Track corruption, wounds, and relationships."}};function Xg({current:e,onNavigate:t}){const n=Ct.indexOf(e),r=Math.round((n+1)/Ct.length*100);return i.jsxs("nav",{className:"flex flex-col gap-deco-sm mb-deco-md","aria-label":"Character builder stages",children:[i.jsx("div",{className:"h-1.5 rounded-full bg-sidonia-dark/50 overflow-hidden border border-sidonia-gold/20",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-sidonia-gold to-sidonia-brass transition-all duration-500 ease-out",style:{width:`${r}%`}})}),i.jsx("ul",{className:"flex flex-wrap gap-3 list-none p-0 m-0",children:Ct.map(s=>{const l=Jg[s],o=Ct.indexOf(s),a=o===n,c=o<n,d=o>n;return i.jsx("li",{className:"flex-1 min-w-[180px]",children:i.jsxs("button",{type:"button",onClick:()=>t(s),className:ae("w-full px-deco-sm py-3 rounded-lg border-2 text-left","flex flex-col gap-1 transition-all duration-300","bg-sidonia-dark/75 backdrop-blur-sm",a&&"border-sidonia-gold shadow-lg shadow-sidonia-gold/20 -translate-y-0.5",c&&"border-sidonia-gold/40 hover:border-sidonia-gold/60",d&&"border-sidonia-muted/30 hover:border-sidonia-muted/50","hover:bg-sidonia-dark"),children:[i.jsx("span",{className:ae("font-display text-sm tracking-wider uppercase",a&&"text-sidonia-gold",c&&"text-sidonia-brass",d&&"text-sidonia-muted"),children:l.label}),i.jsx("span",{className:"text-xs text-sidonia-text/70 font-body",children:l.description})]})},s)})})]})}const gc=["A","B","C","D","E"],Zg={lineage:{title:"Lineage",intro:"What are you? Determines the supernatural path and aesthetic layer.",detail:"Higher priority unlocks stronger chassis, spheres, mutation points, or Esper templates. Lower priority keeps you closer to human but limits your edge."},resources:{title:"Resources",intro:"What do you own? Contacts, territories, retainers, liquid wealth.",detail:"Priority sets your Resource Points pool and maximum quality. Use it to buy properties, networks, and gear. Higher ranks unlock elite holdings."},background:{title:"Background",intro:"Who were you? Establishes influence, narrative permissions, and synergies.",detail:"Higher priority backgrounds stretch across the city, offering automatic specializations and better resource synergies."},skills:{title:"Skills",intro:"What do you know? Disciplines and specializations that show lived experience.",detail:"Priority sets how many disciplines you master. Focus areas gain bonus dice and teach players where they shine."},attributes:{title:"Attributes",intro:"What is innate? Only three pillars define your core capability.",detail:"Allocate attribute dice based on priority. The higher the rank, the sharper your raw edge."}};function ev({priorities:e,onSelect:t,onClear:n}){const r=new Set(Object.values(e).filter(Boolean).map(s=>s));return i.jsxs("section",{className:"priority-matrix","aria-label":"Priority assignment grid",children:[i.jsxs("header",{className:"priority-matrix__header",children:[i.jsxs("div",{children:[i.jsx("h2",{children:"Priority Grid"}),i.jsx("p",{children:"Assign each letter exactly once. Sidonia rewards focus and makes you pay for it elsewhere. Tap a letter to slot it into a category; tap the category badge to clear it."})]}),i.jsx("ul",{className:"priority-matrix__legend",children:gc.map(s=>i.jsxs("li",{className:r.has(s)?"used":"",children:[i.jsx("span",{className:"priority-matrix__rank",children:s}),i.jsxs("span",{className:"priority-matrix__tag",children:[s==="A"&&"Signature move",s==="B"&&"Favored",s==="C"&&"Balanced",s==="D"&&"Compromised",s==="E"&&"Sacrifice"]})]},s))})]}),i.jsx("div",{className:"priority-matrix__grid",role:"table",children:Fg.map(s=>{const l=Zg[s],o=e[s];return i.jsxs("article",{className:"priority-matrix__row",role:"row",children:[i.jsxs("div",{className:"priority-matrix__info",role:"cell",children:[i.jsxs("button",{type:"button",className:`priority-matrix__category ${o?"has-selection":""}`,onClick:()=>n==null?void 0:n(s),children:[i.jsx("span",{className:"priority-matrix__category-title",children:l.title}),i.jsx("span",{className:"priority-matrix__selection",children:o??""})]}),i.jsx("p",{className:"priority-matrix__intro",children:l.intro}),i.jsxs("details",{children:[i.jsx("summary",{children:"Why it matters"}),i.jsx("p",{children:l.detail})]})]}),i.jsx("div",{className:"priority-matrix__choices",role:"cell",children:gc.map(a=>{const c=o===a,d=!c&&r.has(a);return i.jsx("button",{type:"button",className:`priority-matrix__choice ${c?"selected":""}`,disabled:d,onClick:()=>t(s,a),children:a},a)})})]},s)})})]})}function tv({priorities:e,onSelect:t,onClear:n}){const s=Object.values(e).filter(Boolean).length===Object.keys(e).length;return i.jsxs("div",{className:"stage stage--priorities",children:[i.jsx(ev,{priorities:e,onSelect:t,onClear:n}),i.jsx("footer",{className:"stage__footer",children:i.jsx("p",{children:s?"Every letter is spoken for. Advance to Lineage to let the city brand you.":"You still have letters to place. Each sacrifice reveals a different facet of Sidonia."})})]})}const nv={A:9,B:7,C:6,D:4,E:2},rv={A:7,B:5,C:4,D:3,E:2},vc={A:{primary:1,secondary:2,moves:5},B:{primary:1,secondary:1,moves:4},C:{primary:1,secondary:2,moves:3,note:"Priority C may exchange the primary sphere for a second secondary sphere."},D:{primary:0,secondary:1,moves:2},E:{primary:0,secondary:1,moves:1}},sv={A:0,B:2,C:2,D:1,E:0},iv={A:"Priority A: Choose one Esper archetype (base only) and one Mentalist archetype with full framework.",B:"Priority B: Esper prodigy  evolve two steps beyond the baseline.",C:"Priority C: Begin as a Mentalist. Select framework paths to define focus.",D:"Priority D: Gifted Esper  evolve one step beyond baseline talents.",E:"Priority E: Base Esper talents unlocked."},mt=e=>e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),Zi=(e,t,n)=>t?e[t]:n;function lv(e){const t=e;return Array.isArray(t.powers)&&t.powers.some(n=>n&&typeof n=="object"&&"tiers"in n)}function ov(e){const t=e;return Array.isArray(t.powers)&&t.powers.some(n=>n&&typeof n=="object"&&"tiers"in n)}function av(e){const t=e;return Array.isArray(t.powers)&&t.powers.some(n=>n&&typeof n=="object"&&"sphere"in n)}function cv(e){const t=e;return Array.isArray(t.powers)&&t.powers.some(n=>n&&typeof n=="object"&&"archetype"in n)}function uv(e){const t=e;return Array.isArray(t.powers)&&t.powers.some(n=>n&&typeof n=="object"&&"chassis"in n)}function It(e,t){return e?i.jsxs("div",{className:"power-description",children:[e.player&&i.jsx("p",{className:"power-description__flavor",children:e.player}),e.short&&i.jsx("p",{className:"power-description__mechanics",children:e.short}),e.flaw&&i.jsxs("p",{className:"power-description__detail power-description__flaw",children:["Flaw: ",e.flaw]}),t&&e.gm&&i.jsxs("p",{className:"power-description__detail power-description__gm",children:["GM: ",e.gm]}),e.outcomes&&i.jsx("ul",{className:"power-description__outcomes",children:Object.entries(e.outcomes).map(([n,r])=>i.jsxs("li",{children:[i.jsx("strong",{children:n}),i.jsx("span",{children:r})]},n))})]}):null}function dv({lineage:e,powerData:t,gmEnabled:n,lineagePriority:r,selections:s,onToggleSelection:l,onClearSelections:o}){var d,p,g,m,y,j,k;if(!e)return i.jsxs("section",{className:"lineage-powers-panel",children:[i.jsx("h3",{children:"Lineage Powers"}),i.jsx("p",{children:"Select a lineage to preview its signature powers, moves, and upgrades."})]});if(!t)return i.jsxs("section",{className:"lineage-powers-panel",children:[i.jsx("h3",{children:"Lineage Powers"}),i.jsx("p",{children:"Power data for this lineage is not yet available."})]});const a=s.filter(w=>w.lineage===e);z.useMemo(()=>new Map(a.map(w=>[w.id,w])),[a]);const c=new Set(a.map(w=>w.id));if(e==="neosapien"&&lv(t)){const w=Zi(nv,r,0),h=a.reduce((v,E)=>{var C;return v+(((C=E.meta)==null?void 0:C.slots)??0)},0),u=a.reduce((v,E)=>{var C;return v+(((C=E.meta)==null?void 0:C.permanentCorruption)??0)},0),f=w>0&&h>w,x=v=>{var _;const E=c.has(v.id),C=(_=v.meta)==null?void 0:_.root;!E&&C&&a.filter(P=>{var T;return((T=P.meta)==null?void 0:T.root)===C&&P.id!==v.id}).forEach(P=>{l(P)}),l(v)};return i.jsxs("section",{className:"lineage-powers-panel",children:[i.jsxs("header",{children:[i.jsx("h3",{children:"Augment Catalog"}),i.jsx("p",{children:"Slot-based upgrades ranging from street scraps to imperial artistry."})]}),i.jsxs("aside",{className:"lineage-power-summary",children:[i.jsxs("div",{children:[i.jsx("span",{children:"Slots Used"}),i.jsxs("strong",{children:[h,w?` / ${w}`:""]})]}),i.jsxs("div",{children:[i.jsx("span",{children:"Permanent Corruption"}),i.jsx("strong",{children:u})]}),f&&i.jsx("p",{className:"lineage-power-summary__warning",children:"Slot budget exceeded. Adjust selections or raise lineage priority."}),a.length>0&&i.jsx("button",{type:"button",className:"power-toggle power-toggle--clear",onClick:o,children:"Clear selections"})]}),i.jsx("div",{className:"lineage-powers-grid",children:t.powers.map(v=>{const E=v.id??mt(v.name??"augment"),C=a.some(_=>{var N;return((N=_.meta)==null?void 0:N.root)===E});return i.jsxs("details",{className:`lineage-power-card${C?" lineage-power-card--has-selection":""}`,open:C,children:[i.jsx("summary",{children:i.jsx("div",{className:"lineage-power-card__summary",children:i.jsx("h4",{children:v.name})})}),i.jsx("div",{className:"lineage-power-card__body",children:Object.entries(v.tiers??{}).map(([_,N])=>{const P=N.id??`${E}-${mt(_)}`,T=N.tier??1,K={id:P,lineage:"neosapien",label:`${v.name}  Tier ${T}`,kind:"neosapien-augment",meta:{root:E,parent:E,path:[E,_],depth:1,slots:T,permanentCorruption:T,category:v.category,tierLabel:`Tier ${T}`}},M=c.has(K.id),I=!M&&w>0&&h+T>w,O=`lineage-power-tier${M?" lineage-power-tier--selected":""}${I?" lineage-power-tier--disabled":""}`,G=`power-toggle power-toggle--radio${M?" power-toggle--active":""}`,R=N.augmentTier?`${N.augmentTier} level bio mod`:`Tier ${T}`;return i.jsxs("div",{className:O,children:[i.jsx("div",{className:"lineage-power-tier__header",children:i.jsxs("div",{className:"lineage-power-tier__info",children:[i.jsx("h5",{className:"lineage-power-tier__name",children:N.name??`Tier ${T}`}),i.jsxs("div",{className:"lineage-power-tier__meta",children:[i.jsxs("span",{className:"badge badge--icon",children:[i.jsx("img",{src:"/icons/Augment.png",alt:""}),i.jsx("span",{className:"badge__text",children:"Augment"})]}),i.jsx("span",{className:"lineage-power-tier__label",children:R})]})]})}),It(N.description,n),i.jsxs("div",{className:"lineage-power-tier__footer",children:[i.jsx("button",{type:"button",className:G,onClick:()=>x(K),disabled:I,title:I?`Would exceed slot limit (${h+T}/${w})`:void 0,"aria-label":M?`Deselect ${N.name??`Tier ${T}`}`:`Select ${N.name??`Tier ${T}`}`,children:M?"Selected":I?"Exceeds Limit":"Select"}),i.jsxs("div",{className:"lineage-power-tier__cost",children:[i.jsxs("span",{children:[T," Slot",T===1?"":"s"]}),i.jsxs("span",{children:[T," Corruption"]})]})]})]},P)})})]},v.id??v.name)})})]})}if(e==="chimera"&&ov(t)){const w=Zi(rv,r,0),h=a.reduce((C,_)=>{var N;return C+(((N=_.meta)==null?void 0:N.mutationPoints)??0)},0),u=a.reduce((C,_)=>{var N;return C+(((N=_.meta)==null?void 0:N.permanentCorruption)??0)},0),f=w>0&&h>w,x=t.powers.filter(C=>{var _;return(_=C.tags)==null?void 0:_.includes("core")}),v=t.powers.filter(C=>{var _;return!((_=C.tags)!=null&&_.includes("core"))}),E=C=>{var P;const _=c.has(C.id),N=(P=C.meta)==null?void 0:P.root;!_&&N&&a.filter(K=>{var M;return((M=K.meta)==null?void 0:M.root)===N&&K.id!==C.id}).forEach(K=>{l(K)}),l(C)};return i.jsxs("section",{className:"lineage-powers-panel",children:[i.jsxs("header",{children:[i.jsx("h3",{children:"Mutation Catalogue"}),i.jsx("p",{children:"Spend mutation points to embrace the city's wild ecologies."})]}),i.jsxs("aside",{className:"lineage-power-summary",children:[i.jsxs("div",{children:[i.jsx("span",{children:"Mutation Points"}),i.jsxs("strong",{children:[h,w?` / ${w}`:""]})]}),i.jsxs("div",{children:[i.jsx("span",{children:"Permanent Corruption"}),i.jsx("strong",{children:u})]}),f&&i.jsx("p",{className:"lineage-power-summary__warning",children:"Mutation budget exceeded. Remove selections or adjust priority."}),a.length>0&&i.jsx("button",{type:"button",className:"power-toggle power-toggle--clear",onClick:o,children:"Clear selections"})]}),x.length>0&&i.jsxs("section",{className:"lineage-core-mutations",children:[i.jsx("h4",{children:"Core Mutations"}),i.jsx("p",{className:"lineage-core-mutations__subtitle",children:"All Chimera possess these"}),i.jsx("div",{className:"lineage-core-mutations-list",children:x.map(C=>{var N,P,T,K,M;const _=((T=(P=(N=C.tiers)==null?void 0:N.tier1)==null?void 0:P.description)==null?void 0:T.short)??((M=(K=Object.values(C.tiers??{})[0])==null?void 0:K.description)==null?void 0:M.short)??"Core mutation";return i.jsxs("details",{className:"core-mutation-card",children:[i.jsx("summary",{children:i.jsx("h5",{children:C.name})}),i.jsx("p",{children:_})]},C.id??C.name)})})]}),i.jsx("div",{className:"lineage-powers-grid",children:v.map(C=>{const _=C.id??mt(C.name??"mutation"),N=a.some(P=>{var T;return((T=P.meta)==null?void 0:T.root)===_});return i.jsxs("details",{className:`lineage-power-card${N?" lineage-power-card--has-selection":""}`,open:N,children:[i.jsx("summary",{children:i.jsx("div",{className:"lineage-power-card__summary",children:i.jsx("h4",{children:C.name})})}),i.jsx("div",{className:"lineage-power-card__body",children:Object.entries(C.tiers??{}).map(([P,T])=>{const K=T.id??`${_}-${mt(P)}`,M=T.tier??1,A={id:K,lineage:"chimera",label:`${C.name}  Tier ${M}`,kind:"chimera-mutation",meta:{root:_,parent:_,path:[_,P],depth:1,mutationPoints:M,permanentCorruption:M,category:C.category,tierLabel:`Tier ${M}`}},I=c.has(A.id),G=!I&&w>0&&h+M>w,R=`lineage-power-tier${I?" lineage-power-tier--selected":""}${G?" lineage-power-tier--disabled":""}`,D=`power-toggle power-toggle--radio${I?" power-toggle--active":""}`,L=T.augmentTier?`${T.augmentTier} level mutation`:`Tier ${M}`;return i.jsxs("div",{className:R,children:[i.jsx("div",{className:"lineage-power-tier__header",children:i.jsxs("div",{className:"lineage-power-tier__info",children:[i.jsx("h5",{className:"lineage-power-tier__name",children:T.name??`Tier ${M}`}),i.jsxs("div",{className:"lineage-power-tier__meta",children:[i.jsxs("span",{className:"badge badge--icon",children:[i.jsx("img",{src:"/icons/Augment.png",alt:""}),i.jsx("span",{className:"badge__text",children:"Mutation"})]}),i.jsx("span",{className:"badge badge--tier",children:L})]})]})}),It(T.description,n),i.jsxs("div",{className:"lineage-power-tier__footer",children:[i.jsx("button",{type:"button",className:D,onClick:()=>E(A),disabled:G,title:G?`Would exceed mutation point limit (${h+M}/${w})`:void 0,"aria-label":I?`Deselect ${T.name??`Tier ${M}`}`:`Select ${T.name??`Tier ${M}`}`,children:I?"Selected":G?"Exceeds Limit":"Select"}),i.jsxs("div",{className:"lineage-power-tier__cost",children:[i.jsxs("span",{children:[M," Mutation Point",M===1?"":"s"]}),i.jsxs("span",{children:[M," Corruption"]})]})]})]},K)})})]},C.id??C.name)})})]})}if(e==="sorcery"&&av(t)){const w=Zi(vc,r,{primary:0,secondary:0,moves:0}),h=a.filter(N=>N.kind==="sorcery-sphere-primary").length,u=a.filter(N=>N.kind==="sorcery-sphere-secondary").length,f=a.filter(N=>N.kind==="sorcery-move").length,x=r?vc[r].note:void 0,v=new Set(a.filter(N=>N.kind==="sorcery-sphere-primary"||N.kind==="sorcery-sphere-secondary").map(N=>{var P;return(P=N.meta)==null?void 0:P.sphere}).filter(N=>!!N)),E=N=>{var K;const P=c.has(N.id),T=(K=N.meta)==null?void 0:K.sphere;P&&T&&a.filter(A=>{var I;return A.kind==="sorcery-move"&&((I=A.meta)==null?void 0:I.sphere)===T}).forEach(A=>{l(A)}),l(N)},C={Creation:"Manifest matter and energy from the Aether, bringing the unreal into reality.",Destruction:"Unmake and dissolve, returning solid form to primordial chaos.",Transformation:"Reshape existing matter, altering form and substance through will.",Mind:"Touch thoughts, memories, and the psyche of sentient beings.",Time:"Glimpse past and future, or stretch and compress the flow of moments.",Space:"Bend distance, fold reality, and traverse the impossible.",Life:"Mend flesh, accelerate growth, or drain vitality from the living.",Death:"Command spirits, commune with the departed, and channel entropic energies.",Fate:"Perceive probabilities, nudge destiny, and read the threads of chance.",Protection:"Weave wards and barriers against physical and supernatural threats."},_=t.powers.reduce((N,P)=>{const T=P.sphereTier??"unknown",K=P.sphere??"Unknown Sphere";return N[T]||(N[T]={}),N[T][K]||(N[T][K]=[]),N[T][K].push(P),N},{});return i.jsxs("section",{className:"lineage-powers-panel",children:[i.jsxs("header",{children:[i.jsx("h3",{children:"Sphere Library"}),i.jsx("p",{children:"Primary and secondary spheres unlock ritual moves and narrative permissions."})]}),i.jsxs("aside",{className:"lineage-power-summary",children:[i.jsxs("div",{children:[i.jsx("span",{children:"Primary Spheres"}),i.jsxs("strong",{children:[h,w.primary?` / ${w.primary}`:""]})]}),i.jsxs("div",{children:[i.jsx("span",{children:"Secondary Spheres"}),i.jsxs("strong",{children:[u,w.secondary?` / ${w.secondary}`:""]})]}),i.jsxs("div",{children:[i.jsx("span",{children:"Moves"}),i.jsxs("strong",{children:[f,w.moves?` / ${w.moves}`:""]})]}),x&&i.jsx("p",{className:"lineage-power-summary__note",children:x}),a.length>0&&i.jsx("button",{type:"button",className:"power-toggle power-toggle--clear",onClick:o,children:"Clear selections"})]}),i.jsx("div",{className:"lineage-powers-columns",children:["primary","secondary"].map(N=>{const P=_[N]??{};return Object.keys(P).length===0?null:i.jsxs("div",{className:"sphere-column",children:[i.jsx("h4",{className:"sphere-column__heading",children:N==="primary"?"Primary Spheres":"Secondary Spheres"}),Object.entries(P).map(([T,K])=>{const M=`${N}-${mt(T)}`,A=N==="primary"?"sorcery-sphere-primary":"sorcery-sphere-secondary",I={id:M,lineage:"sorcery",label:`${N==="primary"?"Primary":"Secondary"} Sphere  ${T}`,kind:A,meta:{sphere:T,root:M,path:[M],depth:0,tierLabel:N==="primary"?"Primary Sphere":"Secondary Sphere"}},O=c.has(I.id),G=N==="primary",R=G?h:u,D=G?w.primary:w.secondary,B=!O&&D>0&&R>=D,U=`sphere-card${O?" sphere-card--selected":""}${B?" sphere-card--disabled":""}`,te=`power-toggle${O?" power-toggle--active":""}`,J=C[T]||"A sphere of sorcerous power.",ee=v.has(T);return i.jsxs("details",{className:U,open:O,children:[i.jsx("summary",{children:i.jsxs("div",{className:"sphere-card__summary",children:[i.jsxs("div",{children:[i.jsx("h5",{children:T}),i.jsx("p",{className:"sphere-card__description",children:J})]}),i.jsx("button",{type:"button",className:te,disabled:B,title:B?`${G?"Primary":"Secondary"} sphere limit reached (${R}/${D})`:void 0,onClick:H=>{H.preventDefault(),B||E(I)},children:O?"Selected":B?"Limit Reached":"Select Sphere"})]})}),!ee&&i.jsx("p",{className:"sphere-prerequisite-message",children:"Select this sphere to unlock its moves."}),i.jsx("ul",{className:"power-list",children:K.map(H=>{const q=H.id??mt(H.name??"move"),ie={id:q,lineage:"sorcery",label:`${H.name??"Move"} (${T})`,kind:"sorcery-move",meta:{moveType:H.moveType,sphere:T,root:M,parent:M,path:[M,q],depth:1}},Se=c.has(ie.id),Ze=!ee,Be=!Se&&w.moves>0&&f>=w.moves,V=Ze||Be,ue=`power-list__item${Se?" power-list__item--selected":""}${V?" power-list__item--disabled":""}`,oe=`power-toggle${Se?" power-toggle--active":""}`;let S;return Ze?S="Select the sphere first":Be&&(S=`Move limit reached (${f}/${w.moves})`),i.jsxs("li",{className:ue,children:[i.jsxs("div",{className:"power-list__header",children:[i.jsx("h6",{className:"power-list__title",children:H.name}),i.jsxs("div",{className:"power-list__meta",children:[H.moveType&&i.jsxs("span",{className:"badge badge--icon",children:[i.jsx("img",{src:"/icons/Move.png",alt:""}),i.jsx("span",{className:"badge__text",children:H.moveType})]}),i.jsx("button",{type:"button",className:oe,onClick:()=>{V||l(ie)},disabled:V,title:S,children:Se?"Selected":Be?"Limit Reached":"Add"})]})]}),It(H.description,n),H.outcomes&&Object.keys(H.outcomes).length>0&&i.jsx("div",{className:"power-outcomes",children:Object.entries(H.outcomes).map(([Q,X])=>i.jsxs("div",{children:[i.jsxs("strong",{children:[Q,":"]})," ",X]},Q))})]},q)})})]},M)})]},N)})})]})}if(e==="esper"&&cv(t)){const w=r?iv[r]:void 0,h=r?sv[r]:0,u=["sentinel","median","weaver","summoner","linker"],f=["empath","mesmer","siren","dreamer","meta-mind"],x=t.powers.filter(L=>u.includes(L.archetype??"")),v=t.powers.filter(L=>f.includes(L.archetype??"")||L.archetype==="foundational"),E=r==="A",C=L=>{const U=L.split(".")[0];return x.filter(te=>{const J=te.path??"";return J===U||L.startsWith(J+".")||J===L}).sort((te,J)=>(te.evolutionStage??0)-(J.evolutionStage??0))},N=a.filter(L=>{var B;return(L.kind==="esper-archetype"||L.kind==="esper-focus"||L.kind==="esper-framework-path")&&u.includes(((B=L.meta)==null?void 0:B.archetype)??"")}).sort((L,B)=>{var J,ee;const U=((J=L.meta)==null?void 0:J.depth)??0;return(((ee=B.meta)==null?void 0:ee.depth)??0)-U})[0],P=(p=(d=N==null?void 0:N.meta)==null?void 0:d.path)==null?void 0:p.join("."),T=P==null?void 0:P.split(".")[0],K=(L,B)=>{var ee;const U=L.split("."),te=U[0],J={id:`esper-path-${L}`,lineage:"esper",label:`${(ee=L.split(".").pop())==null?void 0:ee.replace(/-/g," ")} (Evolution Stage ${B})`,kind:B===0?"esper-archetype":B===1?"esper-focus":"esper-framework-path",meta:{archetype:te,path:U,depth:B,root:te}};!P||T!==te?a.filter(H=>H.kind==="esper-archetype"||H.kind==="esper-focus"||H.kind==="esper-framework-path").forEach(H=>l(H)):B>0&&a.filter(H=>{var q;return(H.kind==="esper-focus"||H.kind==="esper-framework-path")&&((q=H.meta)==null?void 0:q.root)===te}).forEach(H=>l(H)),l(J)},M=()=>{if(P){const U=C(P),te=P.split(".").length-1;return i.jsxs("div",{className:"esper-evolution-section",children:[i.jsx("h4",{children:"Esper Evolution Path"}),i.jsxs("p",{className:"section-description",children:["Selected: ",P.split(".").map(J=>J.replace(/-/g," ").replace(/\b\w/g,ee=>ee.toUpperCase())).join("  ")]}),i.jsx("button",{type:"button",className:"power-toggle power-toggle--clear",onClick:o,children:"Change Path"}),i.jsxs("div",{className:"lineage-power-card",children:[i.jsxs("h5",{children:["All Powers for This Path (",U.length," total)"]}),i.jsx("ul",{className:"power-list",children:U.map(J=>{const ee=J.id??mt(J.name??"power"),H=(J.path??"").split("."),q=H[0]?H[0].replace(/-/g," ").replace(/\b\w/g,ie=>ie.toUpperCase()):"";return i.jsxs("li",{className:"power-list__item power-list__item--granted",children:[i.jsx("div",{className:"power-list__header",children:i.jsxs("div",{children:[i.jsx("strong",{className:"power-list__title",children:J.name}),q&&i.jsx("div",{className:"power-list__subtitle",children:q})]})}),i.jsxs("div",{className:"power-list__meta",children:[i.jsxs("span",{className:"badge",children:["Stage ",J.evolutionStage]}),J.moveType&&i.jsxs("span",{className:"badge badge--icon",children:[i.jsx("img",{src:"/icons/Move.png",alt:""}),i.jsx("span",{className:"badge__text",children:J.moveType})]})]}),It(J.description,n)]},ee)})}),te<h&&i.jsxs("div",{className:"evolution-options",children:[i.jsx("h6",{children:"Available Evolutions"}),(()=>{const J=new Set(x.filter(ee=>{const H=ee.path??"";return(ee.evolutionStage??0)===te+1&&H.startsWith(P+".")}).map(ee=>ee.path??""));return Array.from(J).map(ee=>{const H=ee.split(".").pop()??"",q=C(ee).length;return i.jsxs("button",{type:"button",className:"power-toggle",onClick:()=>K(ee,te+1),children:["Evolve to ",H.replace(/-/g," ").replace(/\b\w/g,ie=>ie.toUpperCase())," (+",q-U.length," powers)"]},ee)})})()]})]})]})}const L=x.reduce((U,te)=>{const J=te.archetype??"Unknown";return U[J]||(U[J]=[]),U[J].push(te),U},{}),B=t.archetypes??{};return i.jsxs("div",{className:"esper-evolution-section",children:[i.jsx("h4",{children:"Choose Esper Archetype"}),i.jsx("p",{className:"section-description",children:"Select a starting archetype. You can evolve further based on your priority."}),i.jsx("div",{className:"lineage-powers-grid",children:Object.entries(L).map(([U,te])=>{const J=te.filter(q=>q.evolutionStage===0),ee=J.length,H=B[U];return i.jsxs("div",{className:"lineage-power-card",children:[i.jsx("h5",{children:(H==null?void 0:H.name)??U.charAt(0).toUpperCase()+U.slice(1)}),(H==null?void 0:H.description)&&i.jsx("p",{className:"archetype-description",children:H.description}),!(H!=null&&H.description)&&i.jsxs("p",{className:"archetype-description",children:[ee," base ",ee===1?"power":"powers"]}),i.jsxs("details",{className:"power-preview",children:[i.jsxs("summary",{children:["View Base Powers (",ee,")"]}),i.jsx("ul",{className:"power-list",children:J.map(q=>{var ie;return i.jsxs("li",{className:"power-list__item",children:[i.jsx("strong",{children:q.name})," (",q.moveType,")",((ie=q.description)==null?void 0:ie.short)&&i.jsx("p",{className:"power-description__short",children:q.description.short})]},q.id)})})]}),i.jsxs("button",{type:"button",className:"power-toggle power-toggle--primary",onClick:()=>K(U,0),children:["Select ",(H==null?void 0:H.name)??U.charAt(0).toUpperCase()+U.slice(1)]})]},U)})})]})},A=(m=(g=a.find(L=>{var B;return L.kind==="esper-archetype"&&f.includes(((B=L.meta)==null?void 0:B.archetype)??"")}))==null?void 0:g.meta)==null?void 0:m.archetype,I=a.find(L=>L.kind==="esper-framework-choice"&&(L.id==="receiver-configuration"||L.id==="influencer-configuration"||L.id==="instanced-configuration"||L.id==="permanence-configuration")),O=a.find(L=>L.kind==="esper-framework-choice"&&(L.id==="targeted-scope"||L.id==="aural-scope"||L.id==="discrete-scope"||L.id==="systemic-scope")),G=E||r==="C"||A!==void 0,R=!r||r!=="C",D=()=>{var ee,H;const L=v.filter(q=>q.archetype==="foundational"),B=L.filter(q=>{var ie;return(ie=q.path)==null?void 0:ie.includes("polarity")}),U=L.filter(q=>{var ie;return(ie=q.path)==null?void 0:ie.includes("scope")});if(A){const q=v.filter(V=>V.archetype===A),ie=A==="meta-mind",Se=[],Ze={"receiver-configuration":"receiver","influencer-configuration":"influencer","instanced-configuration":"instanced","permanence-configuration":"permanence"},Be={"targeted-scope":"targeted","aural-scope":"aural","discrete-scope":"discrete","systemic-scope":"systemic"};if(I){const V=Ze[I.id]||"",ue=q.find(oe=>{var S;return oe.grantedBy===`polarity_${V}`||((S=oe.path)==null?void 0:S.includes("_all"))&&oe.mentalistPolarity===V});ue&&Se.push(ue)}if(I&&O){const V=Ze[I.id]||"",ue=Be[O.id]||"",oe=q.filter(S=>{var X;const Q=S;return Q.mentalistPolarity===V&&Q.mentalistScope===ue&&!((X=S.path)!=null&&X.includes("_all"))});oe.length===1&&Se.push(oe[0])}return i.jsxs("div",{className:"mentalist-selection-section",children:[i.jsxs("h4",{children:["Mentalist: ",A.charAt(0).toUpperCase()+A.slice(1)]}),i.jsx("button",{type:"button",className:"power-toggle power-toggle--clear",onClick:o,children:"Change Archetype"}),(I||O)&&i.jsxs("div",{className:"lineage-power-card",children:[i.jsx("h5",{children:"Foundational Configuration"}),i.jsxs("ul",{className:"power-list",children:[I&&i.jsx("li",{className:"power-list__item power-list__item--granted",children:i.jsx("strong",{children:(ee=B.find(V=>V.id===I.id))==null?void 0:ee.name})}),O&&i.jsx("li",{className:"power-list__item power-list__item--granted",children:i.jsx("strong",{children:(H=U.find(V=>V.id===O.id))==null?void 0:H.name})})]})]}),Se.length>0&&i.jsxs("div",{className:"lineage-power-card",children:[i.jsx("h5",{children:"Granted Powers"}),i.jsx("ul",{className:"power-list",children:Se.map(V=>i.jsxs("li",{className:"power-list__item power-list__item--granted",children:[i.jsx("div",{className:"power-list__header",children:i.jsxs("div",{children:[i.jsx("strong",{children:V.name}),V.moveType&&i.jsxs("span",{className:"badge badge--icon",children:[i.jsx("img",{src:"/icons/Move.png",alt:""}),i.jsx("span",{className:"badge__text",children:V.moveType})]})]})}),It(V.description,n),V.permanentCorruption!==void 0&&i.jsxs("p",{className:"power-cost",children:["Corruption: ",V.permanentCorruption]})]},V.id))})]}),!I&&i.jsxs("div",{className:"lineage-power-card",children:[i.jsxs("h5",{children:["Step 1: Choose ",ie?"Temporal Configuration":"Polarity"]}),i.jsx("p",{className:"foundation-description",children:ie?"Instanced (temporary) or Persistent (lasting)":"Receiver (pull/perceive) or Influencer (push/project)"}),i.jsx("div",{className:"mentalist-foundation",children:B.map(V=>{let ue=!1;if(ie?ue=V.id==="instanced-configuration"||V.id==="permanence-configuration":ue=V.id==="receiver-configuration"||V.id==="influencer-configuration",!ue)return null;const oe=V.id??mt(V.name??"power"),S={id:oe,lineage:"esper",label:V.name??"Unknown Power",kind:"esper-framework-choice",meta:{archetype:"foundational"}};return i.jsx("button",{type:"button",className:"power-toggle power-toggle--primary",onClick:()=>l(S),children:V.name},oe)})})]}),I&&!O&&i.jsxs("div",{className:"lineage-power-card",children:[i.jsxs("h5",{children:["Step 2: Choose ",ie?"Change Scope":"Scope"]}),i.jsx("p",{className:"foundation-description",children:ie?"Discrete (specific) or Systemic (broad)":"Targeted (individual) or Aural (area/group)"}),i.jsx("div",{className:"mentalist-foundation",children:U.map(V=>{let ue=!1;if(ie?ue=V.id==="discrete-scope"||V.id==="systemic-scope":ue=V.id==="targeted-scope"||V.id==="aural-scope",!ue)return null;const oe=V.id??mt(V.name??"power"),S={id:oe,lineage:"esper",label:V.name??"Unknown Power",kind:"esper-framework-choice",meta:{archetype:"foundational"}};return i.jsx("button",{type:"button",className:"power-toggle power-toggle--primary",onClick:()=>l(S),children:V.name},oe)})})]}),I&&O&&(()=>{const V=Ze[I.id]||"",ue=Be[O.id]||"",oe=q.filter(S=>{var X;const Q=S;return Q.mentalistPolarity===V&&Q.mentalistScope===ue&&!((X=S.path)!=null&&X.includes("_all"))});if(oe.length>1){const S=a.find(Q=>Q.kind==="esper-focus"&&oe.some(X=>X.id===Q.id));return i.jsxs("div",{className:"lineage-power-card",children:[i.jsx("h5",{children:"Step 3: Choose Power"}),i.jsx("p",{className:"foundation-description",children:"Multiple powers available - select one"}),i.jsx("div",{className:"lineage-powers-grid",children:oe.map(Q=>{const X=Q.id??mt(Q.name??"power"),je={id:X,lineage:"esper",label:Q.name??"Unknown Power",kind:"esper-focus",meta:{archetype:A}},F=(S==null?void 0:S.id)===X;return i.jsxs("div",{className:"lineage-power-card",children:[i.jsx("h6",{children:Q.name}),Q.moveType&&i.jsxs("span",{className:"badge badge--icon",children:[i.jsx("img",{src:"/icons/Move.png",alt:""}),i.jsx("span",{className:"badge__text",children:Q.moveType})]}),It(Q.description,n),i.jsx("button",{type:"button",className:`power-toggle${F?" power-toggle--active":""}`,onClick:()=>{S&&S.id!==X&&l(S),l(je)},children:F?"Selected":"Select"})]},X)})})]})}return null})()]})}const te=v.filter(q=>q.archetype!=="foundational").reduce((q,ie)=>{const Se=ie.archetype??"Unknown";return q[Se]||(q[Se]=[]),q[Se].push(ie),q},{}),J=t.archetypes??{};return i.jsxs("div",{className:"mentalist-selection-section",children:[i.jsx("h4",{children:"Choose Mentalist Archetype"}),i.jsx("p",{className:"section-description",children:"Select an archetype to begin configuring your Mentalist powers."}),i.jsx("div",{className:"lineage-powers-grid",children:Object.entries(te).map(([q,ie])=>{const Se=ie.filter(ue=>{var oe;return(oe=ue.path)==null?void 0:oe.includes("_all")}),Ze=ie.filter(ue=>{var oe;return!((oe=ue.path)!=null&&oe.includes("_all"))}),Be=Se.length+Ze.length,V=J[q];return i.jsxs("div",{className:"lineage-power-card",children:[i.jsx("h5",{children:(V==null?void 0:V.name)??q.charAt(0).toUpperCase()+q.slice(1)}),(V==null?void 0:V.description)&&i.jsx("p",{className:"archetype-description",children:V.description}),!(V!=null&&V.description)&&i.jsxs("p",{className:"archetype-description",children:[Be," ",Be===1?"power":"powers"," available"]}),i.jsxs("button",{type:"button",className:"power-toggle power-toggle--primary",onClick:()=>{const ue={id:`mentalist-${q}`,lineage:"esper",label:(V==null?void 0:V.name)??q,kind:"esper-archetype",meta:{archetype:q}};l(ue)},children:["Select ",(V==null?void 0:V.name)??q.charAt(0).toUpperCase()+q.slice(1)]})]},q)})})]})};return i.jsxs("section",{className:"lineage-powers-panel",children:[i.jsxs("header",{children:[i.jsx("h3",{children:"Esper & Mentalist Powers"}),i.jsx("p",{children:"Innate psionic abilities - evolution-based or selection-based systems."})]}),i.jsxs("aside",{className:"lineage-power-summary",children:[i.jsxs("div",{children:[i.jsx("span",{children:"Evolution Depth"}),i.jsx("strong",{children:h})]}),i.jsxs("div",{children:[i.jsx("span",{children:"Powers Selected"}),i.jsx("strong",{children:a.length})]}),w&&i.jsx("p",{className:"lineage-power-summary__note",children:w}),a.length>0&&i.jsx("button",{type:"button",className:"power-toggle power-toggle--clear",onClick:o,children:"Clear selections"})]}),R&&M(),G&&D()]})}if(e==="automata"&&uv(t)){const h=r?{A:{worker:[],soldier:["imperial"],overseer:["imperial"]},B:{worker:[],soldier:["advanced"],overseer:["advanced"]},C:{worker:[],soldier:["basic"],overseer:["basic"]},D:{worker:["advanced"],soldier:[],overseer:[]},E:{worker:["basic"],soldier:[],overseer:[]}}[r]:{worker:[],soldier:[],overseer:[]},u=t.powers.reduce((_,N)=>{const P=N.chassis??"unknown",T=N.branch??"unknown";return _[P]||(_[P]=new Set),_[P].add(T),_},{}),f=a.find(_=>_.kind==="automata-package"),x=(y=f==null?void 0:f.meta)==null?void 0:y.chassis,v=(j=f==null?void 0:f.meta)==null?void 0:j.branch,E=(k=f==null?void 0:f.meta)==null?void 0:k.category,C=(_,N,P)=>t.powers.filter(T=>{if(T.chassis!==_)return!1;if(T.augmentLevel==="general")return!0;if(T.branch!==N)return!1;const K=["basic","advanced","imperial"],M=K.indexOf(P),A=K.indexOf(T.augmentLevel??"");return A>=0&&A<=M});return i.jsxs("section",{className:"lineage-powers-panel",children:[i.jsxs("header",{children:[i.jsx("h3",{children:"Automata Configuration"}),i.jsx("p",{children:"Choose your chassis, branch, and quality level. You automatically receive ALL powers for that configuration."})]}),i.jsxs("aside",{className:"lineage-power-summary",children:[f&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("span",{children:"Selected Configuration"}),i.jsxs("strong",{children:[E==null?void 0:E.toUpperCase()," ",v==null?void 0:v.toUpperCase()," (",x==null?void 0:x.toUpperCase(),")"]})]}),i.jsx("button",{type:"button",className:"power-toggle power-toggle--clear",onClick:o,children:"Clear selection"})]}),!f&&i.jsxs("p",{children:["Select a chassis/branch configuration below. Priority ",r??""," determines available quality levels."]})]}),!f&&i.jsx("div",{className:"automata-selection-grid",children:Object.entries(u).map(([_,N])=>{const P=h[_]||[];return P.length===0?null:i.jsxs("div",{className:"automata-chassis-section",children:[i.jsxs("h4",{children:[_.charAt(0).toUpperCase()+_.slice(1)," Chassis"]}),i.jsx("div",{className:"automata-packages-grid",children:Array.from(N).map(T=>P.map(K=>{const M=`${_}-${T}-${K}`,A=C(_,T,K),I={id:M,lineage:"automata",label:`${K.toUpperCase()} ${T} (${_})`,kind:"automata-package",meta:{chassis:_,branch:T,category:K}};return i.jsxs("details",{className:"automata-package-card",children:[i.jsx("summary",{children:i.jsxs("div",{className:"automata-package-summary",children:[i.jsxs("div",{children:[i.jsxs("h5",{children:[K.toUpperCase()," ",T.charAt(0).toUpperCase()+T.slice(1)]}),i.jsxs("p",{className:"automata-package-count",children:[A.length," powers included"]})]}),i.jsx("button",{type:"button",className:"power-toggle",onClick:O=>{O.preventDefault(),l(I)},children:"Select This Configuration"})]})}),i.jsxs("div",{className:"automata-package-details",children:[i.jsx("p",{className:"automata-package-note",children:"Selecting this configuration grants you ALL of these powers automatically:"}),i.jsx("ul",{className:"power-list",children:A.map(O=>i.jsxs("li",{className:"power-list__item",children:[i.jsxs("div",{children:[i.jsx("strong",{children:O.name}),O.augmentLevel&&i.jsxs("span",{className:"badge badge--icon",children:[i.jsx("img",{src:"/icons/Augment.png",alt:""}),i.jsx("span",{className:"badge__text",children:O.augmentLevel})]}),O.moveType&&i.jsxs("span",{className:"badge badge--icon",children:[i.jsx("img",{src:"/icons/Move.png",alt:""}),i.jsx("span",{className:"badge__text",children:O.moveType})]})]}),It(O.description,n),O.outcomes&&Object.keys(O.outcomes).length>0&&i.jsx("div",{className:"power-outcomes",children:Object.entries(O.outcomes).map(([G,R])=>i.jsxs("div",{children:[i.jsxs("strong",{children:[G,":"]})," ",R]},G))})]},O.id))})]})]},M)}))})]},_)})}),f&&x&&v&&E&&i.jsxs("div",{className:"automata-selected-powers",children:[i.jsx("h4",{children:"Your Powers"}),i.jsxs("p",{children:["As a ",E.toUpperCase()," ",v," (",x,"), you have these capabilities:"]}),i.jsx("ul",{className:"power-list",children:C(x,v,E).map(_=>i.jsxs("li",{className:"power-list__item",children:[i.jsxs("div",{children:[i.jsx("strong",{children:_.name}),_.augmentLevel&&i.jsxs("span",{className:"badge badge--icon",children:[i.jsx("img",{src:"/icons/Augment.png",alt:""}),i.jsx("span",{className:"badge__text",children:_.augmentLevel})]}),_.moveType&&i.jsxs("span",{className:"badge badge--icon",children:[i.jsx("img",{src:"/icons/Move.png",alt:""}),i.jsx("span",{className:"badge__text",children:_.moveType})]})]}),It(_.description,n),_.outcomes&&Object.keys(_.outcomes).length>0&&i.jsx("div",{className:"power-outcomes",children:Object.entries(_.outcomes).map(([N,P])=>i.jsxs("div",{children:[i.jsxs("strong",{children:[N,":"]})," ",P]},N))})]},_.id))})]})]})}return i.jsxs("section",{className:"lineage-powers-panel",children:[i.jsx("h3",{children:"Lineage Powers"}),i.jsx("p",{children:"Power data structure for this lineage is not recognized. Check the source files for updates."})]})}function pv({priorities:e,selected:t,onSelect:n,canReveal:r,revealMechanics:s,onToggleReveal:l,notes:o,onUpdateNotes:a,powerSet:c,powers:d,onTogglePower:p,onClearPowers:g}){const m=e.lineage,y=z.useMemo(()=>tp(t),[t]),j=r&&s;return i.jsxs("div",{className:"stage stage--lineage",children:[i.jsxs("header",{className:"stage__header",children:[i.jsxs("div",{children:[i.jsx("h2",{children:"Lineage"}),i.jsx("p",{children:"The letter you assign to Lineage defines how far from humanity you step. Explore each lineage's aesthetic, pick the one that sings to your table, then reveal mechanics when ready."})]}),i.jsx("div",{className:"stage__actions",children:i.jsx("button",{type:"button",onClick:l,className:`reveal-toggle ${s?"active":""}`,disabled:!r,children:r?s?"Hide mechanical truths":"Reveal mechanical truths":"GM access required"})})]}),i.jsx("section",{className:"lineage-grid",children:ep.map(k=>{const w=k.key===t,h=m?k.priorityImpacts[m]:null;return i.jsxs("article",{className:`lineage-card ${w?"is-active":""}`,style:{borderColor:w?k.aesthetic.accent:"rgba(255,255,255,0.08)",boxShadow:w?`0 12px 32px ${k.aesthetic.accent}40`:void 0,backgroundImage:k.aesthetic.texture},children:[i.jsxs("header",{children:[i.jsx("h3",{children:k.name}),i.jsx("p",{className:"lineage-card__tagline",children:k.tagline})]}),i.jsx("p",{children:k.summary}),i.jsxs("div",{className:"lineage-card__priority",children:[i.jsxs("span",{children:["With Priority ",m??"",":"]}),i.jsx("p",{children:h??"Assign a priority letter to see what changes."})]}),i.jsxs("details",{children:[i.jsx("summary",{children:"First impressions"}),i.jsx("p",{children:k.narrativeHook})]}),s&&r&&i.jsxs("details",{open:!0,children:[i.jsx("summary",{children:"GM Whisper"}),i.jsx("p",{children:k.gmWhisper})]}),i.jsx("footer",{children:i.jsx("button",{type:"button",className:"lineage-card__choose",onClick:()=>n(k.key),children:w?"Selected":"Choose Lineage"})})]},k.key)})}),i.jsx(dv,{lineage:t,lineagePriority:m,powerData:c,gmEnabled:j,selections:d,onToggleSelection:p,onClearSelections:g}),i.jsx("section",{className:"lineage-notes",children:i.jsxs("label",{className:"field",children:[i.jsx("span",{children:"Lineage Notes & Promises"}),i.jsx("textarea",{value:o,onChange:k=>a(k.target.value),placeholder:"Record patron obligations, corruption tells, and aesthetic cues for later sessions."})]})}),y&&i.jsxs("aside",{className:"lineage-highlight",style:{borderColor:y.aesthetic.accent},children:[i.jsxs("h4",{children:["Echos of ",y.name]}),i.jsxs("p",{children:["Layer the UI palette with ",y.aesthetic.accent,". Consider swapping ambient sound or card frames to mirror the lineage vibe when this character is active at the table."]})]})]})}const yc=e=>{if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return Number.POSITIVE_INFINITY},Zn=e=>Number.isFinite(e)?e:0,fv=e=>{const t=Zn(e.reach)+Zn(e.influence);return e.backgroundSynergy??!1?t*.5:t},hv=e=>{const t=Zn(e.loyalty)+Zn(e.competence);return e.backgroundSynergy??!1?t*.5:t},mv=e=>{const t=Zn(e.quality);return e.backgroundSynergy??!1?t*.5:t},gv=(e,t)=>Number.isFinite(e)?e:t;function Nn({value:e,onChange:t,min:n=0,max:r}){const s=()=>{const o=e+1;(r===void 0||o<=r)&&t(o)},l=()=>{const o=e-1;o>=n&&t(o)};return i.jsxs("div",{className:"number-input-wrapper",children:[i.jsx("input",{type:"number",min:n,max:r,value:e,onChange:o=>t(Number(o.target.value)||0)}),i.jsxs("div",{className:"number-input-controls",children:[i.jsx("button",{type:"button",className:"number-input-btn",onClick:s,disabled:r!==void 0&&e>=r,children:""}),i.jsx("button",{type:"button",className:"number-input-btn",onClick:l,disabled:e<=n,children:""})]})]})}const vv=(e,t,n,r)=>{var a,c;if(!e)return{value:0,requiresApproval:!1};const s=(a=n.properties.tenure)==null?void 0:a[e],l=(c=t.properties.tenure)==null?void 0:c[e];if(s!=null&&s.cost)return{value:r,requiresApproval:!0,note:s.cost};const o=typeof(s==null?void 0:s.multiplier)=="number"?s.multiplier:typeof(l==null?void 0:l.costMultiplier)=="number"?l.costMultiplier:null;return typeof o=="number"&&Number.isFinite(o)&&o>0?{value:Math.max(1,Math.round(o)),requiresApproval:!!(l!=null&&l.special)}:{value:0,requiresApproval:!0}},yv=(e,t,n,r)=>{var c,d;if(!e)return{value:0,requiresApproval:!1};const s=(c=n.properties.zoning)==null?void 0:c[e],l=(d=t.properties.zoning)==null?void 0:d[e],o=typeof(s==null?void 0:s.baseCost)=="number"?s.baseCost:typeof(l==null?void 0:l.baseCost)=="number"?l.baseCost:null;if(typeof o=="number"&&Number.isFinite(o)&&o>0)return{value:o,requiresApproval:!1};const a=typeof(s==null?void 0:s.baseCost)=="string"?s.baseCost:typeof(l==null?void 0:l.baseCost)=="string"?l.baseCost:null;return{value:r,requiresApproval:!0,note:a}};function xv({priority:e,system:t,costs:n,contacts:r,retainers:s,properties:l,goods:o,liquid:a,onAddContact:c,onUpdateContact:d,onRemoveContact:p,onAddRetainer:g,onUpdateRetainer:m,onRemoveRetainer:y,onAddProperty:j,onUpdateProperty:k,onRemoveProperty:w,onAddGoods:h,onUpdateGoods:u,onRemoveGoods:f,onUpdateLiquid:x,notes:v,onUpdateNotes:E}){var Be,V,ue,oe;const C=e?t.resourcePoints[e]:null,_=(C==null?void 0:C.points)??0,N=yc(C==null?void 0:C.maxQuality),P=yc(C==null?void 0:C.maxCombined),T=(C==null?void 0:C.specializations)??0,K=gv(P,(C==null?void 0:C.points)??10),M=Array.isArray(r)?r:[],A=Array.isArray(s)?s:[],I=Array.isArray(l)?l:[],O=Array.isArray(o)?o:[],G=M.map(S=>{const Q=fv(S),X=[];return Number.isFinite(N)&&S.reach>N&&X.push(`Reach exceeds max quality ${N}`),Number.isFinite(N)&&S.influence>N&&X.push(`Influence exceeds max quality ${N}`),Number.isFinite(P)&&Q>P&&X.push(`Total reach + influence exceeds combined maximum ${P}`),{entry:S,cost:Q,issues:X}}),R=A.map(S=>{const Q=hv(S),X=[];return Number.isFinite(N)&&S.competence>N&&X.push(`Competence exceeds max quality ${N}`),Number.isFinite(N)&&S.loyalty>N&&X.push(`Loyalty exceeds max quality ${N}`),Number.isFinite(P)&&Q>P&&X.push(`Total loyalty + competence exceeds combined maximum ${P}`),{entry:S,cost:Q,issues:X}}),D=I.map(S=>{const Q=vv(S.tenure,t,n,K),X=yv(S.zoning,t,n,K),je=Q.value+X.value,F=S.backgroundSynergy??!1?je*.5:je,_e=[];return(Q.requiresApproval||X.requiresApproval)&&_e.push("Selection requires GM approval."),Q.note&&_e.push(Q.note),X.note&&_e.push(X.note),Number.isFinite(N)&&Q.value>N&&_e.push(`Tenure rating exceeds max quality ${N}`),Number.isFinite(N)&&X.value>N&&_e.push(`Zoning rating exceeds max quality ${N}`),Number.isFinite(P)&&F>P&&_e.push(`Total tenure + zoning exceeds combined maximum ${P}`),{entry:S,cost:F,issues:_e,tenureValue:Q.value,zoningValue:X.value}}),L=O.map(S=>{const Q=mv(S),X=[];return Number.isFinite(N)&&S.quality>N&&X.push(`Quality exceeds max quality ${N}`),Number.isFinite(P)&&S.quality>P&&X.push(`Quality exceeds combined maximum ${P}`),{entry:S,cost:Q,issues:X}}),B=G.reduce((S,Q)=>S+Q.cost,0)+R.reduce((S,Q)=>S+Q.cost,0)+D.reduce((S,Q)=>S+Q.cost,0)+L.reduce((S,Q)=>S+Q.cost,0)+Zn(a),U=_-B,te=C?U<0:B>0,J=G.filter(({entry:S})=>!!S.specialization).length+R.filter(({entry:S})=>!!S.specialization).length+D.filter(({entry:S})=>!!S.specialization).length+L.filter(({entry:S})=>!!S.specialization).length,H=T-J<0,q=((Be=t.contacts)==null?void 0:Be.specializations)??[],ie=((V=t.retainers)==null?void 0:V.specializations)??[],Se=((ue=t.properties)==null?void 0:ue.specializations)??[],Ze=((oe=t.goods)==null?void 0:oe.specializations)??[];return i.jsxs("div",{className:"stage stage--resources",children:[i.jsxs("header",{className:"stage__header",children:[i.jsxs("div",{children:[i.jsx("h2",{children:"Resources"}),i.jsx("p",{children:"Spend your Resource Points to define the allies, havens, and gear that keep you alive. Balance reach and quality carefully  every edge requires upkeep and trust."})]}),i.jsxs("aside",{className:"resource-summary",children:[i.jsxs("span",{className:"resource-summary__label",children:["Priority ",e??""]}),C?i.jsxs("dl",{children:[i.jsxs("div",{children:[i.jsx("dt",{children:"Available Points"}),i.jsx("dd",{children:_})]}),i.jsxs("div",{className:ae({"resource-summary__warning":te}),children:[i.jsx("dt",{children:"Spent"}),i.jsx("dd",{children:B})]}),i.jsxs("div",{className:ae({"resource-summary__warning":te}),children:[i.jsx("dt",{children:"Remaining"}),i.jsx("dd",{children:Math.max(0,U)})]}),i.jsxs("div",{children:[i.jsx("dt",{children:"Quality Cap"}),i.jsx("dd",{children:Number.isFinite(N)?N:""})]}),i.jsxs("div",{children:[i.jsx("dt",{children:"Combined Cap"}),i.jsx("dd",{children:Number.isFinite(P)?P:""})]}),i.jsxs("div",{className:ae({"resource-summary__warning":H}),children:[i.jsx("dt",{children:"Specializations"}),i.jsxs("dd",{children:[J," / ",T]})]})]}):i.jsx("p",{children:"Assign a resources priority to unlock your pool."})]})]}),i.jsxs("div",{className:ae("resource-ledger",{"resource-ledger--warning":te}),children:[i.jsx("strong",{children:B})," resource points allocated",C?` of ${_}`:"",".",te&&i.jsx("span",{className:"resource-ledger__warning",children:"You are overspending. Adjust your assets or raise your priority."})]}),i.jsxs("div",{className:ae("resource-ledger",{"resource-ledger--warning":H}),children:["Specializations used: ",i.jsx("strong",{children:J})," of ",T,".",H&&i.jsx("span",{className:"resource-ledger__warning",children:"Only one specialization per asset until the limit is raised."})]}),i.jsxs("div",{className:"resource-grid",children:[i.jsxs("section",{className:"resource-section",children:[i.jsxs("header",{className:"resource-section__header",children:[i.jsx("h3",{children:"Contacts"}),i.jsx("button",{type:"button",onClick:c,children:"Add Contact"})]}),G.length===0?i.jsx("p",{className:"resource-section__empty",children:"No contacts recorded. Add a fixer, broker, or confidant."}):G.map(({entry:S,cost:Q,issues:X})=>{const je=!S.gmApproved;return i.jsxs("article",{className:ae("resource-card",{"resource-card--flagged":je}),children:[i.jsxs("header",{className:"resource-card__header",children:[i.jsx("input",{className:"resource-card__title",value:S.name,onChange:F=>d(S.id,{name:F.target.value}),placeholder:"Contact name"}),i.jsxs("span",{className:"resource-card__cost",children:["Cost ",Q]})]}),i.jsxs("label",{className:"resource-card__field",children:[i.jsx("span",{children:"Profile"}),i.jsx("textarea",{value:S.description,onChange:F=>d(S.id,{description:F.target.value}),placeholder:"Why does this person answer your call?"})]}),i.jsxs("div",{className:"resource-card__grid",children:[i.jsxs("label",{children:[i.jsx("span",{children:"Reach"}),i.jsx(Nn,{value:S.reach,onChange:F=>d(S.id,{reach:F}),min:0,max:Number.isFinite(N)?N:void 0})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Influence"}),i.jsx(Nn,{value:S.influence,onChange:F=>d(S.id,{influence:F}),min:0,max:Number.isFinite(N)?N:void 0})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Specialization"}),i.jsxs("select",{value:S.specialization??"",onChange:F=>d(S.id,{specialization:F.target.value?F.target.value:null}),children:[i.jsx("option",{value:"",children:"None"}),q.map(F=>i.jsx("option",{value:F,children:F},F))]})]})]}),X.length>0&&i.jsx("ul",{className:"resource-card__issues",children:X.map((F,_e)=>i.jsx("li",{children:F},_e))}),i.jsxs("footer",{className:"resource-card__footer",children:[i.jsx("button",{type:"button",onClick:()=>p(S.id),className:"link",children:"Remove Contact"}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{type:"button",onClick:()=>{const F=!(S.backgroundSynergy??!1);d(S.id,{backgroundSynergy:F,gmApproved:F?!1:S.gmApproved})},className:ae("badge",{"badge--attention":S.backgroundSynergy??!1}),children:S.backgroundSynergy??!1?"Background Synergy (0.5x)":"Mark Background Synergy"}),i.jsx("button",{type:"button",onClick:()=>d(S.id,{gmApproved:!S.gmApproved}),className:ae("badge",{"badge--attention":je}),children:S.gmApproved?"GM Approved":"GM Approval Required"})]})]})]},S.id)})]}),i.jsxs("section",{className:"resource-section",children:[i.jsxs("header",{className:"resource-section__header",children:[i.jsx("h3",{children:"Retainers"}),i.jsx("button",{type:"button",onClick:g,children:"Add Retainer"})]}),R.length===0?i.jsx("p",{className:"resource-section__empty",children:"No retainers enlisted. Secure a loyal operator."}):R.map(({entry:S,cost:Q,issues:X})=>{const je=!S.gmApproved;return i.jsxs("article",{className:ae("resource-card",{"resource-card--flagged":je}),children:[i.jsxs("header",{className:"resource-card__header",children:[i.jsx("input",{className:"resource-card__title",value:S.name,onChange:F=>m(S.id,{name:F.target.value}),placeholder:"Retainer name"}),i.jsxs("span",{className:"resource-card__cost",children:["Cost ",Q]})]}),i.jsxs("label",{className:"resource-card__field",children:[i.jsx("span",{children:"Role"}),i.jsx("textarea",{value:S.description,onChange:F=>m(S.id,{description:F.target.value}),placeholder:"What do they handle for you?"})]}),i.jsxs("div",{className:"resource-card__grid",children:[i.jsxs("label",{children:[i.jsx("span",{children:"Competence"}),i.jsx(Nn,{value:S.competence,onChange:F=>m(S.id,{competence:F}),min:0,max:Number.isFinite(N)?N:void 0})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Loyalty"}),i.jsx(Nn,{value:S.loyalty,onChange:F=>m(S.id,{loyalty:F}),min:0,max:Number.isFinite(N)?N:void 0})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Specialization"}),i.jsxs("select",{value:S.specialization??"",onChange:F=>m(S.id,{specialization:F.target.value?F.target.value:null}),children:[i.jsx("option",{value:"",children:"None"}),ie.map(F=>i.jsx("option",{value:F,children:F},F))]})]})]}),X.length>0&&i.jsx("ul",{className:"resource-card__issues",children:X.map((F,_e)=>i.jsx("li",{children:F},_e))}),i.jsxs("footer",{className:"resource-card__footer",children:[i.jsx("button",{type:"button",onClick:()=>y(S.id),className:"link",children:"Remove Retainer"}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{type:"button",onClick:()=>{const F=!(S.backgroundSynergy??!1);m(S.id,{backgroundSynergy:F,gmApproved:F?!1:S.gmApproved})},className:ae("badge",{"badge--attention":S.backgroundSynergy??!1}),children:S.backgroundSynergy??!1?"Background Synergy (0.5x)":"Mark Background Synergy"}),i.jsx("button",{type:"button",onClick:()=>m(S.id,{gmApproved:!S.gmApproved}),className:ae("badge",{"badge--attention":je}),children:S.gmApproved?"GM Approved":"GM Approval Required"})]})]})]},S.id)})]}),i.jsxs("section",{className:"resource-section",children:[i.jsxs("header",{className:"resource-section__header",children:[i.jsx("h3",{children:"Properties"}),i.jsx("button",{type:"button",onClick:j,children:"Add Property"})]}),D.length===0?i.jsx("p",{className:"resource-section__empty",children:"No safehouses or fronts secured. Stake your claim."}):D.map(({entry:S,cost:Q,issues:X,tenureValue:je,zoningValue:F})=>{const _e=!S.gmApproved;return i.jsxs("article",{className:ae("resource-card",{"resource-card--flagged":_e}),children:[i.jsxs("header",{className:"resource-card__header",children:[i.jsx("input",{className:"resource-card__title",value:S.name,onChange:le=>k(S.id,{name:le.target.value}),placeholder:"Property name"}),i.jsxs("span",{className:"resource-card__cost",children:["Cost ",Q]})]}),i.jsxs("label",{className:"resource-card__field",children:[i.jsx("span",{children:"Description"}),i.jsx("textarea",{value:S.description,onChange:le=>k(S.id,{description:le.target.value}),placeholder:"What makes this space yours?"})]}),i.jsxs("div",{className:"resource-card__grid resource-card__grid--wide",children:[i.jsxs("label",{children:[i.jsx("span",{children:"Tenure"}),i.jsxs("select",{value:S.tenure,onChange:le=>k(S.id,{tenure:le.target.value}),children:[i.jsx("option",{value:"",children:"Select tenure"}),Object.keys(t.properties.tenure).map(le=>i.jsx("option",{value:le,children:le},le))]}),i.jsx("small",{children:je?`Value ${je}`:"Pick a claim type"})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Zoning"}),i.jsxs("select",{value:S.zoning,onChange:le=>k(S.id,{zoning:le.target.value}),children:[i.jsx("option",{value:"",children:"Select function"}),Object.keys(t.properties.zoning).map(le=>i.jsx("option",{value:le,children:le},le))]}),i.jsx("small",{children:F?`Value ${F}`:"Pick a function"})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Ward"}),i.jsx("input",{value:S.ward,onChange:le=>k(S.id,{ward:le.target.value}),placeholder:"Ward or district"})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Specialization"}),i.jsxs("select",{value:S.specialization??"",onChange:le=>k(S.id,{specialization:le.target.value?le.target.value:null}),children:[i.jsx("option",{value:"",children:"None"}),Se.map(le=>i.jsx("option",{value:le,children:le},le))]})]})]}),X.length>0&&i.jsx("ul",{className:"resource-card__issues",children:X.map((le,lt)=>i.jsx("li",{children:le},lt))}),i.jsxs("footer",{className:"resource-card__footer",children:[i.jsx("button",{type:"button",onClick:()=>w(S.id),className:"link",children:"Remove Property"}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{type:"button",onClick:()=>{const le=!(S.backgroundSynergy??!1);k(S.id,{backgroundSynergy:le,gmApproved:le?!1:S.gmApproved})},className:ae("badge",{"badge--attention":S.backgroundSynergy??!1}),children:S.backgroundSynergy??!1?"Background Synergy (0.5x)":"Mark Background Synergy"}),i.jsx("button",{type:"button",onClick:()=>k(S.id,{gmApproved:!S.gmApproved}),className:ae("badge",{"badge--attention":_e}),children:S.gmApproved?"GM Approved":"GM Approval Required"})]})]})]},S.id)})]}),i.jsxs("section",{className:"resource-section",children:[i.jsxs("header",{className:"resource-section__header",children:[i.jsx("h3",{children:"Goods & Stockpiles"}),i.jsx("button",{type:"button",onClick:h,children:"Add Goods"})]}),L.length===0?i.jsx("p",{className:"resource-section__empty",children:"No caches documented. Set aside kit or contraband."}):L.map(({entry:S,cost:Q,issues:X})=>{const je=!S.gmApproved;return i.jsxs("article",{className:ae("resource-card",{"resource-card--flagged":je}),children:[i.jsxs("header",{className:"resource-card__header",children:[i.jsx("input",{className:"resource-card__title",value:S.name,onChange:F=>u(S.id,{name:F.target.value}),placeholder:"Goods cache"}),i.jsxs("span",{className:"resource-card__cost",children:["Cost ",Q]})]}),i.jsxs("label",{className:"resource-card__field",children:[i.jsx("span",{children:"Contents"}),i.jsx("textarea",{value:S.description,onChange:F=>u(S.id,{description:F.target.value}),placeholder:"Describe the stash, weaponry, or leverage."})]}),i.jsxs("div",{className:"resource-card__grid",children:[i.jsxs("label",{children:[i.jsx("span",{children:"Quality"}),i.jsx(Nn,{value:S.quality,onChange:F=>u(S.id,{quality:F}),min:0,max:Number.isFinite(N)?N:void 0})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Specialization"}),i.jsxs("select",{value:S.specialization??"",onChange:F=>u(S.id,{specialization:F.target.value?F.target.value:null}),children:[i.jsx("option",{value:"",children:"None"}),Ze.map(F=>i.jsx("option",{value:F,children:F},F))]})]})]}),X.length>0&&i.jsx("ul",{className:"resource-card__issues",children:X.map((F,_e)=>i.jsx("li",{children:F},_e))}),i.jsxs("footer",{className:"resource-card__footer",children:[i.jsx("button",{type:"button",onClick:()=>f(S.id),className:"link",children:"Remove Goods"}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{type:"button",onClick:()=>{const F=!(S.backgroundSynergy??!1);u(S.id,{backgroundSynergy:F,gmApproved:F?!1:S.gmApproved})},className:ae("badge",{"badge--attention":S.backgroundSynergy??!1}),children:S.backgroundSynergy??!1?"Background Synergy (0.5x)":"Mark Background Synergy"}),i.jsx("button",{type:"button",onClick:()=>u(S.id,{gmApproved:!S.gmApproved}),className:ae("badge",{"badge--attention":je}),children:S.gmApproved?"GM Approved":"GM Approval Required"})]})]})]},S.id)})]})]}),i.jsxs("section",{className:"resource-liquid",children:[i.jsxs("label",{children:[i.jsx("span",{children:"Liquid Assets"}),i.jsx(Nn,{value:a,onChange:x,min:0})]}),i.jsx("p",{children:"Reserve unassigned points for cash, favors, or future acquisitions."})]}),i.jsx("section",{children:i.jsxs("label",{className:"field",children:[i.jsx("span",{children:"Resource Stories"}),i.jsx("textarea",{value:v,onChange:S=>E(S.target.value),placeholder:"Record fronts, debts, leverage, and the strings attached to each asset."})]})}),i.jsxs("section",{className:"resource-reference",children:[i.jsxs("article",{children:[i.jsx("h4",{children:"Contact Scales"}),i.jsxs("div",{className:"resource-reference__grid",children:[i.jsxs("div",{children:[i.jsx("h5",{children:"Reach"}),i.jsx("ul",{children:Object.entries(t.contacts.reachScale).map(([S,Q])=>i.jsxs("li",{children:[i.jsx("span",{className:"scale__value",children:S}),i.jsx("span",{children:Q})]},S))})]}),i.jsxs("div",{children:[i.jsx("h5",{children:"Influence"}),i.jsx("ul",{children:Object.entries(t.contacts.influenceScale).map(([S,Q])=>i.jsxs("li",{children:[i.jsx("span",{className:"scale__value",children:S}),i.jsx("span",{children:Q})]},S))})]})]})]}),i.jsxs("article",{children:[i.jsx("h4",{children:"Retainer Scales"}),i.jsxs("div",{className:"resource-reference__grid",children:[i.jsxs("div",{children:[i.jsx("h5",{children:"Competence"}),i.jsx("ul",{children:Object.entries(t.retainers.competenceScale).map(([S,Q])=>i.jsxs("li",{children:[i.jsx("span",{className:"scale__value",children:S}),i.jsx("span",{children:Q})]},S))})]}),i.jsxs("div",{children:[i.jsx("h5",{children:"Loyalty"}),i.jsx("ul",{children:Object.entries(t.retainers.loyaltyScale).map(([S,Q])=>i.jsxs("li",{children:[i.jsx("span",{className:"scale__value",children:S}),i.jsx("span",{children:Q})]},S))})]})]})]}),i.jsxs("article",{children:[i.jsx("h4",{children:"Tenure Reference"}),i.jsx("ul",{className:"resource-reference__list",children:Object.entries(t.properties.tenure).map(([S,Q])=>i.jsxs("li",{children:[i.jsx("strong",{children:S}),Q.description&&i.jsxs("span",{children:["  ",Q.description]})]},S))})]})]})]})}const jv={A:5,B:4,C:3,D:2,E:1},kv={A:3,B:2,C:2,D:1,E:1};function wv({priority:e,background:t,skills:n,onUpdate:r,onUpdateSpecializations:s,onUpdateCustomSpecializations:l,data:o}){const a=n.backgroundSpecializations||[],c=n.backgroundCustomSpecializations||[],[d,p]=z.useState([]),[g,m]=z.useState(new Set);z.useEffect(()=>{if(c.length===0)p([{id:crypto.randomUUID(),value:"",checked:!1}]);else{const A=c.map(I=>({id:crypto.randomUUID(),value:I,checked:!0}));A.push({id:crypto.randomUUID(),value:"",checked:!1}),p(A)}},[c.length]);const y=z.useMemo(()=>Object.entries(o),[o]),j=t.title&&o[t.title]?o[t.title]:void 0,k=z.useMemo(()=>j!=null&&j.professions?new Map(j.professions.map(A=>[A.priority,A])):new Map,[j==null?void 0:j.professions]),w=e?k.get(e):void 0,h=e?jv[e]:0,u=e?kv[e]:0,f=t.title||"Choose a background",x=(w==null?void 0:w.description)||(j==null?void 0:j.description)||"Select a background below to load its story, talents, and contacts.",v=(j==null?void 0:j.skillSpecializationOptions)??[],E=(j==null?void 0:j.resourceSynergyExamples)??[],C=A=>{var G;const I=o[A],O={title:A};I&&(!t.tierNotes&&I.description&&(O.tierNotes=I.description),!t.contacts&&((G=I.resourceSynergyExamples)!=null&&G.length)&&(O.contacts=I.resourceSynergyExamples.join(`
`))),r(O)},_=A=>{const I=a.includes(A),O=d.filter(R=>R.checked&&R.value.trim()).length,G=a.length+O;I?s(a.filter(R=>R!==A)):G<u&&s([...a,A])},N=A=>{m(I=>{const O=new Set(I);return O.has(A)?O.delete(A):O.add(A),O})},P=(A,I)=>{const O=d.map(G=>G.id===A?{...G,value:I}:G);p(O),K(O)},T=A=>{const I=d.map(G=>G.id===A?{...G,checked:!G.checked}:G);p(I);const O=I.find(G=>G.id===A);O&&O.checked&&O.value.trim()&&(I.some(R=>!R.checked&&!R.value.trim())||(I.push({id:crypto.randomUUID(),value:"",checked:!1}),p(I))),K(I)},K=A=>{const I=A.filter(O=>O.checked&&O.value.trim()).map(O=>O.value.trim());l(I)},M=a.length+d.filter(A=>A.checked&&A.value.trim()).length;return i.jsxs("div",{className:"stage stage--background",children:[i.jsxs("header",{className:"stage__header",children:[i.jsxs("div",{children:[i.jsx("h2",{children:"Background"}),i.jsx("p",{children:"Backgrounds tell the table who you were before the Long Night took hold. Use the narrative scope guidance to outline your reach and obligations."})]}),i.jsxs("aside",{className:"background-callout",children:[i.jsxs("div",{className:"background-callout__header",children:[i.jsxs("span",{className:"background-callout__label",children:["Priority ",e??""," ",e&&` ${h} Background Points`]}),i.jsx("h3",{children:f}),w&&i.jsx("h4",{className:"background-callout__profession-title",children:w.title})]}),i.jsx("p",{className:"background-callout__body",children:x}),(v.length>0||E.length>0)&&i.jsxs("div",{className:"background-callout__tags",children:[v.length>0&&i.jsxs("div",{children:[i.jsxs("span",{className:"background-callout__tag-label",children:["Signature Skills (",u," ",u===1?"slot":"slots",")"]}),i.jsx("ul",{children:v.map(A=>i.jsx("li",{children:A},A))})]}),E.length>0&&i.jsxs("div",{children:[i.jsx("span",{className:"background-callout__tag-label",children:"Example Resource Synergies (0.5x cost)"}),i.jsx("ul",{children:E.map(A=>i.jsx("li",{children:A},A))})]})]})]})]}),j&&v.length>0&&i.jsxs("section",{className:"background-specializations",children:[i.jsx("h3",{children:"Select Background Specializations"}),i.jsxs("p",{className:"background-specializations__description",children:["Choose up to ",u," specialization",u!==1?"s":""," from your background's signature skills. These do NOT count against your skill specialization limit."]}),i.jsx("div",{className:"background-specializations__options",children:v.map(A=>{const I=a.includes(A),O=!I&&a.length>=u;return i.jsxs("label",{className:`background-specialization-option ${I?"selected":""} ${O?"disabled":""}`,children:[i.jsx("input",{type:"checkbox",checked:I,disabled:O,onChange:()=>_(A)}),i.jsx("span",{children:A})]},A)})}),i.jsxs("div",{className:"background-specializations__custom",children:[i.jsx("h4",{children:"Custom Specializations (Optional, require GM approval)"}),i.jsx("p",{children:"Create your own specialization if the suggestions don't fit your character."}),d.map(A=>{const I=!A.checked&&M>=u;return i.jsxs("label",{className:`background-specialization-option ${A.checked?"selected":""} ${I?"disabled":""}`,children:[i.jsx("input",{type:"checkbox",checked:A.checked,disabled:I,onChange:()=>T(A.id)}),i.jsx("input",{type:"text",className:"custom-spec-input",value:A.value,placeholder:"Ex: Engineering: Runesmithing, Social: Underworld Contacts, etc.",onChange:O=>P(A.id,O.target.value)})]},A.id)})]})]}),i.jsx("section",{className:"background-catalog",children:y.map(([A,I])=>{var D,L,B;const O=A===t.title,G=e&&I.professions?I.professions.find(U=>U.priority===e):void 0,R=g.has(A);return i.jsxs("article",{className:`background-card ${O?"active":""} ${R?"expanded":"collapsed"}`,children:[i.jsxs("header",{className:"background-card__header",children:[i.jsxs("div",{children:[i.jsx("h3",{children:A}),i.jsx("p",{children:I.description})]}),i.jsxs("div",{className:"background-card__actions",children:[i.jsx("button",{type:"button",onClick:()=>C(A),children:O?"Selected":"Adopt Background"}),i.jsx("button",{type:"button",className:"background-card__toggle",onClick:()=>N(A),"aria-label":R?"Collapse details":"Expand details",children:R?" Hide Details":" View Details"})]})]}),R&&i.jsxs(i.Fragment,{children:[e&&G&&i.jsxs("section",{className:"background-card__section",children:[i.jsxs("h4",{children:["Your Profession Tier (Priority ",e,")"]}),i.jsx("div",{className:"background-card__professions",children:i.jsxs("div",{className:"background-card__profession highlight",children:[i.jsxs("div",{className:"background-card__profession-header",children:[i.jsx("span",{className:"badge",children:G.priority}),i.jsx("strong",{children:G.title})]}),i.jsx("p",{children:G.description})]})})]}),!e&&(((D=I.professions)==null?void 0:D.length)??0)>0&&i.jsxs("section",{className:"background-card__section",children:[i.jsx("h4",{children:"Profession Ladder"}),i.jsx("p",{className:"background-card__hint",children:"Assign a priority to Background to see your profession tier"})]}),(((L=I.skillSpecializationOptions)==null?void 0:L.length)??0)>0&&i.jsxs("section",{className:"background-card__section",children:[i.jsxs("h4",{children:["Skill Specializations (",u," ",u===1?"slot":"slots",")"]}),i.jsx("ul",{children:I.skillSpecializationOptions.map(U=>i.jsx("li",{children:U},U))})]}),(((B=I.resourceSynergyExamples)==null?void 0:B.length)??0)>0&&i.jsxs("section",{className:"background-card__section",children:[i.jsx("h4",{children:"Example Resource Synergies (0.5x cost)"}),i.jsx("ul",{children:I.resourceSynergyExamples.map(U=>i.jsx("li",{children:U},U))})]})]})]},A)})})]})}const Sv={A:{maxRank:5,points:10,specializations:2},B:{maxRank:4,points:14,specializations:2},C:{maxRank:3,points:10,specializations:1},D:{maxRank:3,points:8,specializations:1},E:{maxRank:2,points:4,specializations:0}},Nv="Custom options are provisional until your GM approves them.";function Cv({priority:e,data:t,ratings:n,onChangeRating:r,specializations:s,onToggleSpecialization:l,onRemoveSpecialization:o,onAddCustomSpecialization:a,backgroundSpecializations:c,backgroundCustomSpecializations:d,backgroundOptions:p,onSetBackgroundSpecializations:g,onSetBackgroundCustomSpecializations:m,notes:y,onUpdateNotes:j}){const[k,w]=z.useState(""),h=c||[],u=d||[],f=e?Sv[e]:null,x=z.useMemo(()=>Object.values(n).reduce((M,A)=>M+A,0),[n]),v=f?Math.max(f.points-x,0):0,E=s.filter(M=>M.type!=="background"),C=f?Math.max(f.specializations-E.length,0):0,_=z.useMemo(()=>new Map(s.map(M=>[M.id,M])),[s]);z.useEffect(()=>{if(!t||h.length===0)return;const M=[];Object.entries(t.skills).forEach(([A,I])=>{I.forEach(O=>{const G=`${A}:${O.id}`;O.specializations.forEach(R=>{if(h.includes(R.name)){const D=`pre:${G}:${R.id??R.name}`;_.has(D)||M.push({id:D,label:`${O.name}  ${R.name}`,type:"background",skillId:G,gmApproved:!0})}})})}),M.length>0&&M.forEach(A=>l(A))},[t,h,_,l]);const N=(M,A)=>I=>{const O=Number(I.target.value);if(!f)return;const G=Math.max(0,Math.min(O,f.maxRank)),R=x-A+G;let D=G;R>f.points&&(D=A+v),D!==A&&r(M,D)},P=()=>{if(!f)return;const M=k.trim();M&&f.specializations!==0&&C!==0&&(a(M),w(""))},T=(M,A,I,O)=>{if(!f)return;const G=`pre:${M}:${I??O}`;if(!_.has(G)&&f.specializations>0&&C===0)return;const R={id:G,label:`${A}  ${O}`,type:"predefined",skillId:M,gmApproved:!0};l(R)},K=f?f.specializations>0&&C>0:!1;return p.filter(Boolean),i.jsxs("div",{className:"stage stage--skills",children:[i.jsxs("header",{className:"stage__header",children:[i.jsxs("div",{children:[i.jsx("h2",{children:"Skills & Disciplines"}),i.jsx("p",{children:"Allocate your skill points, respecting the maximum rank for your priority. Claim a handful of specializations to spotlight signature movescustom picks stay flagged until your GM approves them."})]}),i.jsxs("aside",{className:`skills-limit ${v===0?"skills-limit--exhausted":v<=2?"skills-limit--low":""}`,children:[i.jsxs("span",{children:["Priority ",e??""]}),f?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:v===0?"text-warning":"",children:`${v} of ${f.points} skill points remaining`}),i.jsxs("p",{children:["Specializations: ",`${Math.max(C,0)} of ${f.specializations} remaining`]})]}):i.jsx("p",{children:"Assign a priority letter to unlock your allocation."})]})]}),i.jsx("section",{className:"skills-grid",children:Object.entries(t.skills).flatMap(([M,A])=>A.map(I=>{const O=`${M}:${I.id}`,G=n[O]??0,R=(f==null?void 0:f.maxRank)??0,D=G>=R,L=v>0&&!D;return I.specializations.map(B=>`pre:${O}:${B.id??B.name}`).filter(B=>{const U=_.get(B);return(U==null?void 0:U.type)==="background"}),i.jsxs("article",{className:`skills-card ${D?"skills-card--maxed":""}`,children:[i.jsxs("div",{className:"skills-item__info",children:[i.jsx("h4",{children:I.name}),i.jsx("p",{children:I.description}),D&&i.jsx("span",{className:"skills-maxed-badge",children:"Max Rank"})]}),i.jsxs("label",{className:`skills-rating ${D?"skills-rating--maxed":""}`,children:[i.jsx("span",{children:"Rating"}),i.jsx("input",{type:"range",min:0,max:R,step:1,value:G,disabled:!f,onChange:N(O,G),className:!L&&G<R?"skills-rating__input--limited":""}),i.jsx("span",{className:"skills-rating__value",children:G})]}),I.specializations.length>0&&i.jsx("div",{className:"skills-item__specializations",children:i.jsxs("details",{children:[i.jsxs("summary",{children:["Specializations (",I.specializations.length," available)"]}),i.jsx("ul",{className:"skills-specializations",children:I.specializations.map(B=>{const U=`pre:${O}:${B.id??B.name}`,te=_.has(U),J=_.get(U),ee=(J==null?void 0:J.type)==="background",H=!f||f.specializations===0&&!te||f.specializations>0&&C===0&&!te;return i.jsx("li",{children:i.jsxs("label",{className:`skills-specialization__checkbox ${te?"selected":""} ${ee?"background":""}`,children:[i.jsx("input",{type:"checkbox",checked:te,disabled:H||ee,onChange:()=>T(O,I.name,B.id,B.name)}),i.jsxs("div",{className:"skills-specialization__content",children:[i.jsx("strong",{children:B.name}),i.jsx("span",{children:B.description}),ee&&i.jsx("span",{className:"gm-tag gm-tag--background",children:"Background"})]})]})},U)})})]})})]},O)}))}),(h.length>0||u.length>0)&&i.jsxs("section",{className:"skills-background",children:[i.jsx("h3",{children:"Background Specializations"}),i.jsx("p",{children:"These specializations were granted by your background (selected in the Background stage)."}),i.jsxs("ul",{className:"skills-background__list",children:[h.map(M=>i.jsxs("li",{children:[i.jsx("strong",{children:M}),i.jsx("span",{className:"gm-tag gm-tag--background",children:"Background"})]},M)),u.map(M=>i.jsxs("li",{children:[i.jsx("strong",{children:M}),i.jsx("span",{className:"gm-tag gm-tag--background",children:"Background (Custom)"})]},M))]})]}),i.jsxs("section",{className:"skills-selected",children:[i.jsx("h3",{children:"Selected Specializations"}),s.length===0?i.jsx("p",{children:"No specializations chosen yet."}):i.jsx("ul",{children:s.map(M=>i.jsxs("li",{children:[i.jsxs("div",{children:[i.jsx("strong",{children:M.label}),M.type==="custom"&&!M.gmApproved&&i.jsx("span",{className:"gm-tag",children:"Pending GM Approval"})]}),i.jsx("button",{type:"button",onClick:()=>o(M.id),"aria-label":`Remove ${M.label}`,children:"Remove"})]},M.id))})]}),i.jsxs("section",{className:"skills-footer",children:[i.jsxs("div",{children:[i.jsx("h3",{children:"Custom Specialization"}),i.jsxs("div",{className:"skills-custom",children:[i.jsxs("label",{children:[i.jsx("span",{children:"Describe your custom edge"}),i.jsxs("div",{className:"skills-custom__controls",children:[i.jsx("input",{value:k,onChange:M=>w(M.target.value),placeholder:"Ex: Underworld Etiquette",disabled:f?!K:!0}),i.jsx("button",{type:"button",onClick:P,disabled:!K||!k.trim(),children:"Add"})]})]}),i.jsxs("p",{className:"skills-custom__hint",children:[Nv,f?` Slots remaining: ${Math.max(C,0)}.`:""]})]})]}),i.jsxs("label",{className:"field",children:[i.jsx("span",{children:"Skill Notes"}),i.jsx("textarea",{value:y,onChange:M=>j(M.target.value),placeholder:"Record signature moves, training montages, and promised stunts."})]})]})]})}const _v={Physique:"physique",Intellect:"intellect",Presence:"presence"};function Ev({priority:e,scores:t,onUpdateScore:n,notes:r,onUpdateNotes:s,data:l,selectedSpecializations:o,onToggleSpecialization:a}){var h;if(!l||!Array.isArray(l.pointBuy)||!l.definitions)return i.jsx("div",{className:"stage stage--attributes",children:i.jsx("p",{children:"Attribute data failed to load. Please refresh."})});const c=z.useMemo(()=>e?l.pointBuy.find(u=>u.priority===e)??null:null,[l.pointBuy,e]),d=z.useMemo(()=>Object.entries(l.definitions).map(([u,f])=>{const x=_v[u];return x?{key:x,displayName:u,description:f.description,specializations:f.specializations??[]}:null}).filter(u=>u!==null),[l.definitions]),p=(c==null?void 0:c.attributePoints)??0,g=z.useMemo(()=>Object.entries(t).reduce((u,[f,x])=>(u[f]=Math.min(zs,Math.max(0,x)),u),{physique:0,intellect:0,presence:0}),[t]),m=Object.values(g).reduce((u,f)=>u+f,0),y=Math.max(p-m,0),j=(c==null?void 0:c.specializations)??0,k=z.useMemo(()=>Object.values(o).reduce((u,f)=>u+(Array.isArray(f)?f.length:0),0),[o]),w=Math.max(j-k,0);return i.jsxs("div",{className:"stage stage--attributes",children:[i.jsxs("header",{className:"stage__header",children:[i.jsxs("div",{children:[i.jsx("h2",{children:"Attributes"}),i.jsx("p",{children:"Only three pillars define your raw capability. Split your dice pool to show which part of their soul still shines and which has already been sold to the city."})]}),i.jsxs("aside",{className:"attribute-pool",children:[i.jsxs("span",{children:["Priority ",e??""]}),e?i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:["Pool ",p,"  Remaining ",y]}),i.jsxs("p",{className:"attribute-pool__detail",children:["Specializations: ",j>0?`${w} of ${j} remaining`:"None available"]})]}):i.jsx("p",{children:"Assign a priority letter to calculate your attribute pool."})]})]}),i.jsx("section",{className:"attributes-grid",children:d.map(u=>{var _;const f=t[u.key]??0,x=Math.min(f,zs),v=m-g[u.key],E=Math.max(p-v,0),C=Math.min(zs,E);return i.jsxs("article",{children:[i.jsxs("header",{children:[i.jsx("h3",{children:u.displayName}),i.jsx("p",{children:u.description})]}),i.jsxs("div",{className:"attribute-control",children:[i.jsx("input",{type:"range",min:0,max:C,value:x,onChange:N=>{const P=Number(N.target.value),T=Math.min(C,Math.max(0,P));n(u.key,T)}}),i.jsx("span",{className:"attribute-value",children:x})]}),((_=u.specializations)==null?void 0:_.length)>0&&i.jsxs("div",{className:"attribute-specializations",children:[i.jsx("h4",{children:"Specializations"}),i.jsx("ul",{children:u.specializations.map(N=>{const T=(o[u.key]??[]).includes(N.name),K=j===0&&!T||j>0&&w===0&&!T;return i.jsx("li",{children:i.jsxs("button",{type:"button",className:`attribute-specialization__toggle ${T?"selected":""}`,onClick:()=>a(u.key,N.name),disabled:K,children:[i.jsx("strong",{children:N.name}),i.jsx("span",{children:N.description})]})},N.name)})})]})]},u.key)})}),((h=l.ratings)==null?void 0:h.length)>0&&i.jsxs("section",{className:"attribute-ratings",children:[i.jsx("h3",{children:"Rating Benchmarks"}),i.jsx("ul",{children:l.ratings.map(u=>i.jsxs("li",{children:[i.jsx("span",{className:"attribute-rating__score",children:u.score}),i.jsx("span",{children:u.label})]},u.score))})]}),i.jsx("section",{children:i.jsxs("label",{className:"field",children:[i.jsx("span",{children:"Attribute Notes"}),i.jsx("textarea",{value:r,onChange:u=>s(u.target.value),placeholder:"What scars or tells explain these strengths and weaknesses?"})]})})]})}function Pv({corruption:e,onAdjustCorruption:t,onSetCorruption:n,onUpdateCorruptionNotes:r,advancement:s,onAdjustExperience:l,onSetExperience:o,onUpdateAdvancement:a,health:c,onAdjustHealth:d,onSetHealth:p,onUpdateScar:g,narrative:m,onAddRelationship:y,onRemoveRelationship:j,onUpdateAnchors:k,onUpdateNarrativeNotes:w}){const[h,u]=z.useState(""),f=()=>{h.trim()&&(y(h.trim()),u(""))};return i.jsxs("div",{className:"stage stage--narrative",children:[i.jsx("header",{className:"stage__header",children:i.jsxs("div",{children:[i.jsx("h2",{children:"Narrative, Corruption & Wounds"}),i.jsx("p",{children:"Record the scars the city has already carved. Corruption is front-and-center for players, while hidden notes can foreshadow GM complications."})]})}),i.jsxs("section",{className:"advancement-panel",children:[i.jsxs("div",{className:"experience-meter",children:[i.jsx("div",{className:"experience-value",children:s.experience}),i.jsx("span",{children:"Experience"}),i.jsxs("div",{className:"experience-controls",children:[i.jsx("button",{type:"button",onClick:()=>l(-1),children:"-1"}),i.jsx("button",{type:"button",onClick:()=>o(0),children:"Reset"}),i.jsx("button",{type:"button",onClick:()=>l(1),children:"+1"})]})]}),i.jsxs("label",{className:"field",children:[i.jsx("span",{children:"Advancement Track"}),i.jsx("textarea",{value:s.track,onChange:x=>a({track:x.target.value}),placeholder:"What does advancement look like for this character? Training regimens, resources, oaths."})]}),i.jsxs("label",{className:"field",children:[i.jsx("span",{children:"Milestones"}),i.jsx("textarea",{value:s.milestones,onChange:x=>a({milestones:x.target.value}),placeholder:"Log beats completed, debts paid, or corruption bargains accepted."})]})]}),i.jsxs("section",{className:"corruption-panel",children:[i.jsxs("div",{className:"corruption-meter",children:[i.jsx("div",{className:"corruption-value",children:e.current}),i.jsxs("span",{children:["Threshold ",e.warning]}),i.jsxs("div",{className:"corruption-controls",children:[i.jsx("button",{type:"button",onClick:()=>t(-1),children:"-1"}),i.jsx("button",{type:"button",onClick:()=>n(0),children:"Reset"}),i.jsx("button",{type:"button",onClick:()=>t(1),children:"+1"})]})]}),i.jsxs("label",{className:"field",children:[i.jsx("span",{children:"Corruption Notes"}),i.jsx("textarea",{value:e.notes,onChange:x=>r(x.target.value),placeholder:"Describe what corruption looks like for this character."})]})]}),i.jsxs("section",{className:"health-grid",children:[i.jsx("h3",{children:"Health by Body Location"}),i.jsx("div",{className:"health-cards",children:Object.keys(hc).map(x=>{const v=c[x],E=hc[x];return i.jsxs("article",{children:[i.jsxs("header",{children:[i.jsx("h4",{children:E}),i.jsxs("span",{children:[v.current," / ",v.max]})]}),i.jsxs("div",{className:"health-controls",children:[i.jsx("button",{type:"button",onClick:()=>d(x,-1),children:"-"}),i.jsx("input",{type:"number",min:0,max:v.max,value:v.current,onChange:C=>p(x,Number(C.target.value))}),i.jsx("button",{type:"button",onClick:()=>d(x,1),children:"+"})]}),i.jsxs("label",{children:[i.jsx("span",{children:"Scars & Notes"}),i.jsx("textarea",{value:v.scar,onChange:C=>g(x,C.target.value),placeholder:"Visible injuries, lingering trauma, prosthetics."})]})]},x)})})]}),i.jsxs("section",{className:"relationships-panel",children:[i.jsxs("div",{className:"relationships-list",children:[i.jsx("h3",{children:"Relationships"}),i.jsxs("div",{className:"relationship-input",children:[i.jsx("input",{value:h,onChange:x=>u(x.target.value),placeholder:"Name  why they matter  leverage"}),i.jsx("button",{type:"button",onClick:f,children:"Add"})]}),m.relationships.length===0?i.jsx("p",{children:"No relationships logged yet."}):i.jsx("ul",{children:m.relationships.map(x=>i.jsxs("li",{children:[i.jsx("span",{children:x}),i.jsx("button",{type:"button",onClick:()=>j(x),children:"Remove"})]},x))})]}),i.jsxs("div",{className:"anchors",children:[i.jsxs("label",{className:"field",children:[i.jsx("span",{children:"Anchors"}),i.jsx("textarea",{value:m.anchors,onChange:x=>k(x.target.value),placeholder:"What keeps them tethered to humanity?"})]}),i.jsxs("label",{className:"field",children:[i.jsx("span",{children:"Other Notes"}),i.jsx("textarea",{value:m.notes,onChange:x=>w(x.target.value),placeholder:"Foreshadow upcoming arcs, unresolved debts, or metaphysical tells."})]})]})]})]})}function bv(){var Yo;const{data:e}=Zr(),t=Y(b=>b.ensureActiveBuild),n=Y(b=>b.activeBuildId?b.builds[b.activeBuildId]:null),r=Y(b=>b.setStage),s=Y(b=>b.updateProfile),l=Y(b=>b.assignPriority),o=Y(b=>b.selectLineage),a=Y(b=>b.toggleLineageReveal),c=Y(b=>b.updateLineageNotes),d=Y(b=>b.toggleLineagePower),p=Y(b=>b.clearLineagePowers),g=Y(b=>b.updateResourceNotes),m=Y(b=>b.updateBackground),y=Y(b=>b.addContactResource),j=Y(b=>b.updateContactResource),k=Y(b=>b.removeContactResource),w=Y(b=>b.addRetainerResource),h=Y(b=>b.updateRetainerResource),u=Y(b=>b.removeRetainerResource),f=Y(b=>b.addPropertyResource),x=Y(b=>b.updatePropertyResource),v=Y(b=>b.removePropertyResource),E=Y(b=>b.addGoodsResource),C=Y(b=>b.updateGoodsResource),_=Y(b=>b.removeGoodsResource),N=Y(b=>b.setResourceLiquid),P=Y(b=>b.setSkillRating),T=Y(b=>b.toggleSkillSpecialization),K=Y(b=>b.removeSkillSpecialization),M=Y(b=>b.addCustomSkillSpecialization),A=Y(b=>b.setBackgroundSkillSpecializations),I=Y(b=>b.setBackgroundCustomSpecializations),O=Y(b=>b.updateSkillNotes),G=Y(b=>b.setAttributeScore),R=Y(b=>b.updateAttributeNotes),D=Y(b=>b.toggleAttributeSpecialization),L=Y(b=>b.resetActiveBuild),B=Y(b=>b.adjustExperience),U=Y(b=>b.setExperience),te=Y(b=>b.updateAdvancement),J=Y(b=>b.adjustCorruption),ee=Y(b=>b.setCorruption),H=Y(b=>b.updateCorruptionNotes),q=Y(b=>b.adjustHealth),ie=Y(b=>b.setHealth),Se=Y(b=>b.updateHealthScar),Ze=Y(b=>b.addRelationship),Be=Y(b=>b.removeRelationship),V=Y(b=>b.updateAnchors),ue=Y(b=>b.updateNarrativeNotes),oe=yt(b=>b.gmUnlocked);z.useEffect(()=>{t()},[t]);const S=z.useMemo(()=>tp((n==null?void 0:n.lineage.key)??null),[n==null?void 0:n.lineage.key]);if(!e||!n)return null;const Q=Array.isArray(n.lineage.powers)?n.lineage.powers:[],X=n.lineage.key?(Yo=e.powerSets)==null?void 0:Yo[n.lineage.key]:void 0,je=n.background.title?e.backgrounds[n.background.title]:void 0,F=Array.isArray(je==null?void 0:je.skillSpecializationOptions)?je.skillSpecializationOptions:[],_e=(b,kt)=>l(b,kt),le=b=>l(b,null);let lt;switch(n.stage){case"priorities":lt=i.jsx(tv,{priorities:n.priorities,onSelect:_e,onClear:le});break;case"lineage":lt=i.jsx(pv,{priorities:n.priorities,selected:n.lineage.key,onSelect:b=>o(b),canReveal:oe,revealMechanics:n.lineage.revealMechanics,onToggleReveal:a,notes:n.lineage.notes,onUpdateNotes:c,powerSet:X,powers:Q,onTogglePower:d,onClearPowers:p});break;case"resources":lt=i.jsx(xv,{priority:n.priorities.resources,system:e.resources,costs:e.resourceCosts,contacts:n.resources.contacts,retainers:n.resources.retainers,properties:n.resources.properties,goods:n.resources.goods,liquid:n.resources.liquid,onAddContact:y,onUpdateContact:j,onRemoveContact:k,onAddRetainer:w,onUpdateRetainer:h,onRemoveRetainer:u,onAddProperty:f,onUpdateProperty:x,onRemoveProperty:v,onAddGoods:E,onUpdateGoods:C,onRemoveGoods:_,onUpdateLiquid:N,notes:n.resources.notes,onUpdateNotes:g});break;case"background":lt=i.jsx(wv,{priority:n.priorities.background,background:n.background,skills:n.skills,onUpdate:m,onUpdateSpecializations:A,onUpdateCustomSpecializations:I,data:e.backgrounds});break;case"skills":lt=i.jsx(Cv,{priority:n.priorities.skills,data:e.skills,ratings:n.skills.ratings,onChangeRating:P,specializations:n.skills.specializations,onToggleSpecialization:T,onRemoveSpecialization:K,onAddCustomSpecialization:M,backgroundSpecializations:n.skills.backgroundSpecializations,backgroundCustomSpecializations:n.skills.backgroundCustomSpecializations,backgroundOptions:F,onSetBackgroundSpecializations:A,onSetBackgroundCustomSpecializations:I,notes:n.skills.notes,onUpdateNotes:O});break;case"attributes":lt=i.jsx(Ev,{priority:n.priorities.attributes,scores:n.attributes.scores,onUpdateScore:(b,kt)=>G(b,kt),notes:n.attributes.notes,onUpdateNotes:R,data:e.attributes,selectedSpecializations:n.attributes.specializations,onToggleSpecialization:D});break;case"narrative":lt=i.jsx(Pv,{corruption:n.corruption,onAdjustCorruption:J,onSetCorruption:ee,onUpdateCorruptionNotes:H,advancement:n.advancement,onAdjustExperience:B,onSetExperience:U,onUpdateAdvancement:te,health:n.health,onAdjustHealth:(b,kt)=>q(b,kt),onSetHealth:(b,kt)=>ie(b,kt),onUpdateScar:(b,kt)=>Se(b,kt),narrative:n.narrative,onAddRelationship:Ze,onRemoveRelationship:Be,onUpdateAnchors:V,onUpdateNarrativeNotes:ue});break;default:lt=null}const op=S?{"--lineage-accent":S.aesthetic.accent,"--lineage-glow":S.aesthetic.glow}:void 0;return i.jsxs("div",{className:"min-h-screen px-deco-md py-deco-lg space-y-deco-lg relative sm:px-deco-md px-2",style:op,children:[S&&i.jsx("div",{className:"absolute inset-0 opacity-40 pointer-events-none -z-10",style:{background:S.aesthetic.glow||"radial-gradient(circle at 10% 10%, rgba(212, 175, 55, 0.1), transparent 65%)"}}),i.jsxs("div",{className:"max-w-7xl mx-auto space-y-deco-lg",children:[i.jsx("div",{className:"mb-deco-xl",children:i.jsx(Ug,{build:n,onUpdate:s})}),i.jsx("div",{className:"flex justify-end mb-deco-lg",children:i.jsx("button",{type:"button",onClick:L,className:`px-deco-md py-2 rounded-full border-2 border-sidonia-gold/60
                     bg-sidonia-dark text-sidonia-text hover:border-sidonia-gold
                     font-body text-xs uppercase tracking-wider transition-all duration-300
                     hover:bg-sidonia-gold/5`,children:"Reset Character"})}),i.jsx("div",{className:"mb-deco-xl",children:i.jsx(Xg,{current:n.stage,onNavigate:r})}),i.jsx("div",{className:"stage",children:lt})]})]})}function zv(e,t){const n=e.background.title?t.backgrounds[e.background.title]??null:null;return{version:"0.1.0",generatedAt:new Date().toISOString(),profile:e.profile,priorities:e.priorities,lineage:e.lineage,resources:e.resources,background:e.background,skills:e.skills,attributes:e.attributes,corruption:e.corruption,health:e.health,narrative:e.narrative,gmNotes:e.gmNotes,reference:{resources:t.resources,resourceCosts:t.resourceCosts,powerSchemas:t.powerSchemas,attributes:t.attributes,backgrounds:t.backgrounds,selectedBackgroundTemplate:n,characterSheet:t.characterSheet}}}function Rv(e,t){const n=zv(e,t),r=new Blob([JSON.stringify(n,null,2)],{type:"application/json"});rp(`${sp(e.profile.name||e.label)}.json`,r)}function Av(e){const t=Tv(e),n=new Blob([t],{type:"text/plain"});rp(`${sp(e.profile.name||e.label)}.txt`,n)}function Tv(e){const t=[];t.push(`SIDONIA DOSSIER :: ${e.profile.name||e.label}`),t.push(`Current Profession: ${e.profile.currentProfession}`),t.push(`Ward of Residence: ${e.profile.wardOfResidence}`),t.push(`Backstory: ${e.profile.backstory}`),e.profile.alias&&t.push(`Alias: ${e.profile.alias}`),e.profile.physicalDescription&&t.push(`Physical Description: ${e.profile.physicalDescription}`),e.profile.code&&t.push(`Code: ${e.profile.code}`),e.profile.lineNotCrossed&&t.push(`Line Not Crossed: ${e.profile.lineNotCrossed}`),e.profile.temptation&&t.push(`Temptation: ${e.profile.temptation}`),t.push(""),t.push("Priorities:"),Object.entries(e.priorities).forEach(([s,l])=>{t.push(`  ${s.toUpperCase()}: ${l??"-"}`)}),t.push(""),t.push(`Lineage: ${e.lineage.key??"Unchosen"}`),t.push(`Lineage Notes: ${e.lineage.notes}`),e.lineage.powers.length>0&&(t.push("Selected Lineage Powers:"),e.lineage.powers.forEach(s=>{var a,c,d,p,g,m;const l=[];(a=s.meta)!=null&&a.tierLabel&&l.push(s.meta.tierLabel),(c=s.meta)!=null&&c.sphere&&l.push(s.meta.sphere),(d=s.meta)!=null&&d.moveType&&l.push(s.meta.moveType),(p=s.meta)!=null&&p.branch&&l.push(s.meta.branch),(g=s.meta)!=null&&g.chassis&&l.push(s.meta.chassis),(m=s.meta)!=null&&m.category&&!["esper-base","esper-mentalist"].includes(s.meta.category)&&l.push(s.meta.category);const o=l.length>0?` (${l.join(", ")})`:"";t.push(`  - ${s.label}${o}`)})),t.push(""),t.push("Resources:"),e.resources.contacts.length>0&&(t.push("  Contacts:"),e.resources.contacts.forEach(s=>{const l=s.gmApproved?"":" [GM Approval Required]",o=s.specialization?` (${s.specialization})`:"",a=s.name||"Unnamed Contact";t.push(`    - ${a}${o}${l}`),t.push(`      Reach ${s.reach} / Influence ${s.influence}`),s.description&&t.push(`      ${s.description}`)})),e.resources.retainers.length>0&&(t.push("  Retainers:"),e.resources.retainers.forEach(s=>{const l=s.gmApproved?"":" [GM Approval Required]",o=s.specialization?` (${s.specialization})`:"",a=s.name||"Unnamed Retainer";t.push(`    - ${a}${o}${l}`),t.push(`      Competence ${s.competence} / Loyalty ${s.loyalty}`),s.description&&t.push(`      ${s.description}`)})),e.resources.properties.length>0&&(t.push("  Properties:"),e.resources.properties.forEach(s=>{const l=s.gmApproved?"":" [GM Approval Required]",o=s.specialization?` (${s.specialization})`:"",a=s.name||"Unnamed Property";t.push(`    - ${a}${o}${l}`),t.push(`      Tenure: ${s.tenure||""}  Zoning: ${s.zoning||""}`),s.ward&&t.push(`      Ward: ${s.ward}`),s.description&&t.push(`      ${s.description}`)})),e.resources.goods.length>0&&(t.push("  Goods & Stockpiles:"),e.resources.goods.forEach(s=>{const l=s.gmApproved?"":" [GM Approval Required]",o=s.specialization?` (${s.specialization})`:"",a=s.name||"Unnamed Cache";t.push(`    - ${a}${o}${l}`),t.push(`      Quality ${s.quality}`),s.description&&t.push(`      ${s.description}`)})),t.push(`  Liquid Assets: ${e.resources.liquid}`),t.push(`Resource Notes: ${e.resources.notes}`),t.push(""),t.push(`Background: ${e.background.title}`),t.push(`Details: ${e.background.tierNotes}`),t.push(`Contacts: ${e.background.contacts}`),t.push(""),t.push("Skills:"),Object.entries(e.skills.ratings).forEach(([s,l])=>{l>0&&t.push(`  ${Lv(s)}: ${l}`)});const n=e.skills.specializations.filter(s=>s.type!=="background");n.length>0&&(t.push("Specializations:"),n.forEach(s=>{const l=s.type==="custom"&&!s.gmApproved?" (Pending GM Approval)":"";t.push(`  - ${s.label}${l}`)})),(e.skills.backgroundSpecializations.length>0||e.skills.backgroundCustomSpecializations.length>0)&&(t.push("Background Specializations:"),e.skills.backgroundSpecializations.forEach(s=>{t.push(`  - ${s}`)}),e.skills.backgroundCustomSpecializations.forEach(s=>{t.push(`  - ${s} (Custom)`)})),t.push(`Skill Notes: ${e.skills.notes}`),t.push(""),t.push("Attributes:"),Object.entries(e.attributes.scores).forEach(([s,l])=>{t.push(`  ${s}: ${l}`)});const r=Object.entries(e.attributes.specializations).filter(([,s])=>s.length>0);return r.length>0&&(t.push("Attribute Specializations:"),r.forEach(([s,l])=>{t.push(`  ${s}: ${l.join(", ")}`)})),t.push(`Attribute Notes: ${e.attributes.notes}`),t.push(""),t.push(`Corruption: ${e.corruption.current} / ${e.corruption.warning}`),t.push(`Corruption Notes: ${e.corruption.notes}`),t.push(""),t.push("Health:"),Object.entries(e.health).forEach(([s,l])=>{t.push(`  ${s}: ${l.current}/${l.max} :: ${l.scar}`)}),t.push(""),t.push("Relationships:"),e.narrative.relationships.forEach(s=>t.push(`  - ${s}`)),t.push(`Anchors: ${e.narrative.anchors}`),t.push(`Notes: ${e.narrative.notes}`),e.gmNotes&&(t.push(""),t.push("GM Notes:"),t.push(e.gmNotes)),t.join(`
`)}function rp(e,t){const n=document.createElement("a"),r=URL.createObjectURL(t);n.href=r,n.download=e,n.click(),URL.revokeObjectURL(r)}function sp(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||"sidonia-character"}function Lv(e){const[t,n]=e.split(":");return`${xc(t)}  ${xc((n??"").replace(/-/g," "))}`}function xc(e){return e.split(/\s+/).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ").trim()}function $v(){const{data:e}=Zr(),t=Y(m=>m.builds),n=Y(m=>m.activeBuildId),r=Y(m=>m.createBuild),s=Y(m=>m.setActiveBuild),l=Y(m=>m.archiveBuild),o=Y(m=>m.renameBuild),a=Y(m=>m.duplicateBuild),[c,d]=z.useState(""),p=z.useMemo(()=>Object.values(t).sort((m,y)=>m.updatedAt<y.updatedAt?1:-1),[t]),g=()=>{const m=r(c.trim()||void 0);d(""),s(m)};return e?i.jsx("div",{className:"min-h-screen px-deco-md py-deco-lg",children:i.jsxs("div",{className:"max-w-7xl mx-auto space-y-deco-lg",children:[i.jsxs("header",{className:"text-center space-y-deco-sm mb-deco-xl",children:[i.jsx("h1",{className:"text-display-lg text-shadow-gold",children:"Character Management"}),i.jsx("div",{className:"h-px w-32 mx-auto bg-gradient-to-r from-transparent via-sidonia-gold to-transparent"}),i.jsx("p",{className:"text-body text-sidonia-text max-w-2xl mx-auto",children:"Spin up new dossiers, duplicate existing ones, and export packages for your virtual tabletop or print."})]}),i.jsx(Ft,{className:"mb-deco-lg",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-deco-sm items-end",children:[i.jsx("div",{className:"flex-1 w-full",children:i.jsx(un,{label:"Name your new dossier",value:c,onChange:m=>d(m.target.value),placeholder:"Untitled Operative"})}),i.jsx(Fe,{variant:"primary",size:"lg",onClick:g,className:"w-full sm:w-auto",children:"Create Character"})]})}),p.length===0&&i.jsx("div",{className:"text-center py-deco-xl",children:i.jsx("p",{className:"text-sidonia-muted font-body",children:"No builds yet. Start by creating a new dossier."})}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:p.map(m=>{const y=m.id===n;return i.jsxs("article",{className:ae("relative bg-sidonia-dark border-2 rounded-lg p-deco-md space-y-deco-sm","transition-all duration-300",y?"border-sidonia-gold shadow-lg shadow-sidonia-gold/20":"border-sidonia-gold/60 hover:border-sidonia-gold"),children:[y&&i.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full bg-sidonia-gold/20 border border-sidonia-gold",children:i.jsx("span",{className:"text-xs font-display uppercase tracking-wider text-sidonia-gold",children:"Active"})}),i.jsxs("header",{className:"space-y-2",children:[i.jsx("input",{value:m.label,onChange:j=>o(m.id,j.target.value),"aria-label":"Character label",className:`w-full bg-sidonia-black border border-sidonia-gold/50 text-sidonia-text
                             px-deco-sm py-2 rounded font-display text-lg tracking-wider uppercase
                             focus:outline-none focus:ring-1 focus:border-sidonia-gold focus:ring-sidonia-gold/20
                             transition-all duration-300`}),!y&&i.jsx(Fe,{variant:"secondary",size:"sm",onClick:()=>s(m.id),className:"w-full",children:"Set Active"})]}),i.jsxs("dl",{className:"space-y-2 py-deco-sm border-t border-b border-sidonia-gold/60",children:[i.jsxs("div",{children:[i.jsx("dt",{className:"text-label",children:"Name"}),i.jsx("dd",{className:"text-sidonia-text font-body",children:m.profile.name||""})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-label",children:"Profession"}),i.jsx("dd",{className:"text-sidonia-text font-body",children:m.profile.currentProfession||""})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-label",children:"Updated"}),i.jsx("dd",{className:"text-sidonia-text font-body text-sm",children:new Date(m.updatedAt).toLocaleString()})]})]}),i.jsxs("footer",{className:"grid grid-cols-2 gap-2",children:[i.jsx(Fe,{variant:"ghost",size:"sm",onClick:()=>a(m.id),className:"text-xs",children:"Duplicate"}),i.jsx(Fe,{variant:"ghost",size:"sm",onClick:()=>Rv(m,e),className:"text-xs",children:"Export JSON"}),i.jsx(Fe,{variant:"ghost",size:"sm",onClick:()=>Av(m),className:"text-xs",children:"Printable"}),i.jsx(Fe,{variant:"danger",size:"sm",onClick:()=>Mv(m.id,m.label,l),className:"text-xs",children:"Delete"})]})]},m.id)})})]})}):null}function Mv(e,t,n){window.confirm(`Delete ${t}? This action cannot be undone.`)&&n(e)}function Iv(){const{data:e}=Zr(),t=yt(y=>y.gmUnlocked),n=yt(y=>y.authenticateGm),r=yt(y=>y.lockGm),s=yt(y=>y.gmUnlockedAt),[l,o]=z.useState(""),[a,c]=z.useState(null),d=(e==null?void 0:e.designDocs)??[],p=(e==null?void 0:e.powerSchemas)??{},g=y=>{y.preventDefault(),n(l)?(c(null),o("")):(c("Access denied. Double-check the veil phrase."),re.track("gm.invalid_passphrase",{}))},m=z.useMemo(()=>Object.entries(p),[p]);return i.jsx("div",{className:"min-h-screen px-deco-md py-deco-lg",children:i.jsxs("div",{className:"max-w-7xl mx-auto space-y-deco-lg",children:[i.jsxs("header",{className:"text-center space-y-deco-sm",children:[i.jsx("h1",{className:"text-display-lg text-corruption-red text-shadow-gold",children:"GM Veil"}),i.jsx("div",{className:"h-px w-32 mx-auto bg-gradient-to-r from-transparent via-corruption-red to-transparent"}),i.jsx("p",{className:"text-body text-sidonia-text/80 max-w-2xl mx-auto",children:"Hidden truths live here. Only game masters with the veil phrase may cross. Player tables should never see the material below."})]}),!t&&i.jsx(Ft,{className:"max-w-2xl mx-auto",children:i.jsxs("form",{onSubmit:g,className:"space-y-deco-sm",children:[i.jsx(un,{label:"Veil Phrase",value:l,onChange:y=>o(y.target.value),placeholder:"Enter the GM veil phrase",autoComplete:"off",error:a||void 0}),i.jsx(Fe,{variant:"danger",size:"lg",type:"submit",className:"w-full animate-corruption-glow",children:"Slip Behind the Veil"})]})}),t&&i.jsxs("div",{className:"space-y-deco-lg",children:[i.jsx(Ft,{className:"bg-corruption-dark/20 border-corruption-red/40",children:i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-deco-sm",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"font-display text-2xl tracking-wider uppercase text-corruption-red",children:"Veil Raised"}),i.jsxs("p",{className:"text-sidonia-text/70 font-body text-sm mt-1",children:["Unlocked ",s?new Date(s).toLocaleString():"just now","."]})]}),i.jsx(Fe,{variant:"secondary",onClick:r,children:"Re-engage Safety"})]})}),i.jsxs("section",{className:"space-y-deco-sm",children:[i.jsx("h2",{className:"font-display text-3xl tracking-wider uppercase text-sidonia-gold",children:"Power Schemas"}),i.jsx("p",{className:"text-sidonia-text/70 font-body",children:"Raw schema data for powers, lineages, and their restrictions. Export directly for system reference."}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-deco-sm",children:m.map(([y,j])=>i.jsxs(Ft,{className:"space-y-deco-sm",children:[i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsx("h3",{className:"font-display text-lg tracking-wide uppercase text-sidonia-brass",children:Ov(y)}),i.jsx(Fe,{variant:"ghost",size:"sm",onClick:()=>ip(`${y}-schema.json`,j),className:"text-xs flex-shrink-0",children:"Download"})]}),i.jsxs("pre",{className:`max-h-[200px] overflow-auto p-deco-sm rounded bg-sidonia-black/60
                                   text-sidonia-text/80 font-mono text-xs border border-sidonia-gold/20`,children:[JSON.stringify(j,null,2).slice(0,400),""]})]},y))})]}),i.jsxs("section",{className:"space-y-deco-sm",children:[i.jsx("h2",{className:"font-display text-3xl tracking-wider uppercase text-sidonia-gold",children:"Design Documents"}),i.jsx("p",{className:"text-sidonia-text/70 font-body",children:"Reference briefs written for GM eyes. Share selectively with players as the narrative reveals itself."}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-deco-sm",children:d.map(y=>i.jsxs(Ft,{className:"space-y-deco-sm",children:[i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsx("h3",{className:"font-display text-lg tracking-wide uppercase text-sidonia-brass",children:y.title}),i.jsx(Fe,{variant:"ghost",size:"sm",onClick:()=>Dv(`${y.id}.md`,y.content),className:"text-xs flex-shrink-0",children:"Download"})]}),i.jsxs("pre",{className:`max-h-[200px] overflow-auto p-deco-sm rounded bg-sidonia-black/60
                                   text-sidonia-text/80 font-mono text-xs border border-sidonia-gold/20 whitespace-pre-wrap`,children:[y.content.slice(0,400),""]})]},y.id))})]}),i.jsxs("section",{className:"space-y-deco-sm",children:[i.jsx("h2",{className:"font-display text-3xl tracking-wider uppercase text-sidonia-gold",children:"Analytics Buffer"}),i.jsx("p",{className:"text-sidonia-text/70 font-body",children:"Inspect anonymized analytics currently stored locally. Export before sharing with designers."}),i.jsx(Ft,{children:i.jsx(Bv,{})})]})]})]})})}function Ov(e){return e.split(/[-_]/).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function ip(e,t){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"});lp(e,n)}function Dv(e,t){const n=new Blob([t],{type:"text/plain"});lp(e,n)}function lp(e,t){const n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=e,r.click(),URL.revokeObjectURL(n)}function Bv(){const e=yt(n=>n.analyticsConsent),t=re.getAll();return e!=="accepted"?i.jsx("p",{className:"text-sidonia-muted font-body text-center py-deco-md",children:"Analytics collection is currently disabled or declined."}):t.length===0?i.jsx("p",{className:"text-sidonia-muted font-body text-center py-deco-md",children:"No analytics entries recorded yet."}):i.jsxs("div",{className:"space-y-deco-sm",children:[i.jsx(Fe,{variant:"secondary",size:"md",onClick:()=>ip("sidonia-analytics.json",t),children:"Export Analytics Buffer"}),i.jsx("ul",{className:"list-none p-0 m-0 space-y-2 max-h-[220px] overflow-auto",children:t.map(n=>i.jsxs("li",{className:`grid grid-cols-[auto_auto_1fr] gap-2 bg-sidonia-black/40 p-deco-sm rounded
                     border border-sidonia-gold/20 items-center`,children:[i.jsx("strong",{className:"text-sidonia-gold font-display text-xs uppercase tracking-wide",children:n.event}),i.jsx("span",{className:"text-sidonia-muted font-mono text-xs",children:new Date(n.timestamp).toLocaleTimeString()}),n.data&&i.jsx("code",{className:"text-sidonia-text/60 font-mono text-xs overflow-hidden text-ellipsis",children:JSON.stringify(n.data)})]},`${n.event}-${n.timestamp}`))})]})}function Uv(){return i.jsxs("div",{className:"loading-spinner",role:"status","aria-live":"polite",children:[i.jsx("div",{className:"loading-spinner__glow"}),i.jsx("span",{className:"loading-spinner__label",children:"Loading the Veil"})]})}function Fv(){const{status:e,error:t,refresh:n}=Zr();let r;return e==="idle"||e==="loading"?r=i.jsx(Uv,{}):e==="error"?r=i.jsxs("div",{children:[i.jsx("h2",{children:"We lost the signal."}),i.jsxs("p",{children:["Character data failed to load. ",t]}),i.jsx("button",{type:"button",onClick:n,children:"Retry"})]}):r=i.jsxs(Pm,{children:[i.jsx(Cn,{path:"/",element:i.jsx(Bg,{})}),i.jsx(Cn,{path:"/builder",element:i.jsx(bv,{})}),i.jsx(Cn,{path:"/management",element:i.jsx($v,{})}),i.jsx(Cn,{path:"/gm",element:i.jsx(Iv,{})}),i.jsx(Cn,{path:"*",element:i.jsx(_m,{to:"/",replace:!0})})]}),i.jsx(Dg,{children:r})}el.createRoot(document.getElementById("root")).render(i.jsx(to.StrictMode,{children:i.jsx(Mm,{children:i.jsx($g,{children:i.jsx(Fv,{})})})}));
