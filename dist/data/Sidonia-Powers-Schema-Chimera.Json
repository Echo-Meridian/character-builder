{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Chimera Power Extension",
  "description": "Extension schema for Chimera lineage powers. Adds tiered progression system with Mutation Points and Permanent Corruption costs.",
  "version": "1.0",
  "extends": "sidonia-power-base.json",
  "type": "object",
  "allOf": [
    {
      "$ref": "sidonia-power-base.json"
    },
    {
      "type": "object",
      "required": ["lineage", "tiers"],
      "properties": {
        "lineage": {
          "description": "Must be 'chimera' for Chimera powers.",
          "type": "string",
          "const": "chimera"
        },
        "tiers": {
          "description": "Tiered progression system for Chimera mutations. Each power has 1-3 tiers.",
          "type": "object",
          "required": ["tier1"],
          "properties": {
            "tier1": {
              "$ref": "#/definitions/chimeraTier"
            },
            "tier2": {
              "$ref": "#/definitions/chimeraTier"
            },
            "tier3": {
              "$ref": "#/definitions/chimeraTier"
            }
          },
          "additionalProperties": false
        }
      }
    }
  ],
  "definitions": {
    "chimeraTier": {
      "description": "A single tier of a Chimera mutation.",
      "type": "object",
      "required": [
        "id",
        "name",
        "tier",
        "mutationPoints",
        "permanentCorruption",
        "description",
        "effects"
      ],
      "properties": {
        "id": {
          "description": "Unique identifier for this specific tier (e.g., 'armored-hide-tier2').",
          "type": "string",
          "pattern": "^[a-z0-9-]+$"
        },
        "name": {
          "description": "Display name for this tier (e.g., 'Segmented Carapace').",
          "type": "string",
          "minLength": 1
        },
        "tier": {
          "description": "Which tier this is (1, 2, or 3).",
          "type": "integer",
          "enum": [1, 2, 3]
        },
        "mutationPoints": {
          "description": "Mutation Point cost to purchase this tier. Tier 1-2 typically cost 2 MP, Tier 3 costs 3 MP.",
          "type": "integer",
          "minimum": 1
        },
        "permanentCorruption": {
          "description": "Permanent Corruption incurred by purchasing this tier. Usually matches tier number.",
          "type": "integer",
          "minimum": 1
        },
        "description": {
          "description": "Description object (inherits from base schema).",
          "type": "object",
          "required": ["short", "player"],
          "properties": {
            "short": {
              "type": "string",
              "minLength": 1
            },
            "player": {
              "type": "string",
              "minLength": 1
            },
            "flaw": {
              "type": ["string", "null"]
            },
            "gm": {
              "type": ["string", "null"]
            }
          }
        },
        "effects": {
          "description": "Array of mechanical effects for this tier.",
          "type": "array",
          "items": {
            "$ref": "sidonia-power-base.json#/definitions/effect"
          }
        },
        "flaws": {
          "description": "Array of mechanical flaws for this tier.",
          "type": "array",
          "items": {
            "$ref": "sidonia-power-base.json#/definitions/flaw"
          }
        }
      }
    }
  },
  "notes": {
    "tierProgression": "Chimera can purchase any tier directly without prerequisites (no tier gates). A character can buy Tier 3 without owning Tier 1 or 2.",
    "mutationPointCosts": {
      "tier1": "Typically 2 MP",
      "tier2": "Typically 2 MP",
      "tier3": "Typically 3 MP"
    },
    "permanentCorruption": "Usually matches tier number (Tier 1 = 1 PC, Tier 2 = 2 PC, Tier 3 = 3 PC)",
    "flaws": "Tier 1 powers often have flaws. Higher tiers typically remove flaws while improving effects.",
    "categories": [
      "Core Augments",
      "Primal Manifestations",
      "Utility & Social Augments",
      "Aetheric Mutations",
      "Mastery Augment"
    ]
  }
}
